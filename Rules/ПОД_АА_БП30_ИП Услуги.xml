<ПравилаОбмена>
	<ВерсияФормата РежимСовместимости="РежимСовместимостиСБСП20">2.01</ВерсияФормата>
	<Ид>f4261796-6b6e-4b10-8f8d-f83216f4deff    </Ид>
	<Наименование>Автосалон5 --&gt; БухгалтерияПредприятия 3.0 ИП Услуги</Наименование>
	<ДатаВремяСоздания>2022-02-02T18:59:46</ДатаВремяСоздания>
	<Источник ВерсияПлатформы="8.0" ВерсияКонфигурации="5.0.07.03" СинонимКонфигурации="Альфа-Авто: Автосалон+Автосервис+Автозапчасти ПРОФ. Редакция 5">Автосалон5</Источник>
	<Приемник ВерсияПлатформы="8.0" ВерсияКонфигурации="3.0.74.69" СинонимКонфигурации="Бухгалтерия предприятия, редакция 3.0">БухгалтерияПредприятия</Приемник>
	<ПослеЗагрузкиПравилОбмена>
ВерсияПравил	= "//#%#153#%%#";
ВерсияПравил	= СтрЗаменить(ВерсияПравил, "//#%#","");
ВерсияПравил	= СтрЗаменить(ВерсияПравил, "#%%#","");
Сообщить("Версия правил " + ВерсияПравил);
// БП 3.0
Параметры.кодОргИПУслуги = "ЦБ000003";
Параметры.КодОсновногоСклада   = "00-000001";
Параметры.кодСкладаКомиссия = "00-000002";
Параметры.КодГруппыПоставщиков = "00-000003";
Параметры.КодГруппыПокупателей = "00-000005";
Параметры.КодГруппыТоваров     = "00-00000001";
Параметры.КодГруппыУСН         = "00-00000002";
Параметры.КодГруппыУслуг       = "00-00000117"; 
Параметры.КодНоменклатурнойГруппыТоваров = "00-000002";
Параметры.КодНоменклатурнойГруппыУСН = "00-000003";
Параметры.КодНоменклатурнойГруппыУслуги = "00-000002";
Параметры.кодОООАльфаМобил         = "ЦБ002462";</ПослеЗагрузкиПравилОбмена>
	<Параметры>
		<Параметр Имя="КодГруппыПокупателей                              " Наименование="Код группы поставщиков" ИспользуетсяПриЗагрузке="true" УстанавливатьВДиалоге="true" ТипЗначения="Строка" ПередаватьПараметрПриВыгрузке="true"/>
		<Параметр Имя="КодГруппыПоставщиков                              " Наименование="Код группы покупателей" ИспользуетсяПриЗагрузке="true" УстанавливатьВДиалоге="true" ТипЗначения="Строка" ПередаватьПараметрПриВыгрузке="true"/>
		<Параметр Имя="КодГруппыТоваров                                  " Наименование="Код группы товаров" ИспользуетсяПриЗагрузке="true" УстанавливатьВДиалоге="true" ТипЗначения="Строка" ПередаватьПараметрПриВыгрузке="true"/>
		<Параметр Имя="КодГруппыУслуг                                    " Наименование="Код группы услуг" ИспользуетсяПриЗагрузке="true" УстанавливатьВДиалоге="true" ТипЗначения="Строка" ПередаватьПараметрПриВыгрузке="true"/>
		<Параметр Имя="КодГруппыУСН                                      " Наименование="Код группы УСН" ИспользуетсяПриЗагрузке="true" УстанавливатьВДиалоге="true" ТипЗначения="Строка" ПередаватьПараметрПриВыгрузке="true"/>
		<Параметр Имя="КодНоменклатурнойГруппыТоваров                    " Наименование="КодНоменклатурнойГруппыТоваров" ИспользуетсяПриЗагрузке="true" УстанавливатьВДиалоге="true" ТипЗначения="Строка" ПередаватьПараметрПриВыгрузке="true"/>
		<Параметр Имя="КодНоменклатурнойГруппыУслуги                     " Наименование="КодНоменклатурнойГруппыУслуги" ИспользуетсяПриЗагрузке="true" УстанавливатьВДиалоге="true" ТипЗначения="Строка" ПередаватьПараметрПриВыгрузке="true"/>
		<Параметр Имя="КодНоменклатурнойГруппыУСН                        " Наименование="КодНоменклатурнойГруппыУСН" ИспользуетсяПриЗагрузке="true" УстанавливатьВДиалоге="true" ТипЗначения="Строка" ПередаватьПараметрПриВыгрузке="true"/>
		<Параметр Имя="кодОООАльфаМобил                                  " Наименование="кодОООАльфаМобил" ИспользуетсяПриЗагрузке="true" УстанавливатьВДиалоге="true" ТипЗначения="Строка" ПередаватьПараметрПриВыгрузке="true"/>
		<Параметр Имя="кодОргИПУслуги                                    " Наименование="кодОргИПУслуги" ИспользуетсяПриЗагрузке="true" УстанавливатьВДиалоге="true" ТипЗначения="Строка" ПередаватьПараметрПриВыгрузке="true"/>
		<Параметр Имя="КодОсновногоСклада                                " Наименование="КодОсновногоСклада" ИспользуетсяПриЗагрузке="true" УстанавливатьВДиалоге="true" ТипЗначения="Строка" ПередаватьПараметрПриВыгрузке="true"/>
		<Параметр Имя="кодСкладаКомиссия                                 " Наименование="кодСкладаКомиссия" ИспользуетсяПриЗагрузке="true" УстанавливатьВДиалоге="true" ТипЗначения="Строка" ПередаватьПараметрПриВыгрузке="true"/>
	</Параметры>
	<Обработки/>
	<ПравилаКонвертацииОбъектов>
		<Группа>
			<Код>Справочники</Код>
			<Наименование>Справочники</Наименование>
			<Порядок>50</Порядок>
			<Правило>
				<Код>Номенклатура</Код>
				<Наименование>Справочник: Номенклатура</Наименование>
				<Порядок>50</Порядок>
				<ПослеЗагрузки>Если Не Объект.ЭтоГруппа Тогда
	Если Найти(Объект.Комментарий, "#УСН#") &gt; 0 Тогда
		ГруппаУСН = Справочники.Номенклатура.НайтиПоКоду(Параметры.КодГруппыУСН);
		Если Не ГруппаУСН.Пустая() И ГруппаУСН.ЭтоГруппа Тогда
			Объект.Родитель = ГруппаУСН;
		КонецЕсли;
		НомГруппаУСН = Справочники.НоменклатурныеГруппы.НайтиПоКоду(Параметры.КодНоменклатурнойГруппыУСН);
		Если Не НомГруппаУСН.Пустая() Тогда
			Объект.НоменклатурнаяГруппа = НомГруппаУСН;
		КонецЕсли;
	Иначе
		ГруппаТоваров = Справочники.Номенклатура.НайтиПоКоду(Параметры.КодГруппыТоваров);
		Если Не ГруппаТоваров.Пустая() И ГруппаТоваров.ЭтоГруппа Тогда
			Объект.Родитель = ГруппаТоваров;
		КонецЕсли;
		НомГруппаТоваров = Справочники.НоменклатурныеГруппы.НайтиПоКоду(Параметры.КодНоменклатурнойГруппыТоваров);
		Если Не НомГруппаТоваров.Пустая() Тогда
			Объект.НоменклатурнаяГруппа = НомГруппаТоваров;
		КонецЕсли;
	КонецЕсли;		
	Объект.Комментарий  = СтрЗаменить(Объект.Комментарий, "#УСН#", "");
	Объект.Наименование = СокрЛП(Объект.Артикул) + ", " + СокрЛП(Объект.Наименование);
	Объект.ВидНоменклатуры = Справочники.ВидыНоменклатуры.НайтиПоНаименованию("Товары");
КонецЕсли;</ПослеЗагрузки>
				<ПоследовательностьПолейПоиска>  //Артикул         = СокрЛП(СвойстваПоиска.Получить("Артикул"));
  Код         = СокрЛП(СвойстваПоиска.Получить("Код"));
	Наименование    = СокрЛП(СвойстваПоиска.Получить("Наименование"));	
	УСН             = СвойстваПоиска.Получить("");
	Услуга          = СвойстваПоиска.Получить("Услуга");
	Если НомерВариантаПоиска = 1 Тогда
		//СсылкаНаОбъект = Справочники.Номенклатура.НайтиПоРеквизиту("Артикул", Артикул);
		СсылкаНаОбъект = Справочники.Номенклатура.НайтиПоКоду(Код);
		//Если СсылкаНаОбъект.Пустая() Тогда
		//	СсылкаНаОбъект = Справочники.Номенклатура.НайтиПоНаименованию(Артикул + ", " + Наименование);
		//КонецЕсли;
		//Если СсылкаНаОбъект.Пустая() Тогда
		//	СсылкаНаОбъект = Справочники.Номенклатура.НайтиПоНаименованию(Артикул + " " + Наименование);
		//КонецЕсли;	
		Если СсылкаНаОбъект.Пустая() Тогда
			СсылкаНаОбъект = Неопределено;
		КонецЕсли;	
		СвойстваПоиска.Удалить("");
		ПрекратитьПоиск = Истина;
	КонецЕсли;</ПоследовательностьПолейПоиска>
				<НеЗамещать>true</НеЗамещать>
				<ГенерироватьНовыйНомерИлиКодЕслиНеУказан>true</ГенерироватьНовыйНомерИлиКодЕслиНеУказан>
				<Источник>СправочникСсылка.Номенклатура</Источник>
				<Приемник>СправочникСсылка.Номенклатура</Приемник>
				<Свойства>
					<Свойство>
						<Код>1</Код>
						<Наименование>Артикул --&gt; Артикул</Наименование>
						<Порядок>50</Порядок>
						<Источник Имя="Артикул" Вид="Реквизит" Тип="Строка"/>
						<Приемник Имя="Артикул" Вид="Реквизит" Тип="Строка"/>
					</Свойство>
					<Свойство>
						<Код>2</Код>
						<Наименование>БазоваяЕдиницаИзмерения --&gt; ЕдиницаИзмерения</Наименование>
						<Порядок>100</Порядок>
						<Источник Имя="БазоваяЕдиницаИзмерения" Вид="Реквизит" Тип="СправочникСсылка.КлассификаторЕдиницИзмерения"/>
						<Приемник Имя="ЕдиницаИзмерения" Вид="Реквизит" Тип="СправочникСсылка.КлассификаторЕдиницИзмерения"/>
						<КодПравилаКонвертации>КлассификаторЕдиницИзмерения                      </КодПравилаКонвертации>
					</Свойство>
					<Свойство Отключить="true" Поиск="true">
						<Код>3</Код>
						<Наименование>Артикул --&gt; Код</Наименование>
						<Порядок>150</Порядок>
						<Источник Имя="Артикул" Вид="Реквизит" Тип="Строка"/>
						<Приемник Имя="Код" Вид="Свойство" Тип="Строка"/>
					</Свойство>
					<Свойство>
						<Код>4</Код>
						<Наименование>--&gt; Комментарий</Наименование>
						<Порядок>200</Порядок>
						<Источник Имя="" Вид=""/>
						<Приемник Имя="Комментарий" Вид="Реквизит" Тип="Строка"/>
						<ПередВыгрузкой>Если Источник.амбУСН Тогда
	Значение = Источник.Комментарий + "#УСН#";
Иначе	
	Значение = Источник.Комментарий;
КонецЕсли;</ПередВыгрузкой>
					</Свойство>
					<Свойство>
						<Код>5</Код>
						<Наименование>Наименование --&gt; Наименование</Наименование>
						<Порядок>250</Порядок>
						<Источник Имя="Наименование" Вид="Свойство" Тип="Строка"/>
						<Приемник Имя="Наименование" Вид="Свойство" Тип="Строка"/>
					</Свойство>
					<Свойство>
						<Код>6</Код>
						<Наименование>НаименованиеПолное --&gt; НаименованиеПолное</Наименование>
						<Порядок>300</Порядок>
						<Источник Имя="НаименованиеПолное" Вид="Реквизит" Тип="Строка"/>
						<Приемник Имя="НаименованиеПолное" Вид="Реквизит" Тип="Строка"/>
					</Свойство>
					<Свойство>
						<Код>7</Код>
						<Наименование>ПометкаУдаления --&gt; ПометкаУдаления</Наименование>
						<Порядок>350</Порядок>
						<Источник Имя="ПометкаУдаления" Вид="Свойство" Тип="Булево"/>
						<Приемник Имя="ПометкаУдаления" Вид="Свойство" Тип="Булево"/>
					</Свойство>
					<Свойство Отключить="true">
						<Код>8</Код>
						<Наименование>Производитель --&gt; Производитель</Наименование>
						<Порядок>400</Порядок>
						<Источник Имя="Производитель" Вид="Реквизит" Тип="СправочникСсылка.Производители"/>
						<Приемник Имя="Производитель" Вид="Реквизит" Тип="СправочникСсылка.Контрагенты"/>
					</Свойство>
					<Свойство Поиск="true">
						<Код>9</Код>
						<Наименование>--&gt; Родитель</Наименование>
						<Порядок>450</Порядок>
						<Источник Имя="" Вид=""/>
						<Приемник Имя="Родитель" Вид="Свойство" Тип="СправочникСсылка.Номенклатура"/>
						<КодПравилаКонвертации>НоменклатураПоКоду                                </КодПравилаКонвертации>
						<ПередВыгрузкой>Если Источник.амбУСН Тогда
	Значение = Параметры.КодГруппыУСН;
Иначе
	Значение = Параметры.КодГруппыТоваров;
КонецЕсли;</ПередВыгрузкой>
					</Свойство>
					<Свойство>
						<Код>11</Код>
						<Наименование>СтранаПроисхождения --&gt; СтранаПроисхождения</Наименование>
						<Порядок>550</Порядок>
						<Источник Имя="СтранаПроисхождения" Вид="Реквизит" Тип="СправочникСсылка.КлассификаторСтранМира"/>
						<Приемник Имя="СтранаПроисхождения" Вид="Реквизит" Тип="СправочникСсылка.СтраныМира"/>
						<КодПравилаКонвертации>КлассификаторСтранМира                            </КодПравилаКонвертации>
					</Свойство>
					<Свойство Поиск="true" Обязательное="true">
						<Код>12</Код>
						<Наименование>ЭтоГруппа --&gt; ЭтоГруппа</Наименование>
						<Порядок>600</Порядок>
						<Источник Имя="ЭтоГруппа" Вид="Свойство" Тип="Булево"/>
						<Приемник Имя="ЭтоГруппа" Вид="Свойство" Тип="Булево"/>
					</Свойство>
					<Свойство Поиск="true">
						<Код>13</Код>
						<Наименование>--&gt; Услуга</Наименование>
						<Порядок>650</Порядок>
						<Источник Имя="" Вид=""/>
						<Приемник Имя="Услуга" Вид="Реквизит" Тип="Булево"/>
						<ПередВыгрузкой>Если Источник.ВидНоменклатуры = Перечисления.ВидыНоменклатуры.Услуга Тогда
	Значение = Истина;
Иначе
	Значение = Ложь;
КонецЕсли;</ПередВыгрузкой>
					</Свойство>
					<Свойство Поиск="true">
						<Код>14</Код>
						<Наименование>амбУСН --&gt;</Наименование>
						<Порядок>700</Порядок>
						<Источник Имя="амбУСН" Вид="Реквизит" Тип="Булево"/>
						<Приемник Имя="" Вид=""/>
					</Свойство>
					<Свойство Поиск="true">
						<Код>15</Код>
						<Наименование>Код --&gt; Код</Наименование>
						<Порядок>750</Порядок>
						<Источник Имя="Код" Вид="Свойство" Тип="Строка"/>
						<Приемник Имя="Код" Вид="Свойство" Тип="Строка"/>
					</Свойство>
				</Свойства>
				<Значения/>
			</Правило>
			<Правило>
				<Код>КлассификаторЕдиницИзмерения</Код>
				<Наименование>Справочник: Классификатор единиц измерения</Наименование>
				<Порядок>100</Порядок>
				<НеЗамещать>true</НеЗамещать>
				<ГенерироватьНовыйНомерИлиКодЕслиНеУказан>true</ГенерироватьНовыйНомерИлиКодЕслиНеУказан>
				<Источник>СправочникСсылка.КлассификаторЕдиницИзмерения</Источник>
				<Приемник>СправочникСсылка.КлассификаторЕдиницИзмерения</Приемник>
				<Свойства>
					<Свойство>
						<Код>1</Код>
						<Наименование>Код --&gt; Код</Наименование>
						<Порядок>50</Порядок>
						<Источник Имя="Код" Вид="Свойство" Тип="Строка"/>
						<Приемник Имя="Код" Вид="Свойство" Тип="Строка"/>
					</Свойство>
					<Свойство Поиск="true">
						<Код>2</Код>
						<Наименование>Наименование --&gt; Наименование</Наименование>
						<Порядок>100</Порядок>
						<Источник Имя="Наименование" Вид="Свойство" Тип="Строка"/>
						<Приемник Имя="Наименование" Вид="Свойство" Тип="Строка"/>
					</Свойство>
				</Свойства>
				<Значения/>
			</Правило>
			<Правило>
				<Код>КлассификаторСтранМира</Код>
				<Наименование>Справочник: Классификатор стран мира</Наименование>
				<Порядок>150</Порядок>
				<НеЗамещать>true</НеЗамещать>
				<ГенерироватьНовыйНомерИлиКодЕслиНеУказан>true</ГенерироватьНовыйНомерИлиКодЕслиНеУказан>
				<Источник>СправочникСсылка.КлассификаторСтранМира</Источник>
				<Приемник>СправочникСсылка.СтраныМира</Приемник>
				<Свойства>
					<Свойство Поиск="true">
						<Код>1</Код>
						<Наименование>Код --&gt; Код</Наименование>
						<Порядок>50</Порядок>
						<Источник Имя="Код" Вид="Свойство" Тип="Строка"/>
						<Приемник Имя="Код" Вид="Свойство" Тип="Строка"/>
					</Свойство>
					<Свойство>
						<Код>2</Код>
						<Наименование>Наименование --&gt; Наименование</Наименование>
						<Порядок>100</Порядок>
						<Источник Имя="Наименование" Вид="Свойство" Тип="Строка"/>
						<Приемник Имя="Наименование" Вид="Свойство" Тип="Строка"/>
					</Свойство>
					<Свойство>
						<Код>3</Код>
						<Наименование>НаименованиеПолное --&gt; НаименованиеПолное</Наименование>
						<Порядок>150</Порядок>
						<Источник Имя="НаименованиеПолное" Вид="Реквизит" Тип="Строка"/>
						<Приемник Имя="НаименованиеПолное" Вид="Реквизит" Тип="Строка"/>
					</Свойство>
					<Свойство>
						<Код>4</Код>
						<Наименование>ПометкаУдаления --&gt; ПометкаУдаления</Наименование>
						<Порядок>200</Порядок>
						<Источник Имя="ПометкаУдаления" Вид="Свойство" Тип="Булево"/>
						<Приемник Имя="ПометкаУдаления" Вид="Свойство" Тип="Булево"/>
					</Свойство>
				</Свойства>
				<Значения/>
			</Правило>
			<Правило>
				<Код>Валюты</Код>
				<Наименование>Справочник: Валюты</Наименование>
				<Порядок>250</Порядок>
				<НеЗамещать>true</НеЗамещать>
				<Источник>СправочникСсылка.Валюты</Источник>
				<Приемник>СправочникСсылка.Валюты</Приемник>
				<Свойства>
					<Свойство Поиск="true">
						<Код>1</Код>
						<Наименование>Код --&gt; Код</Наименование>
						<Порядок>50</Порядок>
						<Источник Имя="Код" Вид="Свойство" Тип="Строка"/>
						<Приемник Имя="Код" Вид="Свойство" Тип="Строка"/>
					</Свойство>
					<Свойство>
						<Код>2</Код>
						<Наименование>Наименование --&gt; Наименование</Наименование>
						<Порядок>100</Порядок>
						<Источник Имя="Наименование" Вид="Свойство" Тип="Строка"/>
						<Приемник Имя="Наименование" Вид="Свойство" Тип="Строка"/>
					</Свойство>
				</Свойства>
				<Значения/>
			</Правило>
			<Правило>
				<Код>Контрагенты</Код>
				<Наименование>Справочник: Контрагенты и контакты</Наименование>
				<Порядок>300</Порядок>
				<ПослеЗагрузки>Объект.СтранаРегистрации = Справочники.СтраныМира.НайтиПоНаименованию("РОССИЯ", Истина);
Если Не Объект.ЭтоГруппа Тогда	
	Если Найти(Объект.Комментарий, "#Поставщик#") &gt; 0 Тогда
		ГруппаПоставщиков = Справочники.Контрагенты.НайтиПоКоду(Параметры.КодГруппыПоставщиков);
		Если Не ГруппаПоставщиков.Пустая() И ГруппаПоставщиков.ЭтоГруппа Тогда
			Объект.Родитель = ГруппаПоставщиков;
		КонецЕсли;			
	Иначе	
		ГруппаПокупателей = Справочники.Контрагенты.НайтиПоКоду(Параметры.КодГруппыПокупателей);
		Если Не ГруппаПокупателей.Пустая() И ГруппаПокупателей.ЭтоГруппа Тогда
			Объект.Родитель = ГруппаПокупателей;
		КонецЕсли;				
	КонецЕсли;
	Объект.Комментарий = СтрЗаменить(Объект.Комментарий, "#Поставщик#", "");
	Объект.Комментарий = СтрЗаменить(Объект.Комментарий, "#Покупатель#", "");  	
КонецЕсли;</ПослеЗагрузки>
				<ПоследовательностьПолейПоиска>Если НомерВариантаПоиска  = 1 Тогда
	ИНН = СвойстваПоиска.Получить("ИНН");
	Если ЗначениеЗаполнено(ИНН) Тогда
		СтрокаИменСвойствПоиска = "ИНН"; 
	Иначе
		СтрокаИменСвойствПоиска = "Наименование"; 
	КонецЕсли;	
	//СсылкаНаОбъект = Неопределено;
	//ПрекратитьПоиск  = Истина;	
КонецЕсли;</ПоследовательностьПолейПоиска>
				<НеСоздаватьЕслиНеНайден>true</НеСоздаватьЕслиНеНайден>
				<Источник>СправочникСсылка.Контрагенты</Источник>
				<Приемник>СправочникСсылка.Контрагенты</Приемник>
				<Свойства>
					<Свойство>
						<Код>1</Код>
						<Наименование>Код --&gt; Код</Наименование>
						<Порядок>50</Порядок>
						<Источник Имя="Код" Вид="Свойство" Тип="Строка"/>
						<Приемник Имя="Код" Вид="Свойство" Тип="Строка"/>
					</Свойство>
					<Свойство Отключить="true">
						<Код>2</Код>
						<Наименование>Наименование --&gt; Наименование</Наименование>
						<Порядок>100</Порядок>
						<Источник Имя="Наименование" Вид="Свойство" Тип="Строка"/>
						<Приемник Имя="Наименование" Вид="Свойство" Тип="Строка"/>
					</Свойство>
					<Свойство Отключить="true">
						<Код>3</Код>
						<Наименование>--&gt; Родитель</Наименование>
						<Порядок>150</Порядок>
						<Источник Имя="" Вид=""/>
						<Приемник Имя="Родитель" Вид="Свойство" Тип="СправочникСсылка.Контрагенты"/>
						<КодПравилаКонвертации>КонтрагентыПоКоду                                 </КодПравилаКонвертации>
						<ПередВыгрузкой>Если Источник.ВидКонтрагента = Перечисления.ВидыКонтрагентов.Поставщик Тогда
	Значение = Параметры.КодГруппыПоставщиков;
Иначе	
	Значение = Параметры.КодГруппыПокупателей;
КонецЕсли;</ПередВыгрузкой>
					</Свойство>
					<Свойство Обязательное="true">
						<Код>4</Код>
						<Наименование>ЭтоГруппа --&gt; ЭтоГруппа</Наименование>
						<Порядок>200</Порядок>
						<Источник Имя="ЭтоГруппа" Вид="Свойство" Тип="Булево"/>
						<Приемник Имя="ЭтоГруппа" Вид="Свойство" Тип="Булево"/>
					</Свойство>
					<Свойство Поиск="true">
						<Код>5</Код>
						<Наименование>ИНН --&gt; ИНН</Наименование>
						<Порядок>250</Порядок>
						<Источник Имя="ИНН" Вид="Реквизит" Тип="Строка"/>
						<Приемник Имя="ИНН" Вид="Реквизит" Тип="Строка"/>
					</Свойство>
					<Свойство Отключить="true">
						<Код>6</Код>
						<Наименование>КодПоОКПО --&gt; КодПоОКПО</Наименование>
						<Порядок>300</Порядок>
						<Источник Имя="КодПоОКПО" Вид="Реквизит" Тип="Строка"/>
						<Приемник Имя="КодПоОКПО" Вид="Реквизит" Тип="Строка"/>
					</Свойство>
					<Свойство>
						<Код>7</Код>
						<Наименование>--&gt; Комментарий</Наименование>
						<Порядок>350</Порядок>
						<Источник Имя="" Вид=""/>
						<Приемник Имя="Комментарий" Вид="Реквизит" Тип="Строка"/>
						<ПередВыгрузкой>ТекстКомментария = Источник.Наименование + " Тип:"+ ?(Источник.ВидКонтрагента = Перечисления.ВидыКонтрагентов.Поставщик, "Поставщик", "Покупатель");
Значение = Источник.Комментарий + "# " + ТекстКомментария + "#";</ПередВыгрузкой>
					</Свойство>
					<Свойство Отключить="true">
						<Код>8</Код>
						<Наименование>КПП --&gt; КПП</Наименование>
						<Порядок>400</Порядок>
						<Источник Имя="КПП" Вид="Реквизит" Тип="Строка"/>
						<Приемник Имя="КПП" Вид="Реквизит" Тип="Строка"/>
					</Свойство>
					<Свойство Отключить="true">
						<Код>9</Код>
						<Наименование>НаименованиеПолное --&gt; НаименованиеПолное</Наименование>
						<Порядок>450</Порядок>
						<Источник Имя="НаименованиеПолное" Вид="Реквизит" Тип="Строка"/>
						<Приемник Имя="НаименованиеПолное" Вид="Реквизит" Тип="Строка"/>
					</Свойство>
					<Свойство Отключить="true">
						<Код>10</Код>
						<Наименование>ОсновнойБанковскийСчет --&gt; ОсновнойБанковскийСчет</Наименование>
						<Порядок>500</Порядок>
						<Источник Имя="ОсновнойБанковскийСчет" Вид="Реквизит" Тип="СправочникСсылка.БанковскиеСчета"/>
						<Приемник Имя="ОсновнойБанковскийСчет" Вид="Реквизит" Тип="СправочникСсылка.БанковскиеСчета"/>
						<КодПравилаКонвертации>БанковскиеСчета                                   </КодПравилаКонвертации>
					</Свойство>
					<Свойство Отключить="true">
						<Код>11</Код>
						<Наименование>ПометкаУдаления --&gt; ПометкаУдаления</Наименование>
						<Порядок>550</Порядок>
						<Источник Имя="ПометкаУдаления" Вид="Свойство" Тип="Булево"/>
						<Приемник Имя="ПометкаУдаления" Вид="Свойство" Тип="Булево"/>
					</Свойство>
					<Свойство Отключить="true">
						<Код>12</Код>
						<Наименование>--&gt; ГоловнойКонтрагент</Наименование>
						<Порядок>600</Порядок>
						<Источник Имя="" Вид=""/>
						<Приемник Имя="ГоловнойКонтрагент" Вид="Реквизит" Тип="СправочникСсылка.Контрагенты"/>
						<КодПравилаКонвертации>Контрагенты                                       </КодПравилаКонвертации>
						<ПередВыгрузкой>Значение = Источник</ПередВыгрузкой>
					</Свойство>
					<Свойство Отключить="true">
						<Код>13</Код>
						<Наименование>ДатаРегистрации --&gt; ДатаРегистрации</Наименование>
						<Порядок>650</Порядок>
						<Источник Имя="ДатаРегистрации" Вид="Реквизит" Тип="Дата"/>
						<Приемник Имя="ДатаРегистрации" Вид="Реквизит" Тип="Дата"/>
					</Свойство>
					<Свойство>
						<Код>14</Код>
						<Наименование>--&gt; ЮридическоеФизическоеЛицо</Наименование>
						<Порядок>700</Порядок>
						<Источник Имя="" Вид=""/>
						<Приемник Имя="ЮридическоеФизическоеЛицо" Вид="Реквизит" Тип="ПеречислениеСсылка.ЮридическоеФизическоеЛицо"/>
						<ПередВыгрузкой>ИНН = Источник.ИНН;
ДлинаИНН = СтрДлина(СокрЛП(ИНН));
Если ДлинаИНН = 10 ИЛИ ДлинаИНН = 0 Тогда
	Значение = "ЮридическоеЛицо";
Иначе	
	Значение = "ФизическоеЛицо";
КонецЕсли;</ПередВыгрузкой>
					</Свойство>
					<Свойство Отключить="true">
						<Код>15</Код>
						<Наименование>--&gt; СтранаРегистрации</Наименование>
						<Порядок>750</Порядок>
						<Источник Имя="" Вид=""/>
						<Приемник Имя="СтранаРегистрации" Вид="Реквизит" Тип="СправочникСсылка.СтраныМира"/>
						<ПередВыгрузкой>Значение = "РОССИЯ";</ПередВыгрузкой>
					</Свойство>
				</Свойства>
				<Значения/>
			</Правило>
			<Правило>
				<Код>Организации</Код>
				<Наименование>Справочник: Организации</Наименование>
				<Порядок>350</Порядок>
				<НеСоздаватьЕслиНеНайден>true</НеСоздаватьЕслиНеНайден>
				<Источник>СправочникСсылка.Организации</Источник>
				<Приемник>СправочникСсылка.Организации</Приемник>
				<Свойства>
					<Свойство>
						<Код>1</Код>
						<Наименование>Код --&gt; Код</Наименование>
						<Порядок>50</Порядок>
						<Источник Имя="Код" Вид="Свойство" Тип="Строка"/>
						<Приемник Имя="Код" Вид="Свойство" Тип="Строка"/>
					</Свойство>
					<Свойство>
						<Код>2</Код>
						<Наименование>Наименование --&gt; Наименование</Наименование>
						<Порядок>100</Порядок>
						<Источник Имя="Наименование" Вид="Свойство" Тип="Строка"/>
						<Приемник Имя="Наименование" Вид="Свойство" Тип="Строка"/>
					</Свойство>
					<Свойство Поиск="true">
						<Код>3</Код>
						<Наименование>ИНН --&gt; ИНН</Наименование>
						<Порядок>150</Порядок>
						<Источник Имя="ИНН" Вид="Реквизит" Тип="Строка"/>
						<Приемник Имя="ИНН" Вид="Реквизит" Тип="Строка"/>
					</Свойство>
				</Свойства>
				<Значения/>
			</Правило>
			<Правило>
				<Код>БанковскиеСчета</Код>
				<Наименование>Справочник: Банковские счета</Наименование>
				<Порядок>400</Порядок>
				<НеЗамещать>true</НеЗамещать>
				<Источник>СправочникСсылка.БанковскиеСчета</Источник>
				<Приемник>СправочникСсылка.БанковскиеСчета</Приемник>
				<Свойства>
					<Свойство>
						<Код>1</Код>
						<Наименование>Банк --&gt; Банк</Наименование>
						<Порядок>50</Порядок>
						<Источник Имя="Банк" Вид="Реквизит" Тип="СправочникСсылка.Банки"/>
						<Приемник Имя="Банк" Вид="Реквизит" Тип="СправочникСсылка.Банки"/>
						<КодПравилаКонвертации>Банки                                             </КодПравилаКонвертации>
					</Свойство>
					<Свойство>
						<Код>2</Код>
						<Наименование>БанкДляРасчетов --&gt; БанкДляРасчетов</Наименование>
						<Порядок>100</Порядок>
						<Источник Имя="БанкДляРасчетов" Вид="Реквизит" Тип="СправочникСсылка.Банки"/>
						<Приемник Имя="БанкДляРасчетов" Вид="Реквизит" Тип="СправочникСсылка.Банки"/>
						<КодПравилаКонвертации>Банки                                             </КодПравилаКонвертации>
					</Свойство>
					<Свойство>
						<Код>3</Код>
						<Наименование>ВалютаДенежныхСредств --&gt; ВалютаДенежныхСредств</Наименование>
						<Порядок>150</Порядок>
						<Источник Имя="ВалютаДенежныхСредств" Вид="Реквизит" Тип="СправочникСсылка.Валюты"/>
						<Приемник Имя="ВалютаДенежныхСредств" Вид="Реквизит" Тип="СправочникСсылка.Валюты"/>
						<КодПравилаКонвертации>Валюты                                            </КодПравилаКонвертации>
					</Свойство>
					<Свойство>
						<Код>4</Код>
						<Наименование>ВидСчета --&gt; ВидСчета</Наименование>
						<Порядок>200</Порядок>
						<Источник Имя="ВидСчета" Вид="Реквизит" Тип="Строка"/>
						<Приемник Имя="ВидСчета" Вид="Реквизит" Тип="Строка"/>
					</Свойство>
					<Свойство Поиск="true">
						<Код>5</Код>
						<Наименование>Владелец --&gt; Владелец</Наименование>
						<Порядок>250</Порядок>
						<Источник Имя="Владелец" Вид="Свойство"/>
						<Приемник Имя="Владелец" Вид="Свойство"/>
						<ПередВыгрузкой>Если ТипЗнч(Источник.Владелец) = Тип("СправочникСсылка.Организации") Тогда
	ИмяПКО = "Организации";
Иначе	
	ИмяПКО = "Контрагенты";
КонецЕсли;</ПередВыгрузкой>
					</Свойство>
					<Свойство>
						<Код>6</Код>
						<Наименование>ДатаЗакрытия --&gt; ДатаЗакрытия</Наименование>
						<Порядок>300</Порядок>
						<Источник Имя="ДатаЗакрытия" Вид="Реквизит" Тип="Дата"/>
						<Приемник Имя="ДатаЗакрытия" Вид="Реквизит" Тип="Дата"/>
					</Свойство>
					<Свойство>
						<Код>7</Код>
						<Наименование>ДатаОткрытия --&gt; ДатаОткрытия</Наименование>
						<Порядок>350</Порядок>
						<Источник Имя="ДатаОткрытия" Вид="Реквизит" Тип="Дата"/>
						<Приемник Имя="ДатаОткрытия" Вид="Реквизит" Тип="Дата"/>
					</Свойство>
					<Свойство>
						<Код>8</Код>
						<Наименование>Код --&gt; Код</Наименование>
						<Порядок>400</Порядок>
						<Источник Имя="Код" Вид="Свойство" Тип="Строка"/>
						<Приемник Имя="Код" Вид="Свойство" Тип="Строка"/>
					</Свойство>
					<Свойство>
						<Код>9</Код>
						<Наименование>МесяцПрописью --&gt; МесяцПрописью</Наименование>
						<Порядок>450</Порядок>
						<Источник Имя="МесяцПрописью" Вид="Реквизит" Тип="Булево"/>
						<Приемник Имя="МесяцПрописью" Вид="Реквизит" Тип="Булево"/>
					</Свойство>
					<Свойство>
						<Код>10</Код>
						<Наименование>Наименование --&gt; Наименование</Наименование>
						<Порядок>500</Порядок>
						<Источник Имя="Наименование" Вид="Свойство" Тип="Строка"/>
						<Приемник Имя="Наименование" Вид="Свойство" Тип="Строка"/>
					</Свойство>
					<Свойство>
						<Код>11</Код>
						<Наименование>НомерИДатаРазрешения --&gt; НомерИДатаРазрешения</Наименование>
						<Порядок>550</Порядок>
						<Источник Имя="НомерИДатаРазрешения" Вид="Реквизит" Тип="Строка"/>
						<Приемник Имя="НомерИДатаРазрешения" Вид="Реквизит" Тип="Строка"/>
					</Свойство>
					<Свойство Поиск="true">
						<Код>12</Код>
						<Наименование>НомерСчета --&gt; НомерСчета</Наименование>
						<Порядок>600</Порядок>
						<Источник Имя="НомерСчета" Вид="Реквизит" Тип="Строка"/>
						<Приемник Имя="НомерСчета" Вид="Реквизит" Тип="Строка"/>
					</Свойство>
					<Свойство>
						<Код>13</Код>
						<Наименование>ПометкаУдаления --&gt; ПометкаУдаления</Наименование>
						<Порядок>650</Порядок>
						<Источник Имя="ПометкаУдаления" Вид="Свойство" Тип="Булево"/>
						<Приемник Имя="ПометкаУдаления" Вид="Свойство" Тип="Булево"/>
					</Свойство>
					<Свойство>
						<Код>14</Код>
						<Наименование>СуммаБезКопеек --&gt; СуммаБезКопеек</Наименование>
						<Порядок>700</Порядок>
						<Источник Имя="СуммаБезКопеек" Вид="Реквизит" Тип="Булево"/>
						<Приемник Имя="СуммаБезКопеек" Вид="Реквизит" Тип="Булево"/>
					</Свойство>
				</Свойства>
				<Значения/>
			</Правило>
			<Правило>
				<Код>Банки</Код>
				<Наименование>Справочник: Банки</Наименование>
				<Порядок>450</Порядок>
				<НеЗамещать>true</НеЗамещать>
				<Источник>СправочникСсылка.Банки</Источник>
				<Приемник>СправочникСсылка.Банки</Приемник>
				<Свойства>
					<Свойство>
						<Код>1</Код>
						<Наименование>Адрес --&gt; Адрес</Наименование>
						<Порядок>50</Порядок>
						<Источник Имя="Адрес" Вид="Реквизит" Тип="Строка"/>
						<Приемник Имя="Адрес" Вид="Реквизит" Тип="Строка"/>
					</Свойство>
					<Свойство>
						<Код>2</Код>
						<Наименование>Город --&gt; Город</Наименование>
						<Порядок>100</Порядок>
						<Источник Имя="Город" Вид="Реквизит" Тип="Строка"/>
						<Приемник Имя="Город" Вид="Реквизит" Тип="Строка"/>
					</Свойство>
					<Свойство Поиск="true">
						<Код>3</Код>
						<Наименование>Код --&gt; Код</Наименование>
						<Порядок>150</Порядок>
						<Источник Имя="Код" Вид="Свойство" Тип="Строка"/>
						<Приемник Имя="Код" Вид="Свойство" Тип="Строка"/>
					</Свойство>
					<Свойство>
						<Код>4</Код>
						<Наименование>КоррСчет --&gt; КоррСчет</Наименование>
						<Порядок>200</Порядок>
						<Источник Имя="КоррСчет" Вид="Реквизит" Тип="Строка"/>
						<Приемник Имя="КоррСчет" Вид="Реквизит" Тип="Строка"/>
					</Свойство>
					<Свойство>
						<Код>5</Код>
						<Наименование>Наименование --&gt; Наименование</Наименование>
						<Порядок>250</Порядок>
						<Источник Имя="Наименование" Вид="Свойство" Тип="Строка"/>
						<Приемник Имя="Наименование" Вид="Свойство" Тип="Строка"/>
					</Свойство>
					<Свойство>
						<Код>6</Код>
						<Наименование>ПометкаУдаления --&gt; ПометкаУдаления</Наименование>
						<Порядок>300</Порядок>
						<Источник Имя="ПометкаУдаления" Вид="Свойство" Тип="Булево"/>
						<Приемник Имя="ПометкаУдаления" Вид="Свойство" Тип="Булево"/>
					</Свойство>
					<Свойство>
						<Код>7</Код>
						<Наименование>Родитель --&gt; Родитель</Наименование>
						<Порядок>350</Порядок>
						<Источник Имя="Родитель" Вид="Свойство" Тип="СправочникСсылка.Банки"/>
						<Приемник Имя="Родитель" Вид="Свойство" Тип="СправочникСсылка.Банки"/>
						<КодПравилаКонвертации>Банки                                             </КодПравилаКонвертации>
					</Свойство>
					<Свойство>
						<Код>8</Код>
						<Наименование>Телефоны --&gt; Телефоны</Наименование>
						<Порядок>400</Порядок>
						<Источник Имя="Телефоны" Вид="Реквизит" Тип="Строка"/>
						<Приемник Имя="Телефоны" Вид="Реквизит" Тип="Строка"/>
					</Свойство>
					<Свойство Обязательное="true">
						<Код>9</Код>
						<Наименование>ЭтоГруппа --&gt; ЭтоГруппа</Наименование>
						<Порядок>450</Порядок>
						<Источник Имя="ЭтоГруппа" Вид="Свойство" Тип="Булево"/>
						<Приемник Имя="ЭтоГруппа" Вид="Свойство" Тип="Булево"/>
					</Свойство>
				</Свойства>
				<Значения/>
			</Правило>
			<Правило>
				<Код>КонтрагентыПоКоду</Код>
				<Наименование>:</Наименование>
				<Порядок>500</Порядок>
				<НеСоздаватьЕслиНеНайден>true</НеСоздаватьЕслиНеНайден>
				<Приемник>СправочникСсылка.Контрагенты</Приемник>
				<Свойства>
					<Свойство Поиск="true">
						<Код>1</Код>
						<Наименование>--&gt; Код</Наименование>
						<Порядок>50</Порядок>
						<Источник Имя="" Вид=""/>
						<Приемник Имя="Код" Вид="Свойство" Тип="Строка"/>
						<ПередВыгрузкой>Значение = Источник</ПередВыгрузкой>
					</Свойство>
					<Свойство Поиск="true" Обязательное="true">
						<Код>2</Код>
						<Наименование>--&gt; ЭтоГруппа</Наименование>
						<Порядок>100</Порядок>
						<Источник Имя="" Вид=""/>
						<Приемник Имя="ЭтоГруппа" Вид="Свойство" Тип="Булево"/>
						<ПередВыгрузкой>Значение = Истина;</ПередВыгрузкой>
					</Свойство>
				</Свойства>
				<Значения/>
			</Правило>
			<Правило>
				<Код>НоменклатураПоКоду</Код>
				<Наименование>:</Наименование>
				<Порядок>550</Порядок>
				<НеЗамещать>true</НеЗамещать>
				<Приемник>СправочникСсылка.Номенклатура</Приемник>
				<Свойства>
					<Свойство Поиск="true">
						<Код>1</Код>
						<Наименование>--&gt; Код</Наименование>
						<Порядок>50</Порядок>
						<Источник Имя="" Вид=""/>
						<Приемник Имя="Код" Вид="Свойство" Тип="Строка"/>
						<ПередВыгрузкой>Значение = Источник</ПередВыгрузкой>
					</Свойство>
					<Свойство Поиск="true" Обязательное="true">
						<Код>2</Код>
						<Наименование>--&gt; ЭтоГруппа</Наименование>
						<Порядок>100</Порядок>
						<Источник Имя="" Вид=""/>
						<Приемник Имя="ЭтоГруппа" Вид="Свойство" Тип="Булево"/>
						<ПередВыгрузкой>Значение = Истина</ПередВыгрузкой>
					</Свойство>
				</Свойства>
				<Значения/>
			</Правило>
			<Правило>
				<Код>Автоработы</Код>
				<Наименование>Справочник: Автоработы</Наименование>
				<Порядок>600</Порядок>
				<ПослеЗагрузки>Объект.ВидНоменклатуры = Справочники.ВидыНоменклатуры.НайтиПоНаименованию("Услуги ЕНВД");
ГруппаНоменклатуры = Справочники.Номенклатура.НайтиПоКоду(Параметры.КодГруппыУслуг);
Если ГруппаНоменклатуры.ЭтоГруппа Тогда
	Объект.Родитель = ГруппаНоменклатуры;
Иначе	
	Объект.Родитель = Справочники.Номенклатура.ПустаяСсылка();
КонецЕсли;
НомГруппаУслуги = Справочники.НоменклатурныеГруппы.НайтиПоКоду(Параметры.КодНоменклатурнойГруппыУслуги);
Если Не НомГруппаУслуги.Пустая() Тогда
	Объект.НоменклатурнаяГруппа = НомГруппаУслуги;
КонецЕсли;</ПослеЗагрузки>
				<ПоследовательностьПолейПоиска>
Артикул = СвойстваПоиска.Получить("Артикул");
Если НомерВариантаПоиска  = 1 Тогда
	РодительСсылка = Справочники.Номенклатура.НайтиПоКоду(Параметры.КодГруппыУслуг);
	СсылкаНаОбъект = Справочники.Номенклатура.НайтиПоРеквизиту("Артикул", Артикул, РодительСсылка);
	Если СсылкаНаОбъект.Пустая() Тогда
		СсылкаНаОбъект = Неопределено;
	КонецЕсли;
	ПрекратитьПоиск = Истина;
КонецЕсли;</ПоследовательностьПолейПоиска>
				<ГенерироватьНовыйНомерИлиКодЕслиНеУказан>true</ГенерироватьНовыйНомерИлиКодЕслиНеУказан>
				<Источник>СправочникСсылка.Автоработы</Источник>
				<Приемник>СправочникСсылка.Номенклатура</Приемник>
				<Свойства>
					<Свойство>
						<Код>2</Код>
						<Наименование>Комментарий --&gt; Комментарий</Наименование>
						<Порядок>100</Порядок>
						<Источник Имя="Комментарий" Вид="Реквизит" Тип="Строка"/>
						<Приемник Имя="Комментарий" Вид="Реквизит" Тип="Строка"/>
					</Свойство>
					<Свойство>
						<Код>3</Код>
						<Наименование>--&gt; НаименованиеПолное</Наименование>
						<Порядок>150</Порядок>
						<Источник Имя="" Вид=""/>
						<Приемник Имя="НаименованиеПолное" Вид="Реквизит" Тип="Строка"/>
						<ПередВыгрузкой>Если ПустаяСтрока(Источник.НаименованиеПолное) Тогда
	Значение = Источник.Наименование;
Иначе
	Значение = Источник.НаименованиеПолное;
КонецЕсли;</ПередВыгрузкой>
					</Свойство>
					<Свойство Поиск="true">
						<Код>4</Код>
						<Наименование>Код --&gt; Артикул</Наименование>
						<Порядок>200</Порядок>
						<Источник Имя="Код" Вид="Свойство" Тип="Строка"/>
						<Приемник Имя="Артикул" Вид="Реквизит" Тип="Строка"/>
					</Свойство>
					<Свойство>
						<Код>5</Код>
						<Наименование>Наименование --&gt; Наименование</Наименование>
						<Порядок>250</Порядок>
						<Источник Имя="Наименование" Вид="Свойство" Тип="Строка"/>
						<Приемник Имя="Наименование" Вид="Свойство" Тип="Строка"/>
					</Свойство>
					<Свойство>
						<Код>6</Код>
						<Наименование>ПометкаУдаления --&gt; ПометкаУдаления</Наименование>
						<Порядок>300</Порядок>
						<Источник Имя="ПометкаУдаления" Вид="Свойство" Тип="Булево"/>
						<Приемник Имя="ПометкаУдаления" Вид="Свойство" Тип="Булево"/>
					</Свойство>
					<Свойство Поиск="true" Обязательное="true">
						<Код>7</Код>
						<Наименование>ЭтоГруппа --&gt; ЭтоГруппа</Наименование>
						<Порядок>350</Порядок>
						<Источник Имя="ЭтоГруппа" Вид="Свойство" Тип="Булево"/>
						<Приемник Имя="ЭтоГруппа" Вид="Свойство" Тип="Булево"/>
					</Свойство>
					<Свойство>
						<Код>8</Код>
						<Наименование>--&gt; Услуга</Наименование>
						<Порядок>400</Порядок>
						<Источник Имя="" Вид=""/>
						<Приемник Имя="Услуга" Вид="Реквизит" Тип="Булево"/>
						<ПередВыгрузкой>Значение = Истина;</ПередВыгрузкой>
					</Свойство>
					<Свойство Отключить="true">
						<Код>9</Код>
						<Наименование>--&gt; Родитель</Наименование>
						<Порядок>450</Порядок>
						<Источник Имя="" Вид=""/>
						<Приемник Имя="Родитель" Вид="Свойство" Тип="СправочникСсылка.Номенклатура"/>
						<КодПравилаКонвертации>НоменклатураПоКоду                                </КодПравилаКонвертации>
						<ПередВыгрузкой>Значение = Параметры.КодГруппыУслуг</ПередВыгрузкой>
					</Свойство>
					<Свойство>
						<Код>10</Код>
						<Наименование>--&gt; ВидНоменклатуры</Наименование>
						<Порядок>500</Порядок>
						<Источник Имя="" Вид=""/>
						<Приемник Имя="ВидНоменклатуры" Вид="Реквизит" Тип="СправочникСсылка.ВидыНоменклатуры"/>
						<ПередВыгрузкой>Значение = "Услуги";</ПередВыгрузкой>
					</Свойство>
				</Свойства>
				<Значения/>
			</Правило>
			<Правило>
				<Код>КлассификаторЕдиницИзмеренияПоНаменованию</Код>
				<Наименование>:</Наименование>
				<Порядок>650</Порядок>
				<ГенерироватьНовыйНомерИлиКодЕслиНеУказан>true</ГенерироватьНовыйНомерИлиКодЕслиНеУказан>
				<Приемник>СправочникСсылка.КлассификаторЕдиницИзмерения</Приемник>
				<Свойства>
					<Свойство Поиск="true">
						<Код>1</Код>
						<Наименование>--&gt; Наименование</Наименование>
						<Порядок>50</Порядок>
						<Источник Имя="" Вид=""/>
						<Приемник Имя="Наименование" Вид="Свойство" Тип="Строка"/>
						<ПередВыгрузкой>Значение = Источник;</ПередВыгрузкой>
					</Свойство>
				</Свойства>
				<Значения/>
			</Правило>
			<Правило>
				<Код>НоменклатураУслуги</Код>
				<Наименование>:</Наименование>
				<Порядок>700</Порядок>
				<Приемник>СправочникСсылка.Номенклатура</Приемник>
				<Свойства>
					<Свойство Поиск="true">
						<Код>1</Код>
						<Наименование>--&gt; Код</Наименование>
						<Порядок>50</Порядок>
						<Источник Имя="" Вид=""/>
						<Приемник Имя="Код" Вид="Свойство" Тип="Строка"/>
						<ПередВыгрузкой>Значение = Параметры.КодГруппыУслуг;</ПередВыгрузкой>
					</Свойство>
					<Свойство Поиск="true" Обязательное="true">
						<Код>2</Код>
						<Наименование>--&gt; ЭтоГруппа</Наименование>
						<Порядок>100</Порядок>
						<Источник Имя="" Вид=""/>
						<Приемник Имя="ЭтоГруппа" Вид="Свойство" Тип="Булево"/>
						<ПередВыгрузкой>Значение = Истина</ПередВыгрузкой>
					</Свойство>
				</Свойства>
				<Значения/>
			</Правило>
			<Правило>
				<Код>КлассификатСтранМира</Код>
				<Наименование>Справочник: КлассификаторСтранМира</Наименование>
				<Порядок>750</Порядок>
				<СинхронизироватьПоИдентификатору>true</СинхронизироватьПоИдентификатору>
				<Источник>СправочникСсылка.КлассификаторСтранМира</Источник>
				<Приемник>СправочникСсылка.СтраныМира</Приемник>
				<Свойства>
					<Свойство Поиск="true">
						<Код>1</Код>
						<Наименование>Код --&gt; Код</Наименование>
						<Порядок>50</Порядок>
						<Источник Имя="Код" Вид="Свойство" Тип="Строка"/>
						<Приемник Имя="Код" Вид="Свойство" Тип="Строка"/>
					</Свойство>
					<Свойство>
						<Код>2</Код>
						<Наименование>Наименование --&gt; Наименование</Наименование>
						<Порядок>100</Порядок>
						<Источник Имя="Наименование" Вид="Свойство" Тип="Строка"/>
						<Приемник Имя="Наименование" Вид="Свойство" Тип="Строка"/>
					</Свойство>
					<Свойство>
						<Код>3</Код>
						<Наименование>НаименованиеПолное --&gt; НаименованиеПолное</Наименование>
						<Порядок>150</Порядок>
						<Источник Имя="НаименованиеПолное" Вид="Реквизит" Тип="Строка"/>
						<Приемник Имя="НаименованиеПолное" Вид="Реквизит" Тип="Строка"/>
					</Свойство>
					<Свойство>
						<Код>4</Код>
						<Наименование>ПометкаУдаления --&gt; ПометкаУдаления</Наименование>
						<Порядок>200</Порядок>
						<Источник Имя="ПометкаУдаления" Вид="Свойство" Тип="Булево"/>
						<Приемник Имя="ПометкаУдаления" Вид="Свойство" Тип="Булево"/>
					</Свойство>
				</Свойства>
				<Значения/>
			</Правило>
		</Группа>
		<Группа>
			<Код>Документы</Код>
			<Наименование>Документы</Наименование>
			<Порядок>100</Порядок>
			<Правило>
				<Код>ОтчетОРозничныхПродажах</Код>
				<Наименование>:</Наименование>
				<Порядок>150</Порядок>
				<ПередЗагрузкой>РежимЗаписи  = "Запись";</ПередЗагрузкой>
				<ПриЗагрузке>РежимЗаписи  = "Запись";</ПриЗагрузке>
				<ПослеЗагрузки>Если Найти(Объект.Комментарий,"Товары НДС#") = 0 И Найти(Объект.Комментарий,"Возвраты НДС#") = 0 Тогда
	Объект.Склад = Справочники.Склады.НайтиПоКоду(Параметры.КодОсновногоСклада);
	Объект.ДокументБезНДС = Истина;
Иначе
	Объект.Склад = Справочники.Склады.НайтиПоКоду(Параметры.кодСкладаКомиссия);
	Объект.ДокументБезНДС = Ложь;
КонецЕсли;

Объект.ДополнительныеСвойства.Вставить("ЗаполнитьСчетаУчетаПередЗаписью", Истина);
СчетаУчетаВДокументах.ЗаполнитьПередЗаписью(Объект, РежимЗаписиДокумента.Запись);</ПослеЗагрузки>
				<ГенерироватьНовыйНомерИлиКодЕслиНеУказан>true</ГенерироватьНовыйНомерИлиКодЕслиНеУказан>
				<Приемник>ДокументСсылка.ОтчетОРозничныхПродажах</Приемник>
				<Свойства>
					<Группа>
						<Код>23</Код>
						<Наименование>--&gt; Товары</Наименование>
						<Порядок>50</Порядок>
						<ПолучитьИзВходящихДанных>true</ПолучитьИзВходящихДанных>
						<Источник Имя="" Вид=""/>
						<Приемник Имя="Товары" Вид="ТабличнаяЧасть"/>
						<Свойство>
							<Код>25</Код>
							<Наименование>--&gt; Количество</Наименование>
							<Порядок>100</Порядок>
							<Источник Имя="" Вид=""/>
							<Приемник Имя="Количество" Вид="Реквизит" Тип="Число"/>
						</Свойство>
						<Свойство>
							<Код>26</Код>
							<Наименование>--&gt; Номенклатура</Наименование>
							<Порядок>150</Порядок>
							<Источник Имя="" Вид=""/>
							<Приемник Имя="Номенклатура" Вид="Реквизит" Тип="СправочникСсылка.Номенклатура"/>
							<ПередВыгрузкой>Если ТипЗнч(ОбъектКоллекции.Номенклатура) = Тип("СправочникСсылка.Номенклатура") Тогда
	ИмяПКО = "Номенклатура";
ИначеЕсли ТипЗнч(ОбъектКоллекции.Номенклатура) = Тип("СправочникСсылка.Автоработы") Тогда	
	ИмяПКО = "Автоработы";
КонецЕсли;</ПередВыгрузкой>
						</Свойство>
						<Свойство>
							<Код>29</Код>
							<Наименование>--&gt; СтавкаНДС</Наименование>
							<Порядок>300</Порядок>
							<Источник Имя="" Вид=""/>
							<Приемник Имя="СтавкаНДС" Вид="Реквизит" Тип="ПеречислениеСсылка.СтавкиНДС"/>
							<ПередВыгрузкой>Значение = "НДС20";</ПередВыгрузкой>
						</Свойство>
						<Свойство>
							<Код>32</Код>
							<Наименование>--&gt; Сумма</Наименование>
							<Порядок>450</Порядок>
							<Источник Имя="" Вид=""/>
							<Приемник Имя="Сумма" Вид="Реквизит" Тип="Число"/>
						</Свойство>
						<Свойство>
							<Код>38</Код>
							<Наименование>--&gt; Цена</Наименование>
							<Порядок>750</Порядок>
							<Источник Имя="" Вид=""/>
							<Приемник Имя="Цена" Вид="Реквизит" Тип="Число"/>
						</Свойство>
						<Свойство>
							<Код>39</Код>
							<Наименование>--&gt; СуммаНДС</Наименование>
							<Порядок>800</Порядок>
							<Источник Имя="" Вид=""/>
							<Приемник Имя="СуммаНДС" Вид="Реквизит" Тип="Число"/>
						</Свойство>
					</Группа>
					<Свойство>
						<Код>1</Код>
						<Наименование>--&gt; ВалютаДокумента</Наименование>
						<Порядок>100</Порядок>
						<Источник Имя="" Вид=""/>
						<Приемник Имя="ВалютаДокумента" Вид="Реквизит" Тип="СправочникСсылка.Валюты"/>
						<КодПравилаКонвертации>Валюты                                            </КодПравилаКонвертации>
						<ПередВыгрузкой>Значение = Константы.ВалютаРегламентированногоУчетаОрганизаций.Получить();</ПередВыгрузкой>
					</Свойство>
					<Свойство>
						<Код>2</Код>
						<Наименование>--&gt; ВидОперации</Наименование>
						<Порядок>150</Порядок>
						<Источник Имя="" Вид=""/>
						<Приемник Имя="ВидОперации" Вид="Реквизит" Тип="ПеречислениеСсылка.ВидыОперацийОтчетОРозничныхПродажах"/>
						<ПередВыгрузкой>Значение = "ОтчетККМОПродажах";</ПередВыгрузкой>
					</Свойство>
					<Свойство Поиск="true">
						<Код>5</Код>
						<Наименование>--&gt; Комментарий</Наименование>
						<Порядок>300</Порядок>
						<ПолучитьИзВходящихДанных>true</ПолучитьИзВходящихДанных>
						<Источник Имя="" Вид=""/>
						<Приемник Имя="Комментарий" Вид="Реквизит" Тип="Строка"/>
					</Свойство>
					<Свойство>
						<Код>6</Код>
						<Наименование>--&gt; КратностьДокумента</Наименование>
						<Порядок>350</Порядок>
						<Источник Имя="" Вид=""/>
						<Приемник Имя="КратностьДокумента" Вид="Реквизит" Тип="Число"/>
						<ПередВыгрузкой>Значение = 1;</ПередВыгрузкой>
					</Свойство>
					<Свойство>
						<Код>7</Код>
						<Наименование>--&gt; КурсДокумента</Наименование>
						<Порядок>400</Порядок>
						<Источник Имя="" Вид=""/>
						<Приемник Имя="КурсДокумента" Вид="Реквизит" Тип="Число"/>
						<ПередВыгрузкой>Значение = 1</ПередВыгрузкой>
					</Свойство>
					<Свойство Поиск="true">
						<Код>8</Код>
						<Наименование>--&gt; Организация</Наименование>
						<Порядок>450</Порядок>
						<ПолучитьИзВходящихДанных>true</ПолучитьИзВходящихДанных>
						<Источник Имя="" Вид=""/>
						<Приемник Имя="Организация" Вид="Реквизит" Тип="СправочникСсылка.Организации"/>
						<КодПравилаКонвертации>Организации                                       </КодПравилаКонвертации>
					</Свойство>
					<Свойство Отключить="true">
						<Код>13</Код>
						<Наименование>--&gt; СтатьяДвиженияДенежныхСредств</Наименование>
						<Порядок>700</Порядок>
						<Источник Имя="" Вид=""/>
						<Приемник Имя="СтатьяДвиженияДенежныхСредств" Вид="Реквизит" Тип="СправочникСсылка.СтатьиДвиженияДенежныхСредств"/>
					</Свойство>
					<Свойство>
						<Код>14</Код>
						<Наименование>--&gt; СуммаВключаетНДС</Наименование>
						<Порядок>750</Порядок>
						<Источник Имя="" Вид=""/>
						<Приемник Имя="СуммаВключаетНДС" Вид="Реквизит" Тип="Булево"/>
						<ПередВыгрузкой>Значение = Истина;</ПередВыгрузкой>
					</Свойство>
					<Свойство>
						<Код>15</Код>
						<Наименование>--&gt; СуммаДокумента</Наименование>
						<Порядок>800</Порядок>
						<ПолучитьИзВходящихДанных>true</ПолучитьИзВходящихДанных>
						<Источник Имя="" Вид=""/>
						<Приемник Имя="СуммаДокумента" Вид="Реквизит" Тип="Число"/>
					</Свойство>
					<Свойство>
						<Код>16</Код>
						<Наименование>--&gt; СчетКасса</Наименование>
						<Порядок>850</Порядок>
						<Источник Имя="" Вид=""/>
						<Приемник Имя="СчетКасса" Вид="Реквизит" Тип="ПланСчетовСсылка.Хозрасчетный"/>
						<ПередВыгрузкой>Значение = "КассаОрганизации";</ПередВыгрузкой>
					</Свойство>
					<Свойство Отключить="true">
						<Код>17</Код>
						<Наименование>--&gt; ТипЦен</Наименование>
						<Порядок>900</Порядок>
						<Источник Имя="" Вид=""/>
						<Приемник Имя="ТипЦен" Вид="Реквизит" Тип="СправочникСсылка.ТипыЦенНоменклатуры"/>
					</Свойство>
					<Свойство Поиск="true">
						<Код>19</Код>
						<Наименование>--&gt; Дата</Наименование>
						<Порядок>1000</Порядок>
						<ПолучитьИзВходящихДанных>true</ПолучитьИзВходящихДанных>
						<Источник Имя="" Вид=""/>
						<Приемник Имя="Дата" Вид="Свойство" Тип="Дата"/>
					</Свойство>
					<Группа>
						<Код>40</Код>
						<Наименование>--&gt; Возвраты</Наименование>
						<Порядок>1050</Порядок>
						<ПолучитьИзВходящихДанных>true</ПолучитьИзВходящихДанных>
						<Источник Имя="" Вид=""/>
						<Приемник Имя="Возвраты" Вид="ТабличнаяЧасть"/>
						<Свойство>
							<Код>41</Код>
							<Наименование>--&gt; Количество</Наименование>
							<Порядок>50</Порядок>
							<Источник Имя="" Вид=""/>
							<Приемник Имя="Количество" Вид="Реквизит" Тип="Число"/>
						</Свойство>
						<Свойство>
							<Код>42</Код>
							<Наименование>--&gt; Номенклатура</Наименование>
							<Порядок>100</Порядок>
							<Источник Имя="" Вид=""/>
							<Приемник Имя="Номенклатура" Вид="Реквизит" Тип="СправочникСсылка.Номенклатура"/>
						</Свойство>
						<Свойство>
							<Код>43</Код>
							<Наименование>--&gt; СтавкаНДС</Наименование>
							<Порядок>150</Порядок>
							<Источник Имя="" Вид=""/>
							<Приемник Имя="СтавкаНДС" Вид="Реквизит" Тип="ПеречислениеСсылка.СтавкиНДС"/>
						</Свойство>
						<Свойство>
							<Код>44</Код>
							<Наименование>--&gt; Сумма</Наименование>
							<Порядок>200</Порядок>
							<Источник Имя="" Вид=""/>
							<Приемник Имя="Сумма" Вид="Реквизит" Тип="Число"/>
						</Свойство>
						<Свойство>
							<Код>45</Код>
							<Наименование>--&gt; СуммаНДС</Наименование>
							<Порядок>250</Порядок>
							<Источник Имя="" Вид=""/>
							<Приемник Имя="СуммаНДС" Вид="Реквизит" Тип="Число"/>
						</Свойство>
						<Свойство>
							<Код>46</Код>
							<Наименование>--&gt; Цена</Наименование>
							<Порядок>300</Порядок>
							<Источник Имя="" Вид=""/>
							<Приемник Имя="Цена" Вид="Реквизит" Тип="Число"/>
						</Свойство>
					</Группа>
				</Свойства>
				<Значения/>
			</Правило>
		</Группа>
		<Группа>
			<Код>Перечисления</Код>
			<Наименование>Перечисления</Наименование>
			<Порядок>150</Порядок>
			<Правило>
				<Код>СтавкиНДС</Код>
				<Наименование>Справочник: Ставки НДС</Наименование>
				<Порядок>50</Порядок>
				<Источник>СправочникСсылка.СтавкиНДС</Источник>
				<Приемник>ПеречислениеСсылка.СтавкиНДС</Приемник>
				<Свойства/>
				<Значения>
					<Значение>
						<Код>1</Код>
						<Наименование>БезНДС --&gt; БезНДС</Наименование>
						<Порядок>50</Порядок>
						<Источник>БезНДС</Источник>
						<Приемник>БезНДС</Приемник>
					</Значение>
					<Значение>
						<Код>2</Код>
						<Наименование>ОсновнаяСтавкаНДС --&gt; НДС18</Наименование>
						<Порядок>100</Порядок>
						<Источник>ОсновнаяСтавкаНДС</Источник>
						<Приемник>НДС20</Приемник>
					</Значение>
					<Значение>
						<Код>3</Код>
						<Наименование>20% --&gt; НДС20</Наименование>
						<Порядок>150</Порядок>
						<Источник>20%</Источник>
						<Приемник>НДС20</Приемник>
					</Значение>
				</Значения>
			</Правило>
			<Правило>
				<Код>ВидыОперацийПоступлениеТоваровУслуг</Код>
				<Наименование>Справочник: Хоз. операции</Наименование>
				<Порядок>100</Порядок>
				<Источник>СправочникСсылка.ХозОперации</Источник>
				<Приемник>ПеречислениеСсылка.ВидыОперацийПоступлениеТоваровУслуг</Приемник>
				<Свойства/>
				<Значения>
					<Значение>
						<Код>1</Код>
						<Наименование>ПоступлениеТМЦ --&gt;</Наименование>
						<Порядок>50</Порядок>
						<Источник>ПоступлениеТМЦ</Источник>
						<Приемник>ПокупкаКомиссия</Приемник>
					</Значение>
					<Значение>
						<Код>2</Код>
						<Наименование>ПоступлениеТоваров --&gt;</Наименование>
						<Порядок>100</Порядок>
						<Источник>ПоступлениеТоваров</Источник>
						<Приемник>ПокупкаКомиссия</Приемник>
					</Значение>
					<Значение>
						<Код>3</Код>
						<Наименование>ПоступлениеТоваровКомиссия --&gt;</Наименование>
						<Порядок>150</Порядок>
						<Источник>ПоступлениеТоваровКомиссия</Источник>
						<Приемник>ПокупкаКомиссия</Приемник>
					</Значение>
				</Значения>
			</Правило>
			<Правило>
				<Код>ЮридическоеФизическоеЛицо</Код>
				<Наименование>Перечисление: Формы собственности</Наименование>
				<Порядок>150</Порядок>
				<Источник>ПеречислениеСсылка.ФормыСобственности</Источник>
				<Приемник>ПеречислениеСсылка.ЮридическоеФизическоеЛицо</Приемник>
				<Свойства/>
				<Значения>
					<Значение>
						<Код>1</Код>
						<Наименование>ЮридическоеЛицо --&gt; ЮридическоеЛицо</Наименование>
						<Порядок>50</Порядок>
						<Источник>ЮридическоеЛицо</Источник>
						<Приемник>ЮридическоеЛицо</Приемник>
					</Значение>
					<Значение>
						<Код>2</Код>
						<Наименование>Прочее --&gt; ФизическоеЛицо</Наименование>
						<Порядок>100</Порядок>
						<Источник>Прочее</Источник>
						<Приемник>ФизическоеЛицо</Приемник>
					</Значение>
					<Значение>
						<Код>3</Код>
						<Наименование>ЧастноеЛицо --&gt; ФизическоеЛицо</Наименование>
						<Порядок>150</Порядок>
						<Источник>ЧастноеЛицо</Источник>
						<Приемник>ФизическоеЛицо</Приемник>
					</Значение>
					<Значение>
						<Код>4</Код>
						<Наименование>ЧастныйПредприниматель --&gt; ЮридическоеЛицо</Наименование>
						<Порядок>200</Порядок>
						<Источник>ЧастныйПредприниматель</Источник>
						<Приемник>ЮридическоеЛицо</Приемник>
					</Значение>
				</Значения>
			</Правило>
		</Группа>
	</ПравилаКонвертацииОбъектов>
	<ПравилаВыгрузкиДанных>
		<Группа Отключить="false">
			<Код>Документы</Код>
			<Наименование>Документы</Наименование>
			<Порядок>50</Порядок>
			<Правило Отключить="false">
				<Код>ЧекНаОплату</Код>
				<Наименование>Чек на оплату</Наименование>
				<Порядок>200</Порядок>
				<Описание>Наличные продажи собственного товара. ЧекиНаОплату.Ставка &lt;&gt; 18% -&gt; ОтчетОРозничныхПродажах</Описание>
				<СпособОтбораДанных>ПроизвольныйАлгоритм</СпособОтбораДанных>
				<ПередОбработкойПравила>парамОрганизация = Справочники.Организации.НайтиПоКоду(Параметры.кодОргИПУслуги);

	Запрос = Новый Запрос;
	Запрос.Текст = 
	Запрос = Новый Запрос;
	Запрос.Текст ="ВЫБРАТЬ
	| ЧекНаОплатуТовары.Ссылка.Организация КАК Организация,
	| ЧекНаОплатуТовары.Ссылка.амбУСН КАК ПризнакУСН,
	| ЧекНаОплатуТовары.Ссылка.Сделка КАК Сделка,
	| ПРЕДСТАВЛЕНИЕ(ЧекНаОплатуТовары.Ссылка.Сделка) КАК СделкаПредставление,
	| ЧекНаОплатуТовары.ХарактеристикаНоменклатуры КАК Номенклатура,
	| ПРЕДСТАВЛЕНИЕ(ЧекНаОплатуТовары.ХарактеристикаНоменклатуры) КАК НоменклатураПредставление,
	| ЧекНаОплатуТовары.Количество КАК Количество,
	| ""Услуги УСН"" КАК Категория,
	| ЧекНаОплатуТовары.СуммаВсего КАК СуммаВсего,
	| (ЧекНаОплатуТовары.Сумма - ЧекНаОплатуТовары.СуммаВсего) / ЧекНаОплатуТовары.Количество КАК СкидкаНаЦену,
	| ЧекНаОплатуТовары.Цена КАК ЦенаБезСкидки,
	| ЧекНаОплатуТовары.Сумма - ЧекНаОплатуТовары.СуммаВсего КАК СуммаСкидки,
	| ЧекНаОплатуТовары.СуммаВсего / ЧекНаОплатуТовары.Количество КАК ЦенаПродажи,
	| НАЧАЛОПЕРИОДА(ЧекНаОплатуТовары.Ссылка.Дата, ДЕНЬ) КАК Дата,
	| ЧекНаОплатуТовары.Номенклатура.Артикул КАК Артикул,
	| ЧекНаОплатуТовары.Ссылка.ХозОперация КАК ХозОперация,
	| ЧекНаОплатуТовары.Ссылка КАК Ссылка
	| 	ИЗ
	| Документ.ЧекНаОплату.Товары КАК ЧекНаОплатуТовары
	| 	ГДЕ
	| ЧекНаОплатуТовары.Номенклатура.ВидНоменклатуры = &amp;ЭтоУслуга
	| И НЕ ЧекНаОплатуТовары.Ссылка.амбТоварООО
	| И ЧекНаОплатуТовары.Ссылка.Проведен
	| И ЧекНаОплатуТовары.Ссылка.Дата МЕЖДУ &amp;ДатаНачала И &amp;ДатаОкончания
	| И НЕ ЕСТЬNULL(ЧекНаОплатуТовары.Ссылка.амбИнтМаг, ЛОЖЬ)
	| 
	| УПОРЯДОЧИТЬ ПО
	| 	ПризнакУСН
	| ИТОГИ
	| 	СУММА(Количество),
	| СУММА(СуммаВсего),
	| СУММА(СкидкаНаЦену),
	| СУММА(ЦенаБезСкидки),
	| СУММА(СуммаСкидки),
	| СУММА(ЦенаПродажи)
	| ПО
	| Дата,
	| Организация,
	| Категория;"	;
	
	Запрос.УстановитьПараметр("ЭтоУслуга", Перечисления.ВидыНоменклатуры.Услуга);
	Запрос.УстановитьПараметр("ДатаНачала", НачалоДня(ДатаНачала));
	Запрос.УстановитьПараметр("ДатаОкончания", КонецДня(ДатаОкончания)); 	
	ВыборкаДат = Запрос.Выполнить().Выбрать(ОбходРезультатаЗапроса.ПоГруппировкам);
	Пока ВыборкаДат.Следующий() Цикл
		ВыборкаОрганизаций = ВыборкаДат.Выбрать(ОбходРезультатаЗапроса.ПоГруппировкам);
		Пока ВыборкаОрганизаций.Следующий() Цикл
			Если НЕ ВыборкаОрганизаций.Организация = парамОрганизация Тогда
				Продолжить;
			КонецЕсли;
			ВыборкаКатегорий = ВыборкаОрганизаций.Выбрать(ОбходРезультатаЗапроса.ПоГруппировкам);
			Пока ВыборкаКатегорий.Следующий() Цикл
				Категория   = ВыборкаКатегорий.Категория;
				Организация = ВыборкаОрганизаций.Организация;
				Дата        = ВыборкаДат.Дата;
				Комментарий = "#" + Формат(ВыборкаДат.Дата, "ДФ=dd.MM.yyyy") + "; " + Организация + "; " + Категория + "#";
				ВходящиеДанные = Новый Структура;
				ВходящиеДанные.Вставить("Дата", Дата);
				ВходящиеДанные.Вставить("Организация", Организация);				
				ВходящиеДанные.Вставить("Комментарий", Комментарий);
				ТаблицаТоваров = Новый ТаблицаЗначений;
				ТаблицаТоваров.Колонки.Добавить("Количество");
				ТаблицаТоваров.Колонки.Добавить("Номенклатура");
				ТаблицаТоваров.Колонки.Добавить("СтавкаНДС");
				ТаблицаТоваров.Колонки.Добавить("СуммаНДС");
				ТаблицаТоваров.Колонки.Добавить("Сумма");				
				ТаблицаТоваров.Колонки.Добавить("Цена");				
				ТаблицаВозвратов = ТаблицаТоваров.СкопироватьКолонки();
				
				Выборка = ВыборкаКатегорий.Выбрать();
				Пока Выборка.Следующий() Цикл
					Количество = Выборка.Количество;
					Если Количество &lt; 0 Тогда
						Продолжить;
					КонецЕсли;	
					Если Выборка.ХозОперация = Справочники.ХозОперации.ЧекНаОплату Тогда
						НоваяСтрока = ТаблицаТоваров.Добавить();
					Иначе
						НоваяСтрока = ТаблицаВозвратов.Добавить();
					КонецЕсли;	
					НоваяСтрока.Сумма        = Выборка.СуммаВсего;
					НоваяСтрока.Количество   = Количество;
					НоваяСтрока.Цена         = Окр(Выборка.СуммаВсего / Количество, 2);
					Если ТипЗнч(Выборка.Номенклатура) = Тип("СправочникСсылка.Номенклатура") Тогда
						НоваяСтрока.Номенклатура = Выборка.Номенклатура;
					Иначе
						НоваяСтрока.Номенклатура = Справочники.Автоработы.НайтиПоНаименованию(Выборка.НоменклатураПредставление, Истина);
					КонецЕсли;
					Если Найти(ВыборкаКатегорий.Категория, "НДС") = 0 Тогда
						НоваяСтрока.СтавкаНДС   = Справочники.СтавкиНДС.БезНДС;
						НоваяСтрока.СуммаНДС   = 0; 
					Иначе
						НоваяСтрока.СтавкаНДС = Справочники.СтавкиНДС.ОсновнаяСтавкаНДС;
						НоваяСтрока.СуммаНДС  = Выборка.СуммаВсего / 120 * 20;
					КонецЕсли;
				КонецЦикла;	
				ВходящиеДанные.Вставить("СуммаДокумента", ТаблицаТоваров.Итог("Сумма") - ТаблицаВозвратов.Итог("Сумма"));
				ВходящиеДанные.Вставить("Товары", ТаблицаТоваров);
				ВходящиеДанные.Вставить("Возвраты", ТаблицаВозвратов);
				ВыгрузитьПоПравилу(,,ВходящиеДанные,,"ОтчетОРозничныхПродажах");

			КонецЦикла;	
		КонецЦикла;	
	КонецЦикла;</ПередОбработкойПравила>
			</Правило>
		</Группа>
	</ПравилаВыгрузкиДанных>
	<ПравилаОчисткиДанных/>
	<Алгоритмы/>
	<Запросы/>
</ПравилаОбмена>