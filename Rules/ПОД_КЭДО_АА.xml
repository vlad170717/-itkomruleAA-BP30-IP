<ПравилаОбмена>
	<ВерсияФормата РежимСовместимости="РежимСовместимостиСБСП20">2.01</ВерсияФормата>
	<Ид>3b9fe8db-1fc9-4f61-a888-300f294236dc    </Ид>
	<Наименование>КлиентЭДОБазовая --&gt; Автосалон5 Италком</Наименование>
	<ДатаВремяСоздания>2022-07-15T16:33:22</ДатаВремяСоздания>
	<Источник ВерсияПлатформы="8.0" ВерсияКонфигурации="2.7.2.95" СинонимКонфигурации="Клиент ЭДО (базовая), редакция 2.7">КлиентЭДОБазовая</Источник>
	<Приемник ВерсияПлатформы="8.0" ВерсияКонфигурации="5.0.07.03" СинонимКонфигурации="Альфа-Авто: Автосалон+Автосервис+Автозапчасти ПРОФ. Редакция 5">Автосалон5</Приемник>
	<ПослеЗагрузкиПравилОбмена>
ВерсияПравил	= "//#%#002#%%#";
ВерсияПравил	= СтрЗаменить(ВерсияПравил, "//#%#","");
ВерсияПравил	= СтрЗаменить(ВерсияПравил, "#%%#","");
Сообщить("Версия правил " + ВерсияПравил);
</ПослеЗагрузкиПравилОбмена>
	<Параметры/>
	<Обработки/>
	<ПравилаКонвертацииОбъектов>
		<Группа>
			<Код>Перечисления</Код>
			<Наименование>Перечисления</Наименование>
			<Порядок>50</Порядок>
			<Правило>
				<Код>ФормыСобственности</Код>
				<Наименование>Перечисление: Юридическое / физическое лицо</Наименование>
				<Порядок>50</Порядок>
				<Источник>ПеречислениеСсылка.ЮрФизЛицо</Источник>
				<Приемник>ПеречислениеСсылка.ФормыСобственности</Приемник>
				<Свойства/>
				<Значения>
					<Значение>
						<Код>1</Код>
						<Наименование>ИндивидуальныйПредприниматель --&gt; ЧастныйПредприни</Наименование>
						<Порядок>50</Порядок>
						<Источник>ИндивидуальныйПредприниматель</Источник>
						<Приемник>ЧастныйПредприниматель</Приемник>
					</Значение>
					<Значение>
						<Код>2</Код>
						<Наименование>ФизЛицо --&gt; ЧастноеЛицо</Наименование>
						<Порядок>100</Порядок>
						<Источник>ФизЛицо</Источник>
						<Приемник>ЧастноеЛицо</Приемник>
					</Значение>
					<Значение>
						<Код>3</Код>
						<Наименование>ЮрЛицо --&gt; ЮридическоеЛицо</Наименование>
						<Порядок>150</Порядок>
						<Источник>ЮрЛицо</Источник>
						<Приемник>ЮридическоеЛицо</Приемник>
					</Значение>
					<Значение>
						<Код>4</Код>
						<Наименование>ЮрЛицоНеРезидент --&gt; ЮридическоеЛицо</Наименование>
						<Порядок>200</Порядок>
						<Источник>ЮрЛицоНеРезидент</Источник>
						<Приемник>ЮридическоеЛицо</Приемник>
					</Значение>
				</Значения>
			</Правило>
			<Правило>
				<Код>ВидыНоменклатуры</Код>
				<Наименование>Перечисление: Типы номенклатуры</Наименование>
				<Порядок>100</Порядок>
				<Источник>ПеречислениеСсылка.ТипыНоменклатуры</Источник>
				<Приемник>ПеречислениеСсылка.ВидыНоменклатуры</Приемник>
				<Свойства/>
				<Значения>
					<Значение>
						<Код>1</Код>
						<Наименование>Товар --&gt; Товар</Наименование>
						<Порядок>50</Порядок>
						<Источник>Товар</Источник>
						<Приемник>Товар</Приемник>
					</Значение>
					<Значение>
						<Код>2</Код>
						<Наименование>Услуга --&gt; Услуга</Наименование>
						<Порядок>100</Порядок>
						<Источник>Услуга</Источник>
						<Приемник>Услуга</Приемник>
					</Значение>
					<Значение>
						<Код>3</Код>
						<Наименование>Право --&gt; Услуга</Наименование>
						<Порядок>150</Порядок>
						<Источник>Право</Источник>
						<Приемник>Услуга</Приемник>
					</Значение>
					<Значение>
						<Код>4</Код>
						<Наименование>Работа --&gt; Услуга</Наименование>
						<Порядок>200</Порядок>
						<Источник>Работа</Источник>
						<Приемник>Услуга</Приемник>
					</Значение>
				</Значения>
			</Правило>
			<Правило>
				<Код>ВидыДоговоров</Код>
				<Наименование>Перечисление: Виды договоров контрагентов</Наименование>
				<Порядок>150</Порядок>
				<Источник>ПеречислениеСсылка.ВидыДоговоровКонтрагентов</Источник>
				<Приемник>ПеречислениеСсылка.ВидыДоговоров</Приемник>
				<Свойства/>
				<Значения>
					<Значение>
						<Код>1</Код>
						<Наименование>Прочее --&gt; Прочее</Наименование>
						<Порядок>50</Порядок>
						<Источник>Прочее</Источник>
						<Приемник>Прочее</Приемник>
					</Значение>
					<Значение>
						<Код>2</Код>
						<Наименование>СКомиссионером --&gt; СКомиссионером</Наименование>
						<Порядок>100</Порядок>
						<Источник>СКомиссионером</Источник>
						<Приемник>СКомиссионером</Приемник>
					</Значение>
					<Значение>
						<Код>3</Код>
						<Наименование>СКомиссионеромНаЗакупку --&gt; СКомиссионером</Наименование>
						<Порядок>150</Порядок>
						<Источник>СКомиссионеромНаЗакупку</Источник>
						<Приемник>СКомиссионером</Приемник>
					</Значение>
					<Значение>
						<Код>4</Код>
						<Наименование>СКомитентом --&gt; СКомитентом</Наименование>
						<Порядок>200</Порядок>
						<Источник>СКомитентом</Источник>
						<Приемник>СКомитентом</Приемник>
					</Значение>
					<Значение>
						<Код>5</Код>
						<Наименование>СКомитентомНаЗакупку --&gt; СКомитентом</Наименование>
						<Порядок>250</Порядок>
						<Источник>СКомитентомНаЗакупку</Источник>
						<Приемник>СКомитентом</Приемник>
					</Значение>
					<Значение>
						<Код>6</Код>
						<Наименование>СПокупателем --&gt; Продажа</Наименование>
						<Порядок>300</Порядок>
						<Источник>СПокупателем</Источник>
						<Приемник>Продажа</Приемник>
					</Значение>
					<Значение>
						<Код>7</Код>
						<Наименование>СПоставщиком --&gt; Покупка</Наименование>
						<Порядок>350</Порядок>
						<Источник>СПоставщиком</Источник>
						<Приемник>Покупка</Приемник>
					</Значение>
				</Значения>
			</Правило>
		</Группа>
		<Группа>
			<Код>Справочники</Код>
			<Наименование>Справочники</Наименование>
			<Порядок>100</Порядок>
			<Правило>
				<Код>СтавкиНДС</Код>
				<Наименование>Перечисление: Ставки НДС</Наименование>
				<Порядок>50</Порядок>
				<ПередВыгрузкой>Если ВходящиеДанные = Неопределено 
	ИЛИ НЕ ВходящиеДанные.Свойство("Наименование") Тогда
	Отказ = Истина;
КонецЕсли;</ПередВыгрузкой>
				<ПоследовательностьПолейПоиска>Если НомерВариантаПоиска = 1 Тогда
	СтрокаИменСвойствПоиска = "Наименование";
Иначе
	ПрекратитьПоиск = Истина;
	СтавкаНДС = СвойстваПоиска.Получить("Наименование");
	
	Если СтрНайти(СтавкаНДС, "120") &gt; 0 Тогда
		СсылкаНаОбъект = Справочники.СтавкиНДС.НайтиПоНаименованию("120", Ложь);
	ИначеЕсли СтрНайти(СтавкаНДС, "118") &gt; 0 Тогда
		СсылкаНаОбъект = Справочники.СтавкиНДС.НайтиПоНаименованию("118", Ложь);
	ИначеЕсли СтрНайти(СтавкаНДС, "110") &gt; 0 Тогда
		СсылкаНаОбъект = Справочники.СтавкиНДС.НайтиПоНаименованию("110", Ложь);
	ИначеЕсли СтрНайти(СтавкаНДС, "20") &gt; 0 И Справочники.СтавкиНДС.ОсновнаяСтавкаНДС.Ставка = 20 Тогда
		СсылкаНаОбъект = Справочники.СтавкиНДС.ОсновнаяСтавкаНДС;
	ИначеЕсли СтрНайти(СтавкаНДС, "18") &gt; 0 И Справочники.СтавкиНДС.ОсновнаяСтавкаНДС.Ставка = 18 Тогда
		СсылкаНаОбъект = Справочники.СтавкиНДС.ОсновнаяСтавкаНДС;
	ИначеЕсли СтрНайти(СтавкаНДС, "20") &gt; 0 Тогда
		СсылкаНаОбъект = Справочники.СтавкиНДС.НайтиПоНаименованию("20", Ложь);
	ИначеЕсли СтрНайти(СтавкаНДС, "18") &gt; 0 Тогда
		СсылкаНаОбъект = Справочники.СтавкиНДС.НайтиПоНаименованию("18", Ложь);
	ИначеЕсли СтрНайти(СтавкаНДС, "10") &gt; 0 Тогда
		СсылкаНаОбъект = Справочники.СтавкиНДС.НайтиПоНаименованию("10", Ложь);
	ИначеЕсли СтрНайти(СтавкаНДС, "НДС") &gt; 0 Тогда
		СсылкаНаОбъект = Справочники.СтавкиНДС.БезНДС;
	ИначеЕсли СтрНайти(СтавкаНДС, "0") &gt; 0 Тогда
		СсылкаНаОбъект = Справочники.СтавкиНДС.НайтиПоРеквизиту("Ставка", 0);
	Иначе
		СсылкаНаОбъект = Справочники.СтавкиНДС.ПустаяСсылка();
	КонецЕсли;
	
КонецЕсли;</ПоследовательностьПолейПоиска>
				<СинхронизироватьПоИдентификатору>true</СинхронизироватьПоИдентификатору>
				<НеСоздаватьЕслиНеНайден>true</НеСоздаватьЕслиНеНайден>
				<Источник>ПеречислениеСсылка.СтавкиНДС</Источник>
				<Приемник>СправочникСсылка.СтавкиНДС</Приемник>
				<Свойства>
					<Свойство Поиск="true">
						<Код>1</Код>
						<Наименование>--&gt; Наименование</Наименование>
						<Порядок>50</Порядок>
						<Источник Имя="" Вид=""/>
						<Приемник Имя="Наименование" Вид="Свойство" Тип="Строка"/>
						<ПередВыгрузкой>Результат = ВходящиеДанные &lt;&gt; Неопределено
	И ВходящиеДанные.Свойство("Наименование", Значение);</ПередВыгрузкой>
					</Свойство>
				</Свойства>
				<Значения/>
			</Правило>
			<Правило>
				<Код>Валюты</Код>
				<Наименование>Справочник: Валюты</Наименование>
				<Порядок>100</Порядок>
				<ПоследовательностьПолейПоиска>СтрокаИменСвойствПоиска = "Код";</ПоследовательностьПолейПоиска>
				<НеЗамещать>true</НеЗамещать>
				<СинхронизироватьПоИдентификатору>true</СинхронизироватьПоИдентификатору>
				<ПродолжитьПоискПоПолямПоискаЕслиПоИдентификаторуНеНашли>true</ПродолжитьПоискПоПолямПоискаЕслиПоИдентификаторуНеНашли>
				<Источник>СправочникСсылка.Валюты</Источник>
				<Приемник>СправочникСсылка.Валюты</Приемник>
				<Свойства>
					<Свойство Поиск="true">
						<Код>2</Код>
						<Наименование>Код --&gt; Код</Наименование>
						<Порядок>50</Порядок>
						<Источник Имя="Код" Вид="Свойство" Тип="Строка"/>
						<Приемник Имя="Код" Вид="Свойство" Тип="Строка"/>
						<ПриводитьКДлине>3</ПриводитьКДлине>
					</Свойство>
					<Свойство>
						<Код>3</Код>
						<Наименование>Наименование --&gt; Наименование</Наименование>
						<Порядок>100</Порядок>
						<Источник Имя="Наименование" Вид="Свойство" Тип="Строка"/>
						<Приемник Имя="Наименование" Вид="Свойство" Тип="Строка"/>
					</Свойство>
					<Свойство>
						<Код>1</Код>
						<Наименование>НаименованиеПолное --&gt; НаименованиеПолное</Наименование>
						<Порядок>150</Порядок>
						<Источник Имя="НаименованиеПолное" Вид="Реквизит" Тип="Строка"/>
						<Приемник Имя="НаименованиеПолное" Вид="Реквизит" Тип="Строка"/>
					</Свойство>
					<Свойство>
						<Код>4</Код>
						<Наименование>ПометкаУдаления --&gt; ПометкаУдаления</Наименование>
						<Порядок>200</Порядок>
						<Источник Имя="ПометкаУдаления" Вид="Свойство" Тип="Булево"/>
						<Приемник Имя="ПометкаУдаления" Вид="Свойство" Тип="Булево"/>
					</Свойство>
				</Свойства>
				<Значения/>
			</Правило>
			<Правило>
				<Код>КлассификаторСтранМира</Код>
				<Наименование>Справочник: Страны мира</Наименование>
				<Порядок>150</Порядок>
				<ПоследовательностьПолейПоиска>СтрокаИменСвойствПоиска = "Код";</ПоследовательностьПолейПоиска>
				<НеЗамещать>true</НеЗамещать>
				<СинхронизироватьПоИдентификатору>true</СинхронизироватьПоИдентификатору>
				<ПродолжитьПоискПоПолямПоискаЕслиПоИдентификаторуНеНашли>true</ПродолжитьПоискПоПолямПоискаЕслиПоИдентификаторуНеНашли>
				<Источник>СправочникСсылка.СтраныМира</Источник>
				<Приемник>СправочникСсылка.КлассификаторСтранМира</Приемник>
				<Свойства>
					<Свойство Поиск="true">
						<Код>2</Код>
						<Наименование>Код --&gt; Код</Наименование>
						<Порядок>50</Порядок>
						<Источник Имя="Код" Вид="Свойство" Тип="Строка"/>
						<Приемник Имя="Код" Вид="Свойство" Тип="Строка"/>
						<ПриводитьКДлине>3</ПриводитьКДлине>
					</Свойство>
					<Свойство>
						<Код>3</Код>
						<Наименование>Наименование --&gt; Наименование</Наименование>
						<Порядок>100</Порядок>
						<Источник Имя="Наименование" Вид="Свойство" Тип="Строка"/>
						<Приемник Имя="Наименование" Вид="Свойство" Тип="Строка"/>
					</Свойство>
					<Свойство>
						<Код>1</Код>
						<Наименование>НаименованиеПолное --&gt; НаименованиеПолное</Наименование>
						<Порядок>150</Порядок>
						<Источник Имя="НаименованиеПолное" Вид="Реквизит" Тип="Строка"/>
						<Приемник Имя="НаименованиеПолное" Вид="Реквизит" Тип="Строка"/>
					</Свойство>
					<Свойство>
						<Код>4</Код>
						<Наименование>ПометкаУдаления --&gt; ПометкаУдаления</Наименование>
						<Порядок>200</Порядок>
						<Источник Имя="ПометкаУдаления" Вид="Свойство" Тип="Булево"/>
						<Приемник Имя="ПометкаУдаления" Вид="Свойство" Тип="Булево"/>
					</Свойство>
				</Свойства>
				<Значения/>
			</Правило>
			<Правило>
				<Код>Организации</Код>
				<Наименование>Справочник: Организации</Наименование>
				<Порядок>200</Порядок>
				<ПоследовательностьПолейПоиска>Если НомерВариантаПоиска = 1 тогда
	СтрокаИменСвойствПоиска = "ИНН, КПП";
ИначеЕсли НомерВариантаПоиска = 2 тогда
	СтрокаИменСвойствПоиска = "ИНН";
Иначе
	СтрокаИменСвойствПоиска = "Наименование";
КонецЕсли;</ПоследовательностьПолейПоиска>
				<НеЗамещать>true</НеЗамещать>
				<СинхронизироватьПоИдентификатору>true</СинхронизироватьПоИдентификатору>
				<ПродолжитьПоискПоПолямПоискаЕслиПоИдентификаторуНеНашли>true</ПродолжитьПоискПоПолямПоискаЕслиПоИдентификаторуНеНашли>
				<НеСоздаватьЕслиНеНайден>true</НеСоздаватьЕслиНеНайден>
				<Источник>СправочникСсылка.Организации</Источник>
				<Приемник>СправочникСсылка.Организации</Приемник>
				<Свойства>
					<Свойство Поиск="true">
						<Код>1</Код>
						<Наименование>ИНН --&gt; ИНН</Наименование>
						<Порядок>50</Порядок>
						<Источник Имя="ИНН" Вид="Реквизит" Тип="Строка"/>
						<Приемник Имя="ИНН" Вид="Реквизит" Тип="Строка"/>
					</Свойство>
					<Свойство Поиск="true">
						<Код>2</Код>
						<Наименование>КПП --&gt; КПП</Наименование>
						<Порядок>100</Порядок>
						<Источник Имя="КПП" Вид="Реквизит" Тип="Строка"/>
						<Приемник Имя="КПП" Вид="Реквизит" Тип="Строка"/>
					</Свойство>
				</Свойства>
				<Значения/>
			</Правило>
			<Правило>
				<Код>Контрагенты</Код>
				<Наименование>Справочник: Контрагенты</Наименование>
				<Порядок>250</Порядок>
				<ПослеЗагрузки>Если НЕ Объект.ЭтоГруппа Тогда
	
	Если НЕ ЗначениеЗаполнено(Объект.ВидКонтрагента) Тогда
		Объект.ВидКонтрагента = Перечисления.ВидыКонтрагентов.Поставщик;
	КонецЕсли;
	
КонецЕсли;</ПослеЗагрузки>
				<ПоследовательностьПолейПоиска>Если НомерВариантаПоиска = 1 Тогда
	СтрокаИменСвойствПоиска = "ИНН, КПП";
ИначеЕсли НомерВариантаПоиска = 2 Тогда
	СтрокаИменСвойствПоиска = "ИНН";
ИначеЕсли НомерВариантаПоиска = 3 Тогда
	СтрокаИменСвойствПоиска = "Наименование, ЭтоГруппа";
КонецЕсли;</ПоследовательностьПолейПоиска>
				<НеЗамещать>true</НеЗамещать>
				<СинхронизироватьПоИдентификатору>true</СинхронизироватьПоИдентификатору>
				<ПродолжитьПоискПоПолямПоискаЕслиПоИдентификаторуНеНашли>true</ПродолжитьПоискПоПолямПоискаЕслиПоИдентификаторуНеНашли>
				<ГенерироватьНовыйНомерИлиКодЕслиНеУказан>true</ГенерироватьНовыйНомерИлиКодЕслиНеУказан>
				<Источник>СправочникСсылка.Контрагенты</Источник>
				<Приемник>СправочникСсылка.Контрагенты</Приемник>
				<Свойства>
					<Свойство Поиск="true">
						<Код>1</Код>
						<Наименование>ИНН --&gt; ИНН</Наименование>
						<Порядок>50</Порядок>
						<Источник Имя="ИНН" Вид="Реквизит" Тип="Строка"/>
						<Приемник Имя="ИНН" Вид="Реквизит" Тип="Строка"/>
					</Свойство>
					<Свойство Поиск="true">
						<Код>3</Код>
						<Наименование>КПП --&gt; КПП</Наименование>
						<Порядок>100</Порядок>
						<Источник Имя="КПП" Вид="Реквизит" Тип="Строка"/>
						<Приемник Имя="КПП" Вид="Реквизит" Тип="Строка"/>
					</Свойство>
					<Свойство Поиск="true">
						<Код>6</Код>
						<Наименование>Наименование --&gt; Наименование</Наименование>
						<Порядок>150</Порядок>
						<Источник Имя="Наименование" Вид="Свойство" Тип="Строка"/>
						<Приемник Имя="Наименование" Вид="Свойство" Тип="Строка"/>
					</Свойство>
					<Свойство Поиск="true">
						<Код>8</Код>
						<Наименование>Родитель --&gt; Родитель</Наименование>
						<Порядок>200</Порядок>
						<Источник Имя="Родитель" Вид="Свойство" Тип="СправочникСсылка.Контрагенты"/>
						<Приемник Имя="Родитель" Вид="Свойство" Тип="СправочникСсылка.Контрагенты"/>
						<КодПравилаКонвертации>Контрагенты                                       </КодПравилаКонвертации>
					</Свойство>
					<Свойство Поиск="true" Обязательное="true">
						<Код>9</Код>
						<Наименование>ЭтоГруппа --&gt; ЭтоГруппа</Наименование>
						<Порядок>250</Порядок>
						<Источник Имя="ЭтоГруппа" Вид="Свойство" Тип="Булево"/>
						<Приемник Имя="ЭтоГруппа" Вид="Свойство" Тип="Булево"/>
					</Свойство>
					<Свойство>
						<Код>5</Код>
						<Наименование>Код --&gt; Код</Наименование>
						<Порядок>300</Порядок>
						<Источник Имя="Код" Вид="Свойство" Тип="Строка"/>
						<Приемник Имя="Код" Вид="Свойство" Тип="Строка"/>
						<ПриводитьКДлине>8</ПриводитьКДлине>
					</Свойство>
					<Свойство>
						<Код>2</Код>
						<Наименование>КодПоОКПО --&gt; КодПоОКПО</Наименование>
						<Порядок>350</Порядок>
						<Источник Имя="КодПоОКПО" Вид="Реквизит" Тип="Строка"/>
						<Приемник Имя="КодПоОКПО" Вид="Реквизит" Тип="Строка"/>
					</Свойство>
					<Свойство>
						<Код>4</Код>
						<Наименование>НаименованиеПолное --&gt; НаименованиеПолное</Наименование>
						<Порядок>400</Порядок>
						<Источник Имя="НаименованиеПолное" Вид="Реквизит" Тип="Строка"/>
						<Приемник Имя="НаименованиеПолное" Вид="Реквизит" Тип="Строка"/>
					</Свойство>
					<Свойство>
						<Код>10</Код>
						<Наименование>ЮрФизЛицо --&gt; ФормаСобственности</Наименование>
						<Порядок>450</Порядок>
						<Источник Имя="ЮрФизЛицо" Вид="Реквизит" Тип="ПеречислениеСсылка.ЮрФизЛицо"/>
						<Приемник Имя="ФормаСобственности" Вид="Реквизит" Тип="ПеречислениеСсылка.ФормыСобственности"/>
						<КодПравилаКонвертации>ФормыСобственности                                </КодПравилаКонвертации>
					</Свойство>
					<Свойство>
						<Код>7</Код>
						<Наименование>ПометкаУдаления --&gt; ПометкаУдаления</Наименование>
						<Порядок>500</Порядок>
						<Источник Имя="ПометкаУдаления" Вид="Свойство" Тип="Булево"/>
						<Приемник Имя="ПометкаУдаления" Вид="Свойство" Тип="Булево"/>
					</Свойство>
				</Свойства>
				<Значения/>
			</Правило>
			<Правило>
				<Код>ДоговорыВзаиморасчетов</Код>
				<Наименование>Справочник: Договоры</Наименование>
				<Порядок>300</Порядок>
				<ПоследовательностьПолейПоиска>Если НомерВариантаПоиска = 1 тогда 
	СтрокаИменСвойствПоиска = "НомерДоговора, ДатаДоговора, Владелец, Организация"; 
ИначеЕсли НомерВариантаПоиска = 2 тогда 
	СтрокаИменСвойствПоиска = "Наименование, Владелец, Организация, ЭтоГруппа";
КонецЕсли;</ПоследовательностьПолейПоиска>
				<НеЗамещать>true</НеЗамещать>
				<СинхронизироватьПоИдентификатору>true</СинхронизироватьПоИдентификатору>
				<ПродолжитьПоискПоПолямПоискаЕслиПоИдентификаторуНеНашли>true</ПродолжитьПоискПоПолямПоискаЕслиПоИдентификаторуНеНашли>
				<Источник>СправочникСсылка.ДоговорыКонтрагентов</Источник>
				<Приемник>СправочникСсылка.ДоговорыВзаиморасчетов</Приемник>
				<Свойства>
					<Свойство Поиск="true">
						<Код>6</Код>
						<Наименование>Наименование --&gt; Наименование</Наименование>
						<Порядок>50</Порядок>
						<Источник Имя="Наименование" Вид="Свойство" Тип="Строка"/>
						<Приемник Имя="Наименование" Вид="Свойство" Тип="Строка"/>
					</Свойство>
					<Свойство Поиск="true">
						<Код>4</Код>
						<Наименование>Владелец --&gt; Владелец</Наименование>
						<Порядок>100</Порядок>
						<Источник Имя="Владелец" Вид="Свойство" Тип="СправочникСсылка.Контрагенты"/>
						<Приемник Имя="Владелец" Вид="Свойство" Тип="СправочникСсылка.Контрагенты"/>
						<КодПравилаКонвертации>Контрагенты                                       </КодПравилаКонвертации>
					</Свойство>
					<Свойство Поиск="true">
						<Код>3</Код>
						<Наименование>Организация --&gt; Организация</Наименование>
						<Порядок>150</Порядок>
						<Источник Имя="Организация" Вид="Реквизит" Тип="СправочникСсылка.Организации"/>
						<Приемник Имя="Организация" Вид="Реквизит" Тип="СправочникСсылка.Организации"/>
						<КодПравилаКонвертации>Организации                                       </КодПравилаКонвертации>
					</Свойство>
					<Свойство Поиск="true">
						<Код>11</Код>
						<Наименование>ДатаДоговора --&gt; ДатаНачала</Наименование>
						<Порядок>200</Порядок>
						<Источник Имя="ДатаДоговора" Вид="Реквизит" Тип="Дата"/>
						<Приемник Имя="ДатаНачала" Вид="Реквизит" Тип="Дата"/>
					</Свойство>
					<Свойство Поиск="true">
						<Код>2</Код>
						<Наименование>НомерДоговора --&gt; НомерДоговора</Наименование>
						<Порядок>250</Порядок>
						<Источник Имя="НомерДоговора" Вид="Реквизит" Тип="Строка"/>
						<Приемник Имя="НомерДоговора" Вид="Реквизит" Тип="Строка"/>
					</Свойство>
					<Свойство Поиск="true">
						<Код>8</Код>
						<Наименование>Родитель --&gt; Родитель</Наименование>
						<Порядок>300</Порядок>
						<Источник Имя="Родитель" Вид="Свойство" Тип="СправочникСсылка.ДоговорыКонтрагентов"/>
						<Приемник Имя="Родитель" Вид="Свойство" Тип="СправочникСсылка.ДоговорыВзаиморасчетов"/>
						<КодПравилаКонвертации>ДоговорыВзаиморасчетов                            </КодПравилаКонвертации>
					</Свойство>
					<Свойство>
						<Код>5</Код>
						<Наименование>Код --&gt; Код</Наименование>
						<Порядок>350</Порядок>
						<Источник Имя="Код" Вид="Свойство" Тип="Строка"/>
						<Приемник Имя="Код" Вид="Свойство" Тип="Строка"/>
						<ПриводитьКДлине>8</ПриводитьКДлине>
					</Свойство>
					<Свойство>
						<Код>12</Код>
						<Наименование>ДатаНачалаДействия --&gt; ДатаНачала</Наименование>
						<Порядок>400</Порядок>
						<Источник Имя="ДатаНачалаДействия" Вид="Реквизит" Тип="Дата"/>
						<Приемник Имя="ДатаНачала" Вид="Реквизит" Тип="Дата"/>
					</Свойство>
					<Свойство>
						<Код>13</Код>
						<Наименование>ДатаОкончанияДействия --&gt; ДатаКонца</Наименование>
						<Порядок>450</Порядок>
						<Источник Имя="ДатаОкончанияДействия" Вид="Реквизит" Тип="Дата"/>
						<Приемник Имя="ДатаКонца" Вид="Реквизит" Тип="Дата"/>
					</Свойство>
					<Свойство>
						<Код>10</Код>
						<Наименование>ВалютаРасчетов --&gt; ВалютаВзаиморасчетов</Наименование>
						<Порядок>500</Порядок>
						<Источник Имя="ВалютаРасчетов" Вид="Реквизит" Тип="СправочникСсылка.Валюты"/>
						<Приемник Имя="ВалютаВзаиморасчетов" Вид="Реквизит" Тип="СправочникСсылка.Валюты"/>
						<КодПравилаКонвертации>Валюты                                            </КодПравилаКонвертации>
					</Свойство>
					<Свойство>
						<Код>7</Код>
						<Наименование>ПометкаУдаления --&gt; ПометкаУдаления</Наименование>
						<Порядок>550</Порядок>
						<Источник Имя="ПометкаУдаления" Вид="Свойство" Тип="Булево"/>
						<Приемник Имя="ПометкаУдаления" Вид="Свойство" Тип="Булево"/>
					</Свойство>
					<Свойство>
						<Код>1</Код>
						<Наименование>ВидДоговора --&gt; ВидДоговора</Наименование>
						<Порядок>600</Порядок>
						<Источник Имя="ВидДоговора" Вид="Реквизит" Тип="ПеречислениеСсылка.ВидыДоговоровКонтрагентов"/>
						<Приемник Имя="ВидДоговора" Вид="Реквизит" Тип="ПеречислениеСсылка.ВидыДоговоров"/>
						<КодПравилаКонвертации>ВидыДоговоров                                     </КодПравилаКонвертации>
					</Свойство>
					<Свойство Обязательное="true">
						<Код>9</Код>
						<Наименование>ЭтоГруппа --&gt; ЭтоГруппа</Наименование>
						<Порядок>650</Порядок>
						<Источник Имя="ЭтоГруппа" Вид="Свойство" Тип="Булево"/>
						<Приемник Имя="ЭтоГруппа" Вид="Свойство" Тип="Булево"/>
					</Свойство>
				</Свойства>
				<Значения/>
			</Правило>
			<Правило>
				<Код>Банки</Код>
				<Наименование>Справочник: Классификатор банков</Наименование>
				<Порядок>350</Порядок>
				<ПоследовательностьПолейПоиска>СтрокаИменСвойствПоиска = "Код";</ПоследовательностьПолейПоиска>
				<НеЗамещать>true</НеЗамещать>
				<СинхронизироватьПоИдентификатору>true</СинхронизироватьПоИдентификатору>
				<ПродолжитьПоискПоПолямПоискаЕслиПоИдентификаторуНеНашли>true</ПродолжитьПоискПоПолямПоискаЕслиПоИдентификаторуНеНашли>
				<Источник>СправочникСсылка.КлассификаторБанков</Источник>
				<Приемник>СправочникСсылка.Банки</Приемник>
				<Свойства>
					<Свойство Поиск="true">
						<Код>5</Код>
						<Наименование>Код --&gt; Код</Наименование>
						<Порядок>50</Порядок>
						<Источник Имя="Код" Вид="Свойство" Тип="Строка"/>
						<Приемник Имя="Код" Вид="Свойство" Тип="Строка"/>
						<ПриводитьКДлине>9</ПриводитьКДлине>
					</Свойство>
					<Свойство>
						<Код>1</Код>
						<Наименование>Адрес --&gt; Адрес</Наименование>
						<Порядок>100</Порядок>
						<Источник Имя="Адрес" Вид="Реквизит" Тип="Строка"/>
						<Приемник Имя="Адрес" Вид="Реквизит" Тип="Строка"/>
					</Свойство>
					<Свойство>
						<Код>2</Код>
						<Наименование>Город --&gt; Город</Наименование>
						<Порядок>150</Порядок>
						<Источник Имя="Город" Вид="Реквизит" Тип="Строка"/>
						<Приемник Имя="Город" Вид="Реквизит" Тип="Строка"/>
					</Свойство>
					<Свойство>
						<Код>3</Код>
						<Наименование>КоррСчет --&gt; КоррСчет</Наименование>
						<Порядок>200</Порядок>
						<Источник Имя="КоррСчет" Вид="Реквизит" Тип="Строка"/>
						<Приемник Имя="КоррСчет" Вид="Реквизит" Тип="Строка"/>
					</Свойство>
					<Свойство>
						<Код>4</Код>
						<Наименование>Телефоны --&gt; Телефоны</Наименование>
						<Порядок>250</Порядок>
						<Источник Имя="Телефоны" Вид="Реквизит" Тип="Строка"/>
						<Приемник Имя="Телефоны" Вид="Реквизит" Тип="Строка"/>
					</Свойство>
					<Свойство>
						<Код>6</Код>
						<Наименование>Наименование --&gt; Наименование</Наименование>
						<Порядок>300</Порядок>
						<Источник Имя="Наименование" Вид="Свойство" Тип="Строка"/>
						<Приемник Имя="Наименование" Вид="Свойство" Тип="Строка"/>
					</Свойство>
					<Свойство>
						<Код>7</Код>
						<Наименование>ПометкаУдаления --&gt; ПометкаУдаления</Наименование>
						<Порядок>350</Порядок>
						<Источник Имя="ПометкаУдаления" Вид="Свойство" Тип="Булево"/>
						<Приемник Имя="ПометкаУдаления" Вид="Свойство" Тип="Булево"/>
					</Свойство>
					<Свойство>
						<Код>8</Код>
						<Наименование>Родитель --&gt; Родитель</Наименование>
						<Порядок>400</Порядок>
						<Источник Имя="Родитель" Вид="Свойство" Тип="СправочникСсылка.КлассификаторБанков"/>
						<Приемник Имя="Родитель" Вид="Свойство" Тип="СправочникСсылка.Банки"/>
					</Свойство>
					<Свойство Обязательное="true">
						<Код>9</Код>
						<Наименование>ЭтоГруппа --&gt; ЭтоГруппа</Наименование>
						<Порядок>450</Порядок>
						<Источник Имя="ЭтоГруппа" Вид="Свойство" Тип="Булево"/>
						<Приемник Имя="ЭтоГруппа" Вид="Свойство" Тип="Булево"/>
					</Свойство>
				</Свойства>
				<Значения/>
			</Правило>
			<Правило>
				<Код>БанковскиеСчета</Код>
				<Наименование>Справочник: Банковские счета</Наименование>
				<Порядок>400</Порядок>
				<ПередВыгрузкой>Если ТипЗнч(Источник.Владелец) = Тип("СправочникСсылка.Организации") Тогда
	Отказ = Истина;
КонецЕсли;</ПередВыгрузкой>
				<ПоследовательностьПолейПоиска>СтрокаИменСвойствПоиска = "НомерСчета, Владелец";</ПоследовательностьПолейПоиска>
				<НеЗамещать>true</НеЗамещать>
				<СинхронизироватьПоИдентификатору>true</СинхронизироватьПоИдентификатору>
				<ПродолжитьПоискПоПолямПоискаЕслиПоИдентификаторуНеНашли>true</ПродолжитьПоискПоПолямПоискаЕслиПоИдентификаторуНеНашли>
				<Источник>СправочникСсылка.БанковскиеСчета</Источник>
				<Приемник>СправочникСсылка.БанковскиеСчета</Приемник>
				<Свойства>
					<Свойство Поиск="true">
						<Код>4</Код>
						<Наименование>НомерСчета --&gt; НомерСчета</Наименование>
						<Порядок>50</Порядок>
						<Источник Имя="НомерСчета" Вид="Реквизит" Тип="Строка"/>
						<Приемник Имя="НомерСчета" Вид="Реквизит" Тип="Строка"/>
					</Свойство>
					<Свойство Поиск="true">
						<Код>5</Код>
						<Наименование>Владелец --&gt; Владелец</Наименование>
						<Порядок>100</Порядок>
						<Источник Имя="Владелец" Вид="Свойство"/>
						<Приемник Имя="Владелец" Вид="Свойство"/>
						<КодПравилаКонвертации>Контрагенты                                       </КодПравилаКонвертации>
					</Свойство>
					<Свойство>
						<Код>1</Код>
						<Наименование>Банк --&gt; Банк</Наименование>
						<Порядок>150</Порядок>
						<Источник Имя="Банк" Вид="Реквизит" Тип="СправочникСсылка.КлассификаторБанков"/>
						<Приемник Имя="Банк" Вид="Реквизит" Тип="СправочникСсылка.Банки"/>
						<КодПравилаКонвертации>Банки                                             </КодПравилаКонвертации>
					</Свойство>
					<Свойство>
						<Код>2</Код>
						<Наименование>БанкДляРасчетов --&gt; БанкДляРасчетов</Наименование>
						<Порядок>200</Порядок>
						<Источник Имя="БанкДляРасчетов" Вид="Реквизит" Тип="СправочникСсылка.КлассификаторБанков"/>
						<Приемник Имя="БанкДляРасчетов" Вид="Реквизит" Тип="СправочникСсылка.Банки"/>
						<КодПравилаКонвертации>Банки                                             </КодПравилаКонвертации>
					</Свойство>
					<Свойство>
						<Код>3</Код>
						<Наименование>ВалютаДенежныхСредств --&gt; ВалютаДенежныхСредств</Наименование>
						<Порядок>250</Порядок>
						<Источник Имя="ВалютаДенежныхСредств" Вид="Реквизит" Тип="СправочникСсылка.Валюты"/>
						<Приемник Имя="ВалютаДенежныхСредств" Вид="Реквизит" Тип="СправочникСсылка.Валюты"/>
						<КодПравилаКонвертации>Валюты                                            </КодПравилаКонвертации>
					</Свойство>
					<Свойство>
						<Код>6</Код>
						<Наименование>Наименование --&gt; Наименование</Наименование>
						<Порядок>300</Порядок>
						<Источник Имя="Наименование" Вид="Свойство" Тип="Строка"/>
						<Приемник Имя="Наименование" Вид="Свойство" Тип="Строка"/>
					</Свойство>
					<Свойство>
						<Код>7</Код>
						<Наименование>ПометкаУдаления --&gt; ПометкаУдаления</Наименование>
						<Порядок>350</Порядок>
						<Источник Имя="ПометкаУдаления" Вид="Свойство" Тип="Булево"/>
						<Приемник Имя="ПометкаУдаления" Вид="Свойство" Тип="Булево"/>
					</Свойство>
				</Свойства>
				<Значения/>
			</Правило>
			<Правило>
				<Код>ТипыНоменклатуры</Код>
				<Наименование>Справочник: Виды номенклатуры</Наименование>
				<Порядок>450</Порядок>
				<ПоследовательностьПолейПоиска>СтрокаИменСвойствПоиска = "Наименование";</ПоследовательностьПолейПоиска>
				<НеЗамещать>true</НеЗамещать>
				<СинхронизироватьПоИдентификатору>true</СинхронизироватьПоИдентификатору>
				<ПродолжитьПоискПоПолямПоискаЕслиПоИдентификаторуНеНашли>true</ПродолжитьПоискПоПолямПоискаЕслиПоИдентификаторуНеНашли>
				<Источник>СправочникСсылка.ВидыНоменклатуры</Источник>
				<Приемник>СправочникСсылка.ТипыНоменклатуры</Приемник>
				<Свойства>
					<Свойство Поиск="true">
						<Код>2</Код>
						<Наименование>Наименование --&gt; Наименование</Наименование>
						<Порядок>50</Порядок>
						<Источник Имя="Наименование" Вид="Свойство" Тип="Строка"/>
						<Приемник Имя="Наименование" Вид="Свойство" Тип="Строка"/>
					</Свойство>
					<Свойство>
						<Код>1</Код>
						<Наименование>Код --&gt; Код</Наименование>
						<Порядок>100</Порядок>
						<Источник Имя="Код" Вид="Свойство" Тип="Строка"/>
						<Приемник Имя="Код" Вид="Свойство" Тип="Строка"/>
						<ПриводитьКДлине>8</ПриводитьКДлине>
					</Свойство>
					<Свойство>
						<Код>3</Код>
						<Наименование>ПометкаУдаления --&gt; ПометкаУдаления</Наименование>
						<Порядок>150</Порядок>
						<Источник Имя="ПометкаУдаления" Вид="Свойство" Тип="Булево"/>
						<Приемник Имя="ПометкаУдаления" Вид="Свойство" Тип="Булево"/>
					</Свойство>
					<Свойство>
						<Код>4</Код>
						<Наименование>Родитель --&gt; Родитель</Наименование>
						<Порядок>200</Порядок>
						<Источник Имя="Родитель" Вид="Свойство" Тип="СправочникСсылка.ВидыНоменклатуры"/>
						<Приемник Имя="Родитель" Вид="Свойство" Тип="СправочникСсылка.ТипыНоменклатуры"/>
						<КодПравилаКонвертации>ТипыНоменклатуры                                  </КодПравилаКонвертации>
					</Свойство>
					<Свойство Обязательное="true">
						<Код>5</Код>
						<Наименование>ЭтоГруппа --&gt; ЭтоГруппа</Наименование>
						<Порядок>250</Порядок>
						<Источник Имя="ЭтоГруппа" Вид="Свойство" Тип="Булево"/>
						<Приемник Имя="ЭтоГруппа" Вид="Свойство" Тип="Булево"/>
					</Свойство>
					<Свойство>
						<Код>6</Код>
						<Наименование>ТипНоменклатуры --&gt; ВидНоменклатуры</Наименование>
						<Порядок>300</Порядок>
						<Источник Имя="ТипНоменклатуры" Вид="Реквизит" Тип="ПеречислениеСсылка.ТипыНоменклатуры"/>
						<Приемник Имя="ВидНоменклатуры" Вид="Реквизит" Тип="ПеречислениеСсылка.ВидыНоменклатуры"/>
						<КодПравилаКонвертации>ВидыНоменклатуры                                  </КодПравилаКонвертации>
					</Свойство>
					<Свойство>
						<Код>7</Код>
						<Наименование>--&gt; ИспользованиеЕдиницИзмерения</Наименование>
						<Порядок>350</Порядок>
						<Источник Имя="" Вид=""/>
						<Приемник Имя="ИспользованиеЕдиницИзмерения" Вид="Реквизит" Тип="Число"/>
						<ПередВыгрузкой>Значение = 2;</ПередВыгрузкой>
					</Свойство>
					<Свойство>
						<Код>8</Код>
						<Наименование>--&gt; ИспользованиеХарактеристик</Наименование>
						<Порядок>400</Порядок>
						<Источник Имя="" Вид=""/>
						<Приемник Имя="ИспользованиеХарактеристик" Вид="Реквизит" Тип="Число"/>
						<ПередВыгрузкой>Значение = 3</ПередВыгрузкой>
					</Свойство>
				</Свойства>
				<Значения/>
			</Правило>
			<Правило>
				<Код>ЕдиницыИзмерения</Код>
				<Наименование>Справочник: Единицы измерения</Наименование>
				<Порядок>500</Порядок>
				<ПоследовательностьПолейПоиска>СтрокаИменСвойствПоиска = "Код";</ПоследовательностьПолейПоиска>
				<НеЗамещать>true</НеЗамещать>
				<СинхронизироватьПоИдентификатору>true</СинхронизироватьПоИдентификатору>
				<ПродолжитьПоискПоПолямПоискаЕслиПоИдентификаторуНеНашли>true</ПродолжитьПоискПоПолямПоискаЕслиПоИдентификаторуНеНашли>
				<Источник>СправочникСсылка.ЕдиницыИзмерения</Источник>
				<Приемник>СправочникСсылка.КлассификаторЕдиницИзмерения</Приемник>
				<Свойства>
					<Свойство Поиск="true">
						<Код>2</Код>
						<Наименование>Код --&gt; Код</Наименование>
						<Порядок>50</Порядок>
						<Источник Имя="Код" Вид="Свойство" Тип="Строка"/>
						<Приемник Имя="Код" Вид="Свойство" Тип="Строка"/>
						<ПриводитьКДлине>3</ПриводитьКДлине>
					</Свойство>
					<Свойство>
						<Код>1</Код>
						<Наименование>НаименованиеПолное --&gt; НаименованиеПолное</Наименование>
						<Порядок>100</Порядок>
						<Источник Имя="НаименованиеПолное" Вид="Реквизит" Тип="Строка"/>
						<Приемник Имя="НаименованиеПолное" Вид="Реквизит" Тип="Строка"/>
					</Свойство>
					<Свойство>
						<Код>3</Код>
						<Наименование>Наименование --&gt; Наименование</Наименование>
						<Порядок>150</Порядок>
						<Источник Имя="Наименование" Вид="Свойство" Тип="Строка"/>
						<Приемник Имя="Наименование" Вид="Свойство" Тип="Строка"/>
					</Свойство>
					<Свойство>
						<Код>4</Код>
						<Наименование>ПометкаУдаления --&gt; ПометкаУдаления</Наименование>
						<Порядок>200</Порядок>
						<Источник Имя="ПометкаУдаления" Вид="Свойство" Тип="Булево"/>
						<Приемник Имя="ПометкаУдаления" Вид="Свойство" Тип="Булево"/>
					</Свойство>
				</Свойства>
				<Значения/>
			</Правило>
			<Правило>
				<Код>Номенклатура</Код>
				<Наименование>Справочник: Номенклатура</Наименование>
				<Порядок>550</Порядок>
				<ПослеЗагрузки>Если НЕ Объект.ЭтоГруппа Тогда
	
	Если НЕ ЗначениеЗаполнено(Объект.ВидНоменклатуры) И ЗначениеЗаполнено(Объект.ТипНоменклатуры.ВидНоменклатуры) Тогда
		 Объект.ВидНоменклатуры = Объект.ТипНоменклатуры.ВидНоменклатуры;
	КонецЕсли;
	
	Если НЕ ЗначениеЗаполнено(Объект.ВалютаУчета) Тогда
		Объект.ВалютаУчета = Константы.ВалютаРегламентированногоУчетаОрганизаций.Получить();
	КонецЕсли;
	
	Если НЕ ЗначениеЗаполнено(Объект.ОсновнаяЕдиницаИзмерения) Тогда
		Объект.ОбменДанными.Загрузка = Истина;
		Объект.Записать();
		Объект.ОсновнаяЕдиницаИзмерения = Объект.ПолучитьЕдиницуИзмеренияПоБазовой();
	КонецЕсли;
	
КонецЕсли;</ПослеЗагрузки>
				<ПоследовательностьПолейПоиска>Если НомерВариантаПоиска = 1 Тогда
	Если ЗначениеЗаполнено(СвойстваПоиска.Получить("Артикул")) Тогда
		СтрокаИменСвойствПоиска = "Артикул";
	Иначе
		СтрокаИменСвойствПоиска = "Наименование, Родитель, ЭтоГруппа";
	КонецЕсли;
ИначеЕсли НомерВариантаПоиска = 2 Тогда
	СтрокаИменСвойствПоиска = "Наименование, ЭтоГруппа";
КонецЕсли;</ПоследовательностьПолейПоиска>
				<НеЗамещать>true</НеЗамещать>
				<СинхронизироватьПоИдентификатору>true</СинхронизироватьПоИдентификатору>
				<ПродолжитьПоискПоПолямПоискаЕслиПоИдентификаторуНеНашли>true</ПродолжитьПоискПоПолямПоискаЕслиПоИдентификаторуНеНашли>
				<ГенерироватьНовыйНомерИлиКодЕслиНеУказан>true</ГенерироватьНовыйНомерИлиКодЕслиНеУказан>
				<Источник>СправочникСсылка.Номенклатура</Источник>
				<Приемник>СправочникСсылка.Номенклатура</Приемник>
				<Свойства>
					<Свойство Поиск="true">
						<Код>1</Код>
						<Наименование>Артикул --&gt; Артикул</Наименование>
						<Порядок>50</Порядок>
						<Источник Имя="Артикул" Вид="Реквизит" Тип="Строка"/>
						<Приемник Имя="Артикул" Вид="Реквизит" Тип="Строка"/>
					</Свойство>
					<Свойство Поиск="true">
						<Код>6</Код>
						<Наименование>Наименование --&gt; Наименование</Наименование>
						<Порядок>100</Порядок>
						<Источник Имя="Наименование" Вид="Свойство" Тип="Строка"/>
						<Приемник Имя="Наименование" Вид="Свойство" Тип="Строка"/>
					</Свойство>
					<Свойство Поиск="true">
						<Код>8</Код>
						<Наименование>Родитель --&gt; Родитель</Наименование>
						<Порядок>150</Порядок>
						<Источник Имя="Родитель" Вид="Свойство" Тип="СправочникСсылка.Номенклатура"/>
						<Приемник Имя="Родитель" Вид="Свойство" Тип="СправочникСсылка.Номенклатура"/>
						<КодПравилаКонвертации>Номенклатура                                      </КодПравилаКонвертации>
					</Свойство>
					<Свойство Поиск="true" Обязательное="true">
						<Код>9</Код>
						<Наименование>ЭтоГруппа --&gt; ЭтоГруппа</Наименование>
						<Порядок>200</Порядок>
						<Источник Имя="ЭтоГруппа" Вид="Свойство" Тип="Булево"/>
						<Приемник Имя="ЭтоГруппа" Вид="Свойство" Тип="Булево"/>
					</Свойство>
					<Свойство>
						<Код>5</Код>
						<Наименование>Код --&gt; Код</Наименование>
						<Порядок>250</Порядок>
						<Источник Имя="Код" Вид="Свойство" Тип="Строка"/>
						<Приемник Имя="Код" Вид="Свойство" Тип="Строка"/>
						<ПриводитьКДлине>8</ПриводитьКДлине>
					</Свойство>
					<Свойство>
						<Код>3</Код>
						<Наименование>НаименованиеПолное --&gt; НаименованиеПолное</Наименование>
						<Порядок>300</Порядок>
						<Источник Имя="НаименованиеПолное" Вид="Реквизит" Тип="Строка"/>
						<Приемник Имя="НаименованиеПолное" Вид="Реквизит" Тип="Строка"/>
					</Свойство>
					<Свойство>
						<Код>2</Код>
						<Наименование>ВидНоменклатуры --&gt; ТипНоменклатуры</Наименование>
						<Порядок>350</Порядок>
						<Источник Имя="ВидНоменклатуры" Вид="Реквизит" Тип="СправочникСсылка.ВидыНоменклатуры"/>
						<Приемник Имя="ТипНоменклатуры" Вид="Реквизит" Тип="СправочникСсылка.ТипыНоменклатуры"/>
						<КодПравилаКонвертации>ТипыНоменклатуры                                  </КодПравилаКонвертации>
					</Свойство>
					<Свойство>
						<Код>4</Код>
						<Наименование>СтавкаНДС --&gt; СтавкаНДС</Наименование>
						<Порядок>400</Порядок>
						<Источник Имя="СтавкаНДС" Вид="Реквизит" Тип="ПеречислениеСсылка.СтавкиНДС"/>
						<Приемник Имя="СтавкаНДС" Вид="Реквизит" Тип="СправочникСсылка.СтавкиНДС"/>
						<КодПравилаКонвертации>СтавкиНДС                                         </КодПравилаКонвертации>
						<ПередВыгрузкой>Если Источник.ЭтоГруппа Тогда
	Отказ = Истина;
Иначе
	СтавкаНДС = Строка(Источник.СтавкаНДС);
	ИсходящиеДанные = Новый Структура;
	ИсходящиеДанные.Вставить("Наименование", СтавкаНДС);
КонецЕсли;</ПередВыгрузкой>
					</Свойство>
					<Свойство>
						<Код>10</Код>
						<Наименование>ЕдиницаИзмерения --&gt; БазоваяЕдиницаИзмерения</Наименование>
						<Порядок>450</Порядок>
						<Источник Имя="ЕдиницаИзмерения" Вид="Реквизит" Тип="СправочникСсылка.ЕдиницыИзмерения"/>
						<Приемник Имя="БазоваяЕдиницаИзмерения" Вид="Реквизит" Тип="СправочникСсылка.КлассификаторЕдиницИзмерения"/>
						<КодПравилаКонвертации>ЕдиницыИзмерения                                  </КодПравилаКонвертации>
					</Свойство>
					<Свойство>
						<Код>7</Код>
						<Наименование>ПометкаУдаления --&gt; ПометкаУдаления</Наименование>
						<Порядок>500</Порядок>
						<Источник Имя="ПометкаУдаления" Вид="Свойство" Тип="Булево"/>
						<Приемник Имя="ПометкаУдаления" Вид="Свойство" Тип="Булево"/>
					</Свойство>
				</Свойства>
				<Значения/>
			</Правило>
			<Правило>
				<Код>ХарактеристикиНоменклатуры</Код>
				<Наименование>Справочник: Характеристики номенклатуры</Наименование>
				<Порядок>600</Порядок>
				<ПередВыгрузкой>Если ВходящиеДанные = Неопределено
	ИЛИ НЕ ВходящиеДанные.Свойство("Владелец")
	ИЛИ НЕ ЗначениеЗаполнено(ВходящиеДанные.Владелец) Тогда
	Отказ = Истина;
КонецЕсли;</ПередВыгрузкой>
				<ПоследовательностьПолейПоиска>Если НомерВариантаПоиска = 1 Тогда
	СтрокаИменСвойствПоиска = "Владелец, Наименование";
Иначе
	ПрекратитьПоиск = Истина;
	Характеристика = Справочники.ХарактеристикиНоменклатуры.СоздатьЭлемент();
	Идентификатор = СвойстваПоиска.Получить("{УникальныйИдентификатор}");
	Если Идентификатор &lt;&gt; Неопределено Тогда
		НовыйУникальныйИдентификатор = Новый УникальныйИдентификатор(Идентификатор);
		НоваяСсылка = Справочники.ХарактеристикиНоменклатуры.ПолучитьСсылку(НовыйУникальныйИдентификатор);
		Характеристика.УстановитьСсылкуНового(НоваяСсылка);
	КонецЕсли;
	Характеристика.Владелец = СвойстваПоиска.Получить("Владелец");
	Характеристика.Наименование = СвойстваПоиска.Получить("Наименование");
	Характеристика.ОбменДанными.Загрузка = Истина;
	Попытка
		Характеристика.Записать();
		СсылкаНаОбъект = Характеристика.Ссылка;
	Исключение
		ТекстОшибки = СтрШаблон(
			НСтр("ru = 'Не удалось загрузить характеристику номенклатуры ""%1"".'"), Характеристика.Наименование)
				+ Символы.ПС + ПодробноеПредставлениеОшибки(ИнформацияОбОшибке());
		ЗаписьЖурналаРегистрации(НСтр("ru = 'Загрузка характеристик номенклатуры.'"),
			УровеньЖурналаРегистрации.Ошибка,
			Характеристика.Метаданные(),,
			ТекстОшибки);
	КонецПопытки;
КонецЕсли;</ПоследовательностьПолейПоиска>
				<НеЗамещать>true</НеЗамещать>
				<СинхронизироватьПоИдентификатору>true</СинхронизироватьПоИдентификатору>
				<ПродолжитьПоискПоПолямПоискаЕслиПоИдентификаторуНеНашли>true</ПродолжитьПоискПоПолямПоискаЕслиПоИдентификаторуНеНашли>
				<Источник>СправочникСсылка.ХарактеристикиНоменклатуры</Источник>
				<Приемник>СправочникСсылка.ХарактеристикиНоменклатуры</Приемник>
				<Свойства>
					<Свойство Поиск="true">
						<Код>1</Код>
						<Наименование>--&gt; Владелец</Наименование>
						<Порядок>50</Порядок>
						<ПолучитьИзВходящихДанных>true</ПолучитьИзВходящихДанных>
						<Источник Имя="" Вид=""/>
						<Приемник Имя="Владелец" Вид="Свойство"/>
						<КодПравилаКонвертации>Номенклатура                                      </КодПравилаКонвертации>
					</Свойство>
					<Свойство Поиск="true">
						<Код>2</Код>
						<Наименование>Наименование --&gt; Наименование</Наименование>
						<Порядок>100</Порядок>
						<Источник Имя="Наименование" Вид="Свойство" Тип="Строка"/>
						<Приемник Имя="Наименование" Вид="Свойство" Тип="Строка"/>
					</Свойство>
				</Свойства>
				<Значения/>
			</Правило>
			<Правило>
				<Код>ГТД</Код>
				<Наименование>:</Наименование>
				<Порядок>650</Порядок>
				<ПослеЗагрузки>Если Объект.ЭтоНовый() Тогда
	
	Если НЕ ЗначениеЗаполнено(Объект.Код) Тогда
		Объект.УстановитьНовыйКод();
	КонецЕсли;
	
КонецЕсли;</ПослеЗагрузки>
				<ПоследовательностьПолейПоиска>СтрокаИменСвойствПоиска = "Наименование";</ПоследовательностьПолейПоиска>
				<НеЗамещать>true</НеЗамещать>
				<СинхронизироватьПоИдентификатору>true</СинхронизироватьПоИдентификатору>
				<Приемник>СправочникСсылка.ГТД</Приемник>
				<Свойства>
					<Свойство Поиск="true">
						<Код>2</Код>
						<Наименование>--&gt; Наименование</Наименование>
						<Порядок>50</Порядок>
						<Источник Имя="" Вид=""/>
						<Приемник Имя="Наименование" Вид="Свойство" Тип="Строка"/>
					</Свойство>
					<Свойство>
						<Код>1</Код>
						<Наименование>--&gt; Страна</Наименование>
						<Порядок>100</Порядок>
						<Источник Имя="" Вид=""/>
						<Приемник Имя="Страна" Вид="Реквизит" Тип="СправочникСсылка.КлассификаторСтранМира"/>
					</Свойство>
				</Свойства>
				<Значения/>
			</Правило>
		</Группа>
		<Группа>
			<Код>Документы</Код>
			<Наименование>Документы</Наименование>
			<Порядок>150</Порядок>
			<Правило>
				<Код>ПоступлениеТоваров</Код>
				<Наименование>Документ: Поступление (акты, накладные)</Наименование>
				<Порядок>50</Порядок>
				<ПередВыгрузкой>Запрос = Новый Запрос;
Запрос.Текст =  
"ВЫБРАТЬ
|	ПоступлениеТоваровУслугТовары.НаименованиеПоставщика КАК НаименованиеПоставщика,
|	ПоступлениеТоваровУслугТовары.Номенклатура КАК Номенклатура,
|	ПоступлениеТоваровУслугТовары.Характеристика КАК Характеристика,
|	ПоступлениеТоваровУслугТовары.ЕдиницаИзмерения КАК ЕдиницаИзмерения,
|	ПоступлениеТоваровУслугТовары.Количество КАК Количество,
|	ПоступлениеТоваровУслугТовары.Цена КАК Цена,
|	ПоступлениеТоваровУслугТовары.Сумма КАК Сумма,
|	ПоступлениеТоваровУслугТовары.СтавкаНДС КАК СтавкаНДС,
|	ПоступлениеТоваровУслугТовары.СуммаНДС КАК СуммаНДС,
|	ПоступлениеТоваровУслугТовары.НомерГТД КАК НомерГТД,
|	ПоступлениеТоваровУслугТовары.СтранаПроисхождения КАК СтранаПроисхождения,
|	ПоступлениеТоваровУслугТовары.ИдентификаторСтроки КАК ИдентификаторСтроки
|ПОМЕСТИТЬ ВТ_Товары
|ИЗ
|	Документ.ПоступлениеТоваровУслуг.Товары КАК ПоступлениеТоваровУслугТовары
|ГДЕ
|	ПоступлениеТоваровУслугТовары.Ссылка = &amp;Ссылка
|;
|
|////////////////////////////////////////////////////////////////////////////////
|ВЫБРАТЬ
|	ВТ_Товары.НаименованиеПоставщика КАК НаименованиеПоставщика,
|	ВТ_Товары.Номенклатура КАК Номенклатура,
|	ВТ_Товары.Характеристика КАК Характеристика,
|	ЕСТЬNULL(ЕдиницыИзмерения.Код, """") КАК КодЕдиницыИзмеренияПоКлассификатору,
|	ВТ_Товары.Количество КАК Количество,
|	ВТ_Товары.Цена КАК Цена,
|	ВТ_Товары.Сумма КАК Сумма,
|	ВТ_Товары.СтавкаНДС КАК СтавкаНДС,
|	ВТ_Товары.СуммаНДС КАК СуммаНДС,
|	ВТ_Товары.НомерГТД КАК НомерГТД,
|	ВТ_Товары.СтранаПроисхождения КАК СтранаПроисхождения,
|	ЕСТЬNULL(ВидыНоменклатуры.ТипНоменклатуры, """") КАК ТипНоменклатуры,
|	ВТ_Товары.ИдентификаторСтроки КАК ИдентификаторСтроки
|ПОМЕСТИТЬ ВТ_ТоварыВидыНоменклатуры
|ИЗ
|	ВТ_Товары КАК ВТ_Товары
|		ЛЕВОЕ СОЕДИНЕНИЕ Справочник.Номенклатура КАК ТаблицаНоменклатуры
|		ПО ВТ_Товары.Номенклатура = ТаблицаНоменклатуры.Ссылка
|		ЛЕВОЕ СОЕДИНЕНИЕ Справочник.ВидыНоменклатуры КАК ВидыНоменклатуры
|		ПО (ТаблицаНоменклатуры.ВидНоменклатуры = ВидыНоменклатуры.Ссылка)
|		ЛЕВОЕ СОЕДИНЕНИЕ Справочник.ЕдиницыИзмерения КАК ЕдиницыИзмерения
|		ПО ВТ_Товары.ЕдиницаИзмерения = ЕдиницыИзмерения.Ссылка
|;
|
|////////////////////////////////////////////////////////////////////////////////
|ВЫБРАТЬ
|	ВТ_ТоварыВидыНоменклатуры.НаименованиеПоставщика КАК НаименованиеПоставщика,
|	ВТ_ТоварыВидыНоменклатуры.Номенклатура КАК Номенклатура,
|	ВТ_ТоварыВидыНоменклатуры.Характеристика КАК ХарактеристикаНоменклатуры,
|	ВТ_ТоварыВидыНоменклатуры.КодЕдиницыИзмеренияПоКлассификатору КАК КодЕдиницыИзмеренияПоКлассификатору,
|	ВТ_ТоварыВидыНоменклатуры.Количество КАК Количество,
|	ВТ_ТоварыВидыНоменклатуры.Количество КАК КоличествоБазовое,
|	ВТ_ТоварыВидыНоменклатуры.Цена КАК Цена,
|	ВТ_ТоварыВидыНоменклатуры.Сумма КАК Сумма,
|	ВТ_ТоварыВидыНоменклатуры.СтавкаНДС КАК СтавкаНДС,
|	ВТ_ТоварыВидыНоменклатуры.СуммаНДС КАК СуммаНДС,
|	ВТ_ТоварыВидыНоменклатуры.НомерГТД КАК НомерГТД,
|	ВТ_ТоварыВидыНоменклатуры.СтранаПроисхождения КАК СтранаПроисхождения,
|	ВТ_ТоварыВидыНоменклатуры.ИдентификаторСтроки КАК ИдентификаторТовара
|ИЗ
|	ВТ_ТоварыВидыНоменклатуры КАК ВТ_ТоварыВидыНоменклатуры
|;
|
|////////////////////////////////////////////////////////////////////////////////
|ВЫБРАТЬ
|	ПоступлениеТоваровУслугКодыУпаковокМаркируемойПродукции.НомерУпаковки КАК КодМаркировки,
|	ПоступлениеТоваровУслугКодыУпаковокМаркируемойПродукции.ИдентификаторСтроки КАК ИдентификаторТовара
|ИЗ
|	Документ.ПоступлениеТоваровУслуг.КодыУпаковокМаркируемойПродукции КАК ПоступлениеТоваровУслугКодыУпаковокМаркируемойПродукции
|ГДЕ
|	ПоступлениеТоваровУслугКодыУпаковокМаркируемойПродукции.Ссылка = &amp;Ссылка";
Запрос.УстановитьПараметр("Ссылка", Источник.Ссылка);

РезультатыЗапроса = Запрос.ВыполнитьПакет();

ВходящиеДанные = Новый Структура;
ВходящиеДанные.Вставить("Товары", РезультатыЗапроса[2].Выгрузить());
ВходящиеДанные.Вставить("КодыМаркировки", РезультатыЗапроса[3].Выгрузить());</ПередВыгрузкой>
				<ПослеЗагрузки>Выполнить(Алгоритмы.ЗаполнитьЕдиницыИзмеренияГТД);

Объект.Проведен = Ложь;

Объект.ХозОперация = Справочники.ХозОперации.ПоступлениеТоваров;

Если НЕ ЗначениеЗаполнено(Объект.Автор) Тогда
	Объект.Автор = ПараметрыСеанса.Пользователь;
КонецЕсли;

Если НЕ ЗначениеЗаполнено(Объект.Организация) Тогда
	Объект.Организация = ПараметрыСеанса.Организация;
КонецЕсли;

Если НЕ ЗначениеЗаполнено(Объект.ПодразделениеКомпании) Тогда
	Объект.ПодразделениеКомпании = ПараметрыСеанса.ПодразделениеКомпании;
КонецЕсли;

Если НЕ ЗначениеЗаполнено(Объект.СкладКомпании) Тогда
	Объект.СкладКомпании = обПраво("ОсновнойСкладКомпании",,,Объект);
КонецЕсли;

Если НЕ ЗначениеЗаполнено(Объект.ДоговорВзаиморасчетов)
	И ЗначениеЗаполнено(Объект.Контрагент) Тогда
	
	ВидДоговора = Перечисления.ВидыДоговоров.Покупка;
	ДопПараметры = Новый Структура();
	ДопПараметры.Вставить("ВидДоговора",ВидДоговора);
	
	Объект.ДоговорВзаиморасчетов = 
		Справочники.Контрагенты.ПолучитьДоговорВзаиморасчетов(Объект.Контрагент, ВидДоговора, Объект, ДопПараметры, Истина);
	
КонецЕсли;

Если НЕ ЗначениеЗаполнено(Объект.ВалютаДокумента) Тогда
	Если ЗначениеЗаполнено(Объект.ДоговорВзаиморасчетов) Тогда
		Объект.ВалютаДокумента = Объект.ДоговорВзаиморасчетов.ВалютаВзаиморасчетов;
	Иначе
		Объект.ВалютаДокумента = Константы.ВалютаРегламентированногоУчетаОрганизаций.Получить();
	КонецЕсли;
КонецЕсли;

СтруктураКурса = обКурсДляВалюты(Объект.ВалютаДокумента, Объект.Дата);
Объект.КурсДокумента = СтруктураКурса.Курс/?(СтруктураКурса.Кратность = 0, 1, СтруктураКурса.Кратность);

Объект.ТипЦен = обПраво("ОсновнойТипЦенЗакупки",,,Объект);

ТипЦенВключаетНДС = Объект.ТипЦен.ЦенаВключаетНДС;

Для Каждого ТекущаяСтрока Из Объект.Товары Цикл
	
	Если НЕ ЗначениеЗаполнено(ТекущаяСтрока.ИдентификаторТовара) Тогда
		ТекущаяСтрока.ИдентификаторТовара = Новый УникальныйИдентификатор;
	КонецЕсли;
	
	ТекущаяСтрока.СуммаВсего = ТекущаяСтрока.Сумма + ТекущаяСтрока.СуммаНДС;
	
	Если ТипЦенВключаетНДС Тогда
		ТекущаяСтрока.Сумма = ТекущаяСтрока.Сумма + ТекущаяСтрока.СуммаНДС;
		ТекущаяСтрока.Цена  = ?(ТекущаяСтрока.Количество = 0, 0, ТекущаяСтрока.Сумма / ТекущаяСтрока.Количество);
	КонецЕсли;
	
КонецЦикла;</ПослеЗагрузки>
				<НеЗамещать>true</НеЗамещать>
				<СинхронизироватьПоИдентификатору>true</СинхронизироватьПоИдентификатору>
				<ПриПереносеОбъектаПоСсылкеУстанавливатьТолькоGIUD>true</ПриПереносеОбъектаПоСсылкеУстанавливатьТолькоGIUD>
				<Источник>ДокументСсылка.ПоступлениеТоваровУслуг</Источник>
				<Приемник>ДокументСсылка.ПоступлениеТоваров</Приемник>
				<Свойства>
					<Группа>
						<Код>22</Код>
						<Наименование>--&gt; КодыМаркировки</Наименование>
						<Порядок>50</Порядок>
						<ПолучитьИзВходящихДанных>true</ПолучитьИзВходящихДанных>
						<Источник Имя="" Вид=""/>
						<Приемник Имя="КодыМаркировки" Вид="ТабличнаяЧасть"/>
						<Свойство>
							<Код>24</Код>
							<Наименование>--&gt; КодМаркировки</Наименование>
							<Порядок>50</Порядок>
							<Источник Имя="" Вид=""/>
							<Приемник Имя="КодМаркировки" Вид="Реквизит" Тип="Строка"/>
						</Свойство>
						<Свойство>
							<Код>23</Код>
							<Наименование>--&gt; ИдентификаторТовара</Наименование>
							<Порядок>100</Порядок>
							<Источник Имя="" Вид=""/>
							<Приемник Имя="ИдентификаторТовара" Вид="Реквизит" Тип="Строка"/>
						</Свойство>
					</Группа>
					<Группа>
						<Код>9</Код>
						<Наименование>--&gt; Товары</Наименование>
						<Порядок>100</Порядок>
						<ПолучитьИзВходящихДанных>true</ПолучитьИзВходящихДанных>
						<Источник Имя="" Вид=""/>
						<Приемник Имя="Товары" Вид="ТабличнаяЧасть"/>
						<Свойство>
							<Код>21</Код>
							<Наименование>--&gt; Номенклатура</Наименование>
							<Порядок>50</Порядок>
							<Источник Имя="" Вид=""/>
							<Приемник Имя="Номенклатура" Вид="Реквизит" Тип="СправочникСсылка.Номенклатура"/>
							<КодПравилаКонвертации>Номенклатура                                      </КодПравилаКонвертации>
							<ПередВыгрузкой>Значение = ОбъектКоллекции.Номенклатура;</ПередВыгрузкой>
						</Свойство>
						<Свойство>
							<Код>20</Код>
							<Наименование>--&gt; ХарактеристикаНоменклатуры</Наименование>
							<Порядок>100</Порядок>
							<Источник Имя="" Вид=""/>
							<Приемник Имя="ХарактеристикаНоменклатуры" Вид="Реквизит" Тип="СправочникСсылка.ХарактеристикиНоменклатуры"/>
							<КодПравилаКонвертации>ХарактеристикиНоменклатуры                        </КодПравилаКонвертации>
							<ПередВыгрузкой>ИсходящиеДанные = Новый Структура;
ИсходящиеДанные.Вставить("Владелец", ОбъектКоллекции.Номенклатура);</ПередВыгрузкой>
						</Свойство>
						<Свойство>
							<Код>19</Код>
							<Наименование>--&gt; Количество</Наименование>
							<Порядок>150</Порядок>
							<Источник Имя="" Вид=""/>
							<Приемник Имя="Количество" Вид="Реквизит" Тип="Число"/>
						</Свойство>
						<Свойство>
							<Код>18</Код>
							<Наименование>--&gt; КоличествоБазовое</Наименование>
							<Порядок>200</Порядок>
							<Источник Имя="" Вид=""/>
							<Приемник Имя="КоличествоБазовое" Вид="Реквизит" Тип="Число"/>
						</Свойство>
						<Свойство>
							<Код>17</Код>
							<Наименование>--&gt; Цена</Наименование>
							<Порядок>250</Порядок>
							<Источник Имя="" Вид=""/>
							<Приемник Имя="Цена" Вид="Реквизит" Тип="Число"/>
						</Свойство>
						<Свойство>
							<Код>16</Код>
							<Наименование>--&gt; Сумма</Наименование>
							<Порядок>300</Порядок>
							<Источник Имя="" Вид=""/>
							<Приемник Имя="Сумма" Вид="Реквизит" Тип="Число"/>
						</Свойство>
						<Свойство>
							<Код>15</Код>
							<Наименование>--&gt; СтавкаНДС</Наименование>
							<Порядок>350</Порядок>
							<Источник Имя="" Вид=""/>
							<Приемник Имя="СтавкаНДС" Вид="Реквизит" Тип="СправочникСсылка.СтавкиНДС"/>
							<КодПравилаКонвертации>СтавкиНДС                                         </КодПравилаКонвертации>
							<ПередВыгрузкой>СтавкаНДС = Строка(ОбъектКоллекции.СтавкаНДС);
ИсходящиеДанные = Новый Структура;
ИсходящиеДанные.Вставить("Наименование", СтавкаНДС);</ПередВыгрузкой>
						</Свойство>
						<Свойство>
							<Код>14</Код>
							<Наименование>--&gt; СуммаНДС</Наименование>
							<Порядок>400</Порядок>
							<Источник Имя="" Вид=""/>
							<Приемник Имя="СуммаНДС" Вид="Реквизит" Тип="Число"/>
						</Свойство>
						<Свойство>
							<Код>13</Код>
							<Наименование>--&gt; КодЕдиницыИзмеренияПоКлассификатору</Наименование>
							<Порядок>450</Порядок>
							<Источник Имя="" Вид=""/>
							<Приемник Имя="" Вид=""/>
							<ИмяПараметраДляПередачи>КодЕдиницыИзмеренияПоКлассификатору</ИмяПараметраДляПередачи>
							<ПередВыгрузкой>Значение = ОбъектКоллекции.КодЕдиницыИзмеренияПоКлассификатору;</ПередВыгрузкой>
						</Свойство>
						<Свойство>
							<Код>12</Код>
							<Наименование>--&gt; НомерГТД</Наименование>
							<Порядок>500</Порядок>
							<Источник Имя="" Вид=""/>
							<Приемник Имя="" Вид=""/>
							<ИмяПараметраДляПередачи>НомерГТД</ИмяПараметраДляПередачи>
							<ПередВыгрузкой>Значение = ОбъектКоллекции.НомерГТД;</ПередВыгрузкой>
						</Свойство>
						<Свойство>
							<Код>11</Код>
							<Наименование>--&gt; СтранаПроисхождения</Наименование>
							<Порядок>550</Порядок>
							<Источник Имя="" Вид=""/>
							<Приемник Имя="" Вид=""/>
							<ИмяПараметраДляПередачи>СтранаПроисхождения</ИмяПараметраДляПередачи>
							<ПередВыгрузкой>Значение = ОбъектКоллекции.СтранаПроисхождения;</ПередВыгрузкой>
						</Свойство>
						<Свойство>
							<Код>10</Код>
							<Наименование>--&gt; ИдентификаторТовара</Наименование>
							<Порядок>600</Порядок>
							<Источник Имя="" Вид=""/>
							<Приемник Имя="ИдентификаторТовара" Вид="Реквизит" Тип="Строка"/>
						</Свойство>
					</Группа>
					<Свойство Поиск="true">
						<Код>4</Код>
						<Наименование>Дата --&gt; Дата</Наименование>
						<Порядок>150</Порядок>
						<Источник Имя="Дата" Вид="Свойство" Тип="Дата"/>
						<Приемник Имя="Дата" Вид="Свойство" Тип="Дата"/>
					</Свойство>
					<Свойство Поиск="true">
						<Код>5</Код>
						<Наименование>Номер --&gt; Номер</Наименование>
						<Порядок>200</Порядок>
						<Источник Имя="Номер" Вид="Свойство" Тип="Строка"/>
						<Приемник Имя="Номер" Вид="Свойство" Тип="Строка"/>
						<ПриводитьКДлине>10</ПриводитьКДлине>
					</Свойство>
					<Свойство>
						<Код>1</Код>
						<Наименование>Контрагент --&gt; Контрагент</Наименование>
						<Порядок>250</Порядок>
						<Источник Имя="Контрагент" Вид="Реквизит" Тип="СправочникСсылка.Контрагенты"/>
						<Приемник Имя="Контрагент" Вид="Реквизит" Тип="СправочникСсылка.Контрагенты"/>
						<КодПравилаКонвертации>Контрагенты                                       </КодПравилаКонвертации>
					</Свойство>
					<Свойство>
						<Код>2</Код>
						<Наименование>Организация --&gt; Организация</Наименование>
						<Порядок>300</Порядок>
						<Источник Имя="Организация" Вид="Реквизит" Тип="СправочникСсылка.Организации"/>
						<Приемник Имя="Организация" Вид="Реквизит" Тип="СправочникСсылка.Организации"/>
						<КодПравилаКонвертации>Организации                                       </КодПравилаКонвертации>
					</Свойство>
					<Свойство>
						<Код>3</Код>
						<Наименование>--&gt; СуммаДокумента</Наименование>
						<Порядок>350</Порядок>
						<Источник Имя="" Вид=""/>
						<Приемник Имя="СуммаДокумента" Вид="Реквизит" Тип="Число"/>
					</Свойство>
					<Свойство>
						<Код>7</Код>
						<Наименование>Валюта --&gt; ВалютаДокумента</Наименование>
						<Порядок>400</Порядок>
						<Источник Имя="Валюта" Вид="Реквизит" Тип="СправочникСсылка.Валюты"/>
						<Приемник Имя="ВалютаДокумента" Вид="Реквизит" Тип="СправочникСсылка.Валюты"/>
						<КодПравилаКонвертации>Валюты                                            </КодПравилаКонвертации>
					</Свойство>
					<Свойство>
						<Код>8</Код>
						<Наименование>ДоговорКонтрагента --&gt; ДоговорВзаиморасчетов</Наименование>
						<Порядок>450</Порядок>
						<Источник Имя="ДоговорКонтрагента" Вид="Реквизит" Тип="СправочникСсылка.ДоговорыКонтрагентов"/>
						<Приемник Имя="ДоговорВзаиморасчетов" Вид="Реквизит" Тип="СправочникСсылка.ДоговорыВзаиморасчетов"/>
						<КодПравилаКонвертации>ДоговорыВзаиморасчетов                            </КодПравилаКонвертации>
					</Свойство>
					<Свойство>
						<Код>6</Код>
						<Наименование>ПометкаУдаления --&gt; ПометкаУдаления</Наименование>
						<Порядок>550</Порядок>
						<Источник Имя="ПометкаУдаления" Вид="Свойство" Тип="Булево"/>
						<Приемник Имя="ПометкаУдаления" Вид="Свойство" Тип="Булево"/>
					</Свойство>
					<Свойство>
						<Код>25</Код>
						<Наименование>ДокументОснование --&gt; ДокументОснование</Наименование>
						<Порядок>600</Порядок>
						<Источник Имя="ДокументОснование" Вид="Реквизит" Тип="ДокументСсылка.ПоступлениеТоваровУслуг"/>
						<Приемник Имя="ДокументОснование" Вид="Реквизит"/>
					</Свойство>
					<Свойство>
						<Код>26</Код>
						<Наименование>Комментарий --&gt; Комментарий</Наименование>
						<Порядок>650</Порядок>
						<Источник Имя="Комментарий" Вид="Реквизит" Тип="Строка"/>
						<Приемник Имя="Комментарий" Вид="Реквизит" Тип="Строка"/>
					</Свойство>
					<Свойство>
						<Код>27</Код>
						<Наименование>Проведен --&gt; Проведен</Наименование>
						<Порядок>700</Порядок>
						<Источник Имя="Проведен" Вид="Свойство" Тип="Булево"/>
						<Приемник Имя="Проведен" Вид="Свойство" Тип="Булево"/>
					</Свойство>
					<Свойство>
						<Код>28</Код>
						<Наименование>ДатаЭД --&gt; ВхДокДата</Наименование>
						<Порядок>750</Порядок>
						<Источник Имя="ДатаЭД" Вид="Реквизит" Тип="Дата"/>
						<Приемник Имя="ВхДокДата" Вид="Реквизит" Тип="Дата"/>
					</Свойство>
					<Свойство>
						<Код>29</Код>
						<Наименование>НомерЭД --&gt; ВхДокНомер</Наименование>
						<Порядок>800</Порядок>
						<Источник Имя="НомерЭД" Вид="Реквизит" Тип="Строка"/>
						<Приемник Имя="ВхДокНомер" Вид="Реквизит" Тип="Строка"/>
					</Свойство>
				</Свойства>
				<Значения/>
			</Правило>
			<Правило>
				<Код>КорректировкаПоступления</Код>
				<Наименование>Документ: Поступление (акты, накладные)</Наименование>
				<Порядок>100</Порядок>
				<ПередВыгрузкой>Запрос = Новый Запрос;
Запрос.Текст = 
"ВЫБРАТЬ
|	ПоступлениеТоваровУслугТовары.НаименованиеПоставщика КАК НаименованиеПоставщика,
|	ПоступлениеТоваровУслугТовары.Номенклатура КАК Номенклатура,
|	ПоступлениеТоваровУслугТовары.Характеристика КАК Характеристика,
|	ПоступлениеТоваровУслугТовары.ЕдиницаИзмерения КАК ЕдиницаИзмерения,
|	ПоступлениеТоваровУслугТовары.Количество КАК Количество,
|	ПоступлениеТоваровУслугТовары.Цена КАК Цена,
|	ПоступлениеТоваровУслугТовары.Сумма КАК Сумма,
|	ПоступлениеТоваровУслугТовары.СтавкаНДС КАК СтавкаНДС,
|	ПоступлениеТоваровУслугТовары.СуммаНДС КАК СуммаНДС,
|	ПоступлениеТоваровУслугТовары.НомерГТД КАК НомерГТД,
|	ПоступлениеТоваровУслугТовары.СтранаПроисхождения КАК СтранаПроисхождения,
|	ПоступлениеТоваровУслугТовары.ИдентификаторСтроки КАК ИдентификаторСтроки,
|	ПоступлениеТоваровУслугТовары.КоличествоДоКорректировки КАК КоличествоДоКорректировки,
|	ПоступлениеТоваровУслугТовары.ЦенаДоКорректировки КАК ЦенаДоКорректировки,
|	ПоступлениеТоваровУслугТовары.СтавкаНДСДоКорректировки КАК СуммаДоКорректировки,
|	ПоступлениеТоваровУслугТовары.СтавкаНДСДоКорректировки КАК СтавкаНДСДоКорректировки,
|	ПоступлениеТоваровУслугТовары.СуммаНДСДоКорректировки КАК СуммаНДСДоКорректировки,
|	ПоступлениеТоваровУслугТовары.СуммаСНДС КАК СуммаВсего,
|	ПоступлениеТоваровУслугТовары.СуммаСНДСДоКорректировки КАК СуммаВсегоДоКорректировки
|ПОМЕСТИТЬ ВТ_Товары
|ИЗ
|	Документ.ПоступлениеТоваровУслуг.Товары КАК ПоступлениеТоваровУслугТовары
|ГДЕ
|	ПоступлениеТоваровУслугТовары.Ссылка = &amp;Ссылка
|;
|
|////////////////////////////////////////////////////////////////////////////////
|ВЫБРАТЬ
|	ВТ_Товары.НаименованиеПоставщика КАК НаименованиеПоставщика,
|	ВТ_Товары.Номенклатура КАК Номенклатура,
|	ВТ_Товары.Характеристика КАК Характеристика,
|	ЕСТЬNULL(ЕдиницыИзмерения.Код, """") КАК КодЕдиницыИзмеренияПоКлассификатору,
|	ВТ_Товары.Количество КАК Количество,
|	ВТ_Товары.Цена КАК Цена,
|	ВТ_Товары.Сумма КАК Сумма,
|	ВТ_Товары.СтавкаНДС КАК СтавкаНДС,
|	ВТ_Товары.СуммаНДС КАК СуммаНДС,
|	ВТ_Товары.НомерГТД КАК НомерГТД,
|	ВТ_Товары.СтранаПроисхождения КАК СтранаПроисхождения,
|	ЕСТЬNULL(ВидыНоменклатуры.ТипНоменклатуры, """") КАК ТипНоменклатуры,
|	ВТ_Товары.ИдентификаторСтроки КАК ИдентификаторСтроки,
|	ВТ_Товары.КоличествоДоКорректировки КАК КоличествоДоКорректировки,
|	ВТ_Товары.ЦенаДоКорректировки КАК ЦенаДоКорректировки,
|	ВТ_Товары.СуммаДоКорректировки КАК СуммаДоКорректировки,
|	ВТ_Товары.СтавкаНДСДоКорректировки КАК СтавкаНДСДоКорректировки,
|	ВТ_Товары.СуммаНДСДоКорректировки КАК СуммаНДСДоКорректировки,
|	ВТ_Товары.СуммаВсего КАК СуммаВсего,
|	ВТ_Товары.СуммаВсегоДоКорректировки КАК СуммаВсегоДоКорректировки
|ПОМЕСТИТЬ ВТ_ТоварыВидыНоменклатуры
|ИЗ
|	ВТ_Товары КАК ВТ_Товары
|		ЛЕВОЕ СОЕДИНЕНИЕ Справочник.Номенклатура КАК ТаблицаНоменклатуры
|		ПО ВТ_Товары.Номенклатура = ТаблицаНоменклатуры.Ссылка
|		ЛЕВОЕ СОЕДИНЕНИЕ Справочник.ВидыНоменклатуры КАК ВидыНоменклатуры
|		ПО (ТаблицаНоменклатуры.ВидНоменклатуры = ВидыНоменклатуры.Ссылка)
|		ЛЕВОЕ СОЕДИНЕНИЕ Справочник.ЕдиницыИзмерения КАК ЕдиницыИзмерения
|		ПО ВТ_Товары.ЕдиницаИзмерения = ЕдиницыИзмерения.Ссылка
|;
|
|////////////////////////////////////////////////////////////////////////////////
|ВЫБРАТЬ
|	ВТ_ТоварыВидыНоменклатуры.НаименованиеПоставщика КАК НаименованиеПоставщика,
|	ВТ_ТоварыВидыНоменклатуры.Номенклатура КАК Номенклатура,
|	ВТ_ТоварыВидыНоменклатуры.Характеристика КАК ХарактеристикаНоменклатуры,
|	ВТ_ТоварыВидыНоменклатуры.КодЕдиницыИзмеренияПоКлассификатору КАК КодЕдиницыИзмеренияПоКлассификатору,
|	ВТ_ТоварыВидыНоменклатуры.Количество КАК Количество,
|	ВТ_ТоварыВидыНоменклатуры.Количество КАК КоличествоБазовое,
|	ВТ_ТоварыВидыНоменклатуры.Цена КАК Цена,
|	ВТ_ТоварыВидыНоменклатуры.Сумма КАК Сумма,
|	ВТ_ТоварыВидыНоменклатуры.СтавкаНДС КАК СтавкаНДС,
|	ВТ_ТоварыВидыНоменклатуры.СуммаНДС КАК СуммаНДС,
|	ВТ_ТоварыВидыНоменклатуры.НомерГТД КАК НомерГТД,
|	ВТ_ТоварыВидыНоменклатуры.СтранаПроисхождения КАК СтранаПроисхождения,
|	ВТ_ТоварыВидыНоменклатуры.ИдентификаторСтроки КАК ИдентификаторТовара,
|	ВТ_ТоварыВидыНоменклатуры.ЦенаДоКорректировки КАК ЦенаДоКорректировки,
|	ВТ_ТоварыВидыНоменклатуры.СуммаДоКорректировки КАК СуммаВсегоДоКорректировки,
|	ВТ_ТоварыВидыНоменклатуры.СтавкаНДСДоКорректировки КАК СтавкаНДСДоКорректировки,
|	ВТ_ТоварыВидыНоменклатуры.СуммаНДСДоКорректировки КАК СуммаНДСДоКорректировки,
|	ВТ_ТоварыВидыНоменклатуры.СуммаВсего КАК СуммаВсего,
|	ВТ_ТоварыВидыНоменклатуры.СуммаВсегоДоКорректировки КАК СуммаВсегоДоКорректировки1
|ИЗ
|	ВТ_ТоварыВидыНоменклатуры КАК ВТ_ТоварыВидыНоменклатуры
|;
|
|////////////////////////////////////////////////////////////////////////////////
|ВЫБРАТЬ
|	ПоступлениеТоваровУслугКодыУпаковокМаркируемойПродукции.ИдентификаторСтроки КАК ИдентификаторСтроки,
|	ПоступлениеТоваровУслугКодыУпаковокМаркируемойПродукции.НомерУпаковки КАК НомерУпаковки
|ПОМЕСТИТЬ КодыМаркировки
|ИЗ
|	Документ.ПоступлениеТоваровУслуг.КодыУпаковокМаркируемойПродукции КАК ПоступлениеТоваровУслугКодыУпаковокМаркируемойПродукции
|ГДЕ
|	ПоступлениеТоваровУслугКодыУпаковокМаркируемойПродукции.Ссылка = &amp;Ссылка
|;
|
|////////////////////////////////////////////////////////////////////////////////
|ВЫБРАТЬ
|	ПоступлениеТоваровУслугКодыУпаковокМаркируемойПродукцииДоКорректировки.ИдентификаторСтроки КАК ИдентификаторСтроки,
|	ПоступлениеТоваровУслугКодыУпаковокМаркируемойПродукцииДоКорректировки.НомерУпаковки КАК НомерУпаковки
|ПОМЕСТИТЬ КодыМаркировкиДо
|ИЗ
|	Документ.ПоступлениеТоваровУслуг.КодыУпаковокМаркируемойПродукцииДоКорректировки КАК ПоступлениеТоваровУслугКодыУпаковокМаркируемойПродукцииДоКорректировки
|ГДЕ
|	ПоступлениеТоваровУслугКодыУпаковокМаркируемойПродукцииДоКорректировки.Ссылка = &amp;Ссылка
|;
|
|////////////////////////////////////////////////////////////////////////////////
|ВЫБРАТЬ
|	ВЫБОР
|		КОГДА КодыМаркировки.НомерУпаковки ЕСТЬ NULL
|			ТОГДА ИСТИНА
|		ИНАЧЕ ЛОЖЬ
|	КОНЕЦ КАК Возврат,
|	ЕСТЬNULL(КодыМаркировки.ИдентификаторСтроки, КодыМаркировкиДо.ИдентификаторСтроки) КАК ИдентификаторТовара,
|	ЕСТЬNULL(КодыМаркировки.НомерУпаковки, КодыМаркировкиДо.НомерУпаковки) КАК КодМаркировки
|ИЗ
|	КодыМаркировки КАК КодыМаркировки
|		ПОЛНОЕ СОЕДИНЕНИЕ КодыМаркировкиДо КАК КодыМаркировкиДо
|		ПО КодыМаркировки.ИдентификаторСтроки = КодыМаркировкиДо.ИдентификаторСтроки
|			И КодыМаркировки.НомерУпаковки = КодыМаркировкиДо.НомерУпаковки";
Запрос.УстановитьПараметр("Ссылка", Источник.Ссылка);
РезультатыЗапроса = Запрос.ВыполнитьПакет();

ВходящиеДанные = Новый Структура;
ВходящиеДанные.Вставить("Товары", РезультатыЗапроса[2].Выгрузить());
ВходящиеДанные.Вставить("КодыМаркировки", РезультатыЗапроса[5].Выгрузить());</ПередВыгрузкой>
				<ПослеЗагрузки>Выполнить(Алгоритмы.ЗаполнитьЕдиницыИзмеренияГТД);

Объект.Проведен = Ложь;

ЭтоИсправление = (ПараметрыОбъекта.Получить("ЭтоИсправление") = Истина);

ТаблицаТоваров = Объект.Товары.Выгрузить();
ТаблицаКодовМаркировки = Объект.КодыМаркировки.Выгрузить();

// Преобразуем КМ в требуемый вид (скобки)
ОбъектШК = Обработки.ШтрихКоды.Создать();

Для Каждого ТекущяСтрока Из ТаблицаКодовМаркировки Цикл
	ОбъектШК.РазобратьСтрокуШтрихкодаGS1(ТекущяСтрока.КодМаркировки, Истина);
КонецЦикла;

// Найдем документ-основание
Запрос = Новый Запрос;
Запрос.Текст = "ВЫБРАТЬ ПЕРВЫЕ 1
	|	КорректировкаПоступления.Ссылка КАК Ссылка,
	|	КорректировкаПоступления.Проведен КАК Проведен
	|ИЗ
	|	Документ.КорректировкаПоступления КАК КорректировкаПоступления
	|ГДЕ
	|	КорректировкаПоступления.ВхДокНомер = &amp;ВхДокНомер
	|	И КорректировкаПоступления.ВхДокДата = &amp;ВхДокДата
	|	И КорректировкаПоступления.ХозОперация = &amp;ХозОперация
	|
	|ОБЪЕДИНИТЬ ВСЕ
	|
	|ВЫБРАТЬ ПЕРВЫЕ 1
	|	ПоступлениеТоваров.Ссылка,
	|	ПоступлениеТоваров.Проведен
	|ИЗ
	|	Документ.ПоступлениеТоваров КАК ПоступлениеТоваров
	|ГДЕ
	|	ПоступлениеТоваров.ВхДокНомер = &amp;ВхДокНомер
	|	И ПоступлениеТоваров.ВхДокДата = &amp;ВхДокДата";
Запрос.УстановитьПараметр("ВхДокНомер", ПараметрыОбъекта.Получить("НомерИсходногоДокумента"));
Запрос.УстановитьПараметр("ВхДокДата", ПараметрыОбъекта.Получить("ДатаИсходногоДокумента"));
Запрос.УстановитьПараметр("ХозОперация", Справочники.ХозОперации.КорректировкаПоступленияКорректировкаПоСогласованиюСторон);

Выборка = Запрос.Выполнить().Выбрать();

Если Выборка.Следующий() Тогда
	Если Объект.Ссылка &lt;&gt; Выборка.Ссылка Тогда
		Если НЕ Выборка.Проведен Тогда
			//Сообщить("Документ " + Выборка.Ссылка + " не проведен. Ввод корректировки на основании непроведенных документов запрещен. Проведите документ и повторите загрузку корректировки поступления.");
			ЗаписатьВПротоколВыполнения("Документ " + Выборка.Ссылка + " не проведен. Ввод корректировки на основании непроведенных документов запрещен. Проведите документ и повторите загрузку корректировки поступления.");
			Отказ = Истина;
		Иначе
			Объект.Заполнить(Выборка.Ссылка);
		КонецЕсли;
	КонецЕсли;
Иначе
	//Сообщить("Не найден входящий документ №" + ПараметрыОбъекта.Получить("НомерИсходногоДокумента") + " от " + Формат(ПараметрыОбъекта.Получить("ДатаИсходногоДокумента"), "ДЛФ=D") + ". Создайте документ и повторите загрузку корректировки поступления.");
	ЗаписатьВПротоколВыполнения("Не найден входящий документ №" + ПараметрыОбъекта.Получить("НомерИсходногоДокумента") + " от " + Формат(ПараметрыОбъекта.Получить("ДатаИсходногоДокумента"), "ДЛФ=D") + ". Создайте документ и повторите загрузку корректировки поступления.");
	Отказ = Истина;
КонецЕсли;
	
Объект.ВхДокДата = ПараметрыОбъекта.Получить("ВхДокДата");
Объект.ВхДокНомер = ПараметрыОбъекта.Получить("ВхДокНомер");

Если ЭтоИсправление Тогда
	Объект.ХозОперация = Справочники.ХозОперации.КорректировкаПоступленияИсправлениеВПервичныхДокументах;
Иначе
	Объект.ХозОперация = Справочники.ХозОперации.КорректировкаПоступленияКорректировкаПоСогласованиюСторон;
КонецЕсли;

Если НЕ ЗначениеЗаполнено(Объект.Автор) Тогда
	Объект.Автор = ПараметрыСеанса.Пользователь;
КонецЕсли;

Если НЕ ЗначениеЗаполнено(Объект.Организация) Тогда
	Объект.Организация = ПараметрыСеанса.Организация;
КонецЕсли;

Если НЕ ЗначениеЗаполнено(Объект.ПодразделениеКомпании) Тогда
	Объект.ПодразделениеКомпании = ПараметрыСеанса.ПодразделениеКомпании;
КонецЕсли;

Если НЕ ЗначениеЗаполнено(Объект.СкладКомпании) Тогда
	Объект.СкладКомпании = обПраво("ОсновнойСкладКомпании",,,Объект);
КонецЕсли;

Если НЕ ЗначениеЗаполнено(Объект.ДоговорВзаиморасчетов)
	И ЗначениеЗаполнено(Объект.Контрагент) Тогда
	
	ВидДоговора = Перечисления.ВидыДоговоров.Покупка;
	ДопПараметры = Новый Структура();
	ДопПараметры.Вставить("ВидДоговора",ВидДоговора);
	
	Объект.ДоговорВзаиморасчетов = 
		Справочники.Контрагенты.ПолучитьДоговорВзаиморасчетов(Объект.Контрагент, ВидДоговора, Объект, ДопПараметры, Истина);
	
КонецЕсли;

Если НЕ ЗначениеЗаполнено(Объект.ВалютаДокумента) Тогда
	Если ЗначениеЗаполнено(Объект.ДоговорВзаиморасчетов) Тогда
		Объект.ВалютаДокумента = Объект.ДоговорВзаиморасчетов.ВалютаВзаиморасчетов;
	Иначе
		Объект.ВалютаДокумента = Константы.ВалютаРегламентированногоУчетаОрганизаций.Получить();
	КонецЕсли;
КонецЕсли;

СтруктураКурса = обКурсДляВалюты(Объект.ВалютаДокумента, Объект.Дата);
Объект.КурсДокумента = СтруктураКурса.Курс/?(СтруктураКурса.Кратность = 0, 1, СтруктураКурса.Кратность);

Если НЕ ЗначениеЗаполнено(Объект.ТипЦен) Тогда
	Объект.ТипЦен = обПраво("ОсновнойТипЦенЗакупки",,,Объект);
КонецЕсли;

ТипЦенВключаетНДС = Объект.ТипЦен.ЦенаВключаетНДС;

Если ЗначениеЗаполнено(Объект.ДокументОснование) Тогда
	
	СтрокиКорректировки = Новый Массив;
	СтруктураПоиска = Новый Структура("Номенклатура,ЕдиницаИзмерения,ХарактеристикаНоменклатуры");
	Для Каждого ТекущаяСтрока Из Объект.Товары Цикл
		
		ЗаполнитьЗначенияСвойств(СтруктураПоиска, ТекущаяСтрока);
		
		НаденныеСтроки = ТаблицаТоваров.НайтиСтроки(СтруктураПоиска);
		
		Если НаденныеСтроки.Количество() = 0 Тогда
			
			// Товар удалили из корректировки
			
			ТекущаяСтрока.Количество = 0;
			Объект.ОбработкаРеквизита("Товары.Количество", ТекущаяСтрока);
			
			Объект.ОбработкаРеквизита("Товары.РасчетРазницы", ТекущаяСтрока);
			
			КодыМаркировки = Объект.КодыМаркировки.НайтиСтроки(Новый Структура("ИдентификаторТовара", ТекущаяСтрока.ИдентификаторТовара));
			
			Для Каждого ТекущийКМ Из КодыМаркировки Цикл
				ТекущийКМ.Возврат = Истина;
			КонецЦикла;
			
		Иначе
			
			СтрокаКорректировки = НаденныеСтроки[0];
			СтрокиКорректировки.Добавить(СтрокаКорректировки);
			
			ТекущаяСтрока.Количество = СтрокаКорректировки.Количество;
			ТекущаяСтрока.СуммаВсего = СтрокаКорректировки.СуммаВсего;
			ТекущаяСтрока.СуммаНДС = СтрокаКорректировки.СуммаНДС;
			ТекущаяСтрока.СтавкаНДС = СтрокаКорректировки.СтавкаНДС;
			
			Если ТипЦенВключаетНДС Тогда
				ТекущаяСтрока.Сумма = СтрокаКорректировки.Сумма + СтрокаКорректировки.СуммаНДС;
				ТекущаяСтрока.Цена  = ?(СтрокаКорректировки.Количество = 0, 0, СтрокаКорректировки.Сумма / СтрокаКорректировки.Количество);
			Иначе
				ТекущаяСтрока.Сумма = СтрокаКорректировки.Сумма;
				ТекущаяСтрока.Цена = СтрокаКорректировки.Цена;
			КонецЕсли;
			
			Объект.ОбработкаРеквизита("Товары.РасчетРазницы", ТекущаяСтрока);
			
			КодыМаркировки = Объект.КодыМаркировки.НайтиСтроки(Новый Структура("ИдентификаторТовара", ТекущаяСтрока.ИдентификаторТовара));
			
			ПолученныеКодыМаркировки = ТаблицаКодовМаркировки.НайтиСтроки(Новый Структура("ИдентификаторТовара", СтрокаКорректировки.ИдентификаторТовара));
			
			НайденныеКоды = Новый Массив;
			
			Для Каждого ТекущийКод Из ПолученныеКодыМаркировки Цикл
				
				НайденКод = Ложь;
				
				Для Каждого ТекущийКодОбъекта Из КодыМаркировки Цикл
					
					Если ТекущийКодОбъекта.КодМаркировки = ТекущийКод.КодМаркировки Тогда
						НайденКод = Истина;
						ТекущийКодОбъекта.Возврат = ТекущийКод.Возврат;
						НайденныеКоды.Добавить(ТекущийКодОбъекта);
						Прервать;
					КонецЕсли;
					
				КонецЦикла;
				
				Если НЕ НайденКод Тогда
					НоваяСтрока = Объект.КодыМаркировки.Добавить();
					НоваяСтрока.ИдентификаторТовара = ТекущаяСтрока.ИдентификаторТовара;
					НоваяСтрока.КодМаркировки = ТекущийКод.КодМаркировки;
					НоваяСтрока.Возврат = ТекущийКод.Возврат;
				КонецЕсли;
				
			КонецЦикла;
			
			// Удалить найденные и добавить новые
			Для Каждого ТекущийКодОбъекта Из КодыМаркировки Цикл
				Если НайденныеКоды.Найти(ТекущийКодОбъекта) = Неопределено Тогда
					ТекущийКодОбъекта.Возврат = Истина;
				КонецЕсли;
			КонецЦикла;
			
		КонецЕсли;
		
	КонецЦикла;
	
	Для Каждого ТекущаяСтрока Из ТаблицаТоваров Цикл
		
		ЗаполнитьЗначенияСвойств(СтруктураПоиска, ТекущаяСтрока);
		
		НаденныеСтроки = Объект.Товары.НайтиСтроки(СтруктураПоиска);
		
		Если НаденныеСтроки.Количество() = 0 Тогда
			
			НоваяСтрока = Объект.Товары.Добавить();
			ЗаполнитьЗначенияСвойств(НоваяСтрока, ТекущаяСтрока);
			
			Если НЕ ЗначениеЗаполнено(НоваяСтрока.ИдентификаторТовара) Тогда
				НоваяСтрока.ИдентификаторТовара = Новый УникальныйИдентификатор;
			КонецЕсли;
			
			НоваяСтрока.СуммаВсего = ТекущаяСтрока.СуммаВсего;
			
			Если ТипЦенВключаетНДС Тогда
				НоваяСтрока.Сумма = ТекущаяСтрока.Сумма + ТекущаяСтрока.СуммаНДС;
				НоваяСтрока.Цена  = ?(ТекущаяСтрока.Количество = 0, 0, ТекущаяСтрока.Сумма / ТекущаяСтрока.Количество);
			КонецЕсли;
			
			Объект.ОбработкаРеквизита("Товары.РасчетРазницы", НоваяСтрока);
			
			ПолученныеКодыМаркировки = ТаблицаКодовМаркировки.НайтиСтроки(Новый Структура("ИдентификаторТовара", НоваяСтрока.ИдентификаторТовара));
			
			Для Каждого ТекущийКМ Из ПолученныеКодыМаркировки Цикл
				НоваяСтрокаКМ = Объект.КодыМаркировки.Добавить();
				ЗаполнитьЗначенияСвойств(НоваяСтрокаКМ, ТекущийКМ);
			КонецЦикла;
			
		КонецЕсли;
		
	КонецЦикла;
	
Иначе

	Для Каждого ТекущаяСтрока Из Объект.Товары Цикл
	
		Если НЕ ЗначениеЗаполнено(ТекущаяСтрока.ИдентификаторТовара) Тогда
			ТекущаяСтрока.ИдентификаторТовара = Новый УникальныйИдентификатор;
		КонецЕсли;
		
		ТекущаяСтрока.СуммаВсего = ТекущаяСтрока.СуммаВсего;
			
		Если ТипЦенВключаетНДС Тогда
			ТекущаяСтрока.Сумма = ТекущаяСтрока.Сумма + ТекущаяСтрока.СуммаНДС;
			ТекущаяСтрока.Цена  = ?(ТекущаяСтрока.Количество = 0, 0, ТекущаяСтрока.Сумма / ТекущаяСтрока.Количество);
		КонецЕсли;
		
		Объект.ОбработкаРеквизита("Товары.РасчетРазницы", ТекущаяСтрока);
		
	КонецЦикла;

КонецЕсли;</ПослеЗагрузки>
				<НеЗамещать>true</НеЗамещать>
				<СинхронизироватьПоИдентификатору>true</СинхронизироватьПоИдентификатору>
				<ПриПереносеОбъектаПоСсылкеУстанавливатьТолькоGIUD>true</ПриПереносеОбъектаПоСсылкеУстанавливатьТолькоGIUD>
				<Источник>ДокументСсылка.ПоступлениеТоваровУслуг</Источник>
				<Приемник>ДокументСсылка.КорректировкаПоступления</Приемник>
				<Свойства>
					<Свойство Поиск="true">
						<Код>1</Код>
						<Наименование>Дата --&gt; Дата</Наименование>
						<Порядок>150</Порядок>
						<Источник Имя="Дата" Вид="Свойство" Тип="Дата"/>
						<Приемник Имя="Дата" Вид="Свойство" Тип="Дата"/>
					</Свойство>
					<Свойство Поиск="true">
						<Код>2</Код>
						<Наименование>Номер --&gt; Номер</Наименование>
						<Порядок>200</Порядок>
						<Источник Имя="Номер" Вид="Свойство" Тип="Строка"/>
						<Приемник Имя="Номер" Вид="Свойство" Тип="Строка"/>
					</Свойство>
					<Свойство>
						<Код>3</Код>
						<Наименование>--&gt; ВхДокДата</Наименование>
						<Порядок>250</Порядок>
						<Источник Имя="" Вид=""/>
						<Приемник Имя="" Вид=""/>
						<ИмяПараметраДляПередачи>ВхДокДата</ИмяПараметраДляПередачи>
						<ПередВыгрузкой>Значение = Источник.ДатаЭД;</ПередВыгрузкой>
					</Свойство>
					<Свойство>
						<Код>4</Код>
						<Наименование>--&gt; ВхДокНомер</Наименование>
						<Порядок>300</Порядок>
						<Источник Имя="" Вид=""/>
						<Приемник Имя="" Вид=""/>
						<ИмяПараметраДляПередачи>ВхДокНомер</ИмяПараметраДляПередачи>
						<ПередВыгрузкой>Значение = Источник.НомерЭД;</ПередВыгрузкой>
					</Свойство>
					<Свойство>
						<Код>6</Код>
						<Наименование>--&gt; ДатаИсходногоДокумента</Наименование>
						<Порядок>350</Порядок>
						<Источник Имя="" Вид=""/>
						<Приемник Имя="" Вид=""/>
						<ИмяПараметраДляПередачи>ДатаИсходногоДокумента</ИмяПараметраДляПередачи>
						<ПередВыгрузкой>Значение = Источник.ДатаИсходногоДокумента;</ПередВыгрузкой>
					</Свойство>
					<Свойство>
						<Код>5</Код>
						<Наименование>--&gt; НомерИсходногоДокумента</Наименование>
						<Порядок>350</Порядок>
						<Источник Имя="" Вид=""/>
						<Приемник Имя="" Вид=""/>
						<ИмяПараметраДляПередачи>НомерИсходногоДокумента</ИмяПараметраДляПередачи>
						<ПередВыгрузкой>Значение = Источник.НомерИсходногоДокумента;</ПередВыгрузкой>
					</Свойство>
					<Свойство>
						<Код>7</Код>
						<Наименование>Контрагент --&gt; Контрагент</Наименование>
						<Порядок>400</Порядок>
						<Источник Имя="Контрагент" Вид="Реквизит" Тип="СправочникСсылка.Контрагенты"/>
						<Приемник Имя="Контрагент" Вид="Реквизит" Тип="СправочникСсылка.Контрагенты"/>
						<КодПравилаКонвертации>Контрагенты                                       </КодПравилаКонвертации>
					</Свойство>
					<Свойство>
						<Код>8</Код>
						<Наименование>Организация --&gt; Организация</Наименование>
						<Порядок>450</Порядок>
						<Источник Имя="Организация" Вид="Реквизит" Тип="СправочникСсылка.Организации"/>
						<Приемник Имя="Организация" Вид="Реквизит" Тип="СправочникСсылка.Организации"/>
						<КодПравилаКонвертации>Организации                                       </КодПравилаКонвертации>
					</Свойство>
					<Свойство>
						<Код>9</Код>
						<Наименование>Валюта --&gt; ВалютаДокумента</Наименование>
						<Порядок>500</Порядок>
						<Источник Имя="Валюта" Вид="Реквизит" Тип="СправочникСсылка.Валюты"/>
						<Приемник Имя="ВалютаДокумента" Вид="Реквизит" Тип="СправочникСсылка.Валюты"/>
						<КодПравилаКонвертации>Валюты                                            </КодПравилаКонвертации>
					</Свойство>
					<Свойство>
						<Код>10</Код>
						<Наименование>ДоговорКонтрагента --&gt; ДоговорВзаиморасчетов</Наименование>
						<Порядок>550</Порядок>
						<Источник Имя="ДоговорКонтрагента" Вид="Реквизит" Тип="СправочникСсылка.ДоговорыКонтрагентов"/>
						<Приемник Имя="ДоговорВзаиморасчетов" Вид="Реквизит" Тип="СправочникСсылка.ДоговорыВзаиморасчетов"/>
						<КодПравилаКонвертации>ДоговорыВзаиморасчетов                            </КодПравилаКонвертации>
					</Свойство>
					<Свойство Отключить="true">
						<Код>11</Код>
						<Наименование>--&gt; ДокументОснование</Наименование>
						<Порядок>600</Порядок>
						<Источник Имя="" Вид=""/>
						<Приемник Имя="ДокументОснование" Вид="Реквизит"/>
					</Свойство>
					<Свойство>
						<Код>12</Код>
						<Наименование>ПометкаУдаления --&gt; ПометкаУдаления</Наименование>
						<Порядок>650</Порядок>
						<Источник Имя="ПометкаУдаления" Вид="Свойство" Тип="Булево"/>
						<Приемник Имя="ПометкаУдаления" Вид="Свойство" Тип="Булево"/>
					</Свойство>
					<Свойство>
						<Код>13</Код>
						<Наименование>Комментарий --&gt; Комментарий</Наименование>
						<Порядок>700</Порядок>
						<Источник Имя="Комментарий" Вид="Реквизит" Тип="Строка"/>
						<Приемник Имя="Комментарий" Вид="Реквизит" Тип="Строка"/>
					</Свойство>
					<Свойство>
						<Код>14</Код>
						<Наименование>Проведен --&gt; Проведен</Наименование>
						<Порядок>750</Порядок>
						<Источник Имя="Проведен" Вид="Свойство" Тип="Булево"/>
						<Приемник Имя="Проведен" Вид="Свойство" Тип="Булево"/>
					</Свойство>
					<Группа>
						<Код>15</Код>
						<Наименование>--&gt; Товары</Наименование>
						<Порядок>800</Порядок>
						<ПолучитьИзВходящихДанных>true</ПолучитьИзВходящихДанных>
						<Источник Имя="" Вид=""/>
						<Приемник Имя="Товары" Вид="ТабличнаяЧасть"/>
						<Свойство>
							<Код>26</Код>
							<Наименование>--&gt; Номенклатура</Наименование>
							<Порядок>50</Порядок>
							<Источник Имя="" Вид=""/>
							<Приемник Имя="Номенклатура" Вид="Реквизит" Тип="СправочникСсылка.Номенклатура"/>
							<КодПравилаКонвертации>Номенклатура                                      </КодПравилаКонвертации>
						</Свойство>
						<Свойство>
							<Код>25</Код>
							<Наименование>--&gt; ХарактеристикаНоменклатуры</Наименование>
							<Порядок>100</Порядок>
							<Источник Имя="" Вид=""/>
							<Приемник Имя="ХарактеристикаНоменклатуры" Вид="Реквизит" Тип="СправочникСсылка.ХарактеристикиНоменклатуры"/>
							<КодПравилаКонвертации>ХарактеристикиНоменклатуры                        </КодПравилаКонвертации>
							<ПередВыгрузкой>ИсходящиеДанные = Новый Структура;
ИсходящиеДанные.Вставить("Владелец", ОбъектКоллекции.Номенклатура);</ПередВыгрузкой>
						</Свойство>
						<Свойство>
							<Код>24</Код>
							<Наименование>--&gt; Количество</Наименование>
							<Порядок>150</Порядок>
							<Источник Имя="" Вид=""/>
							<Приемник Имя="Количество" Вид="Реквизит" Тип="Число"/>
						</Свойство>
						<Свойство>
							<Код>23</Код>
							<Наименование>--&gt; Цена</Наименование>
							<Порядок>200</Порядок>
							<Источник Имя="" Вид=""/>
							<Приемник Имя="Цена" Вид="Реквизит" Тип="Число"/>
						</Свойство>
						<Свойство>
							<Код>22</Код>
							<Наименование>--&gt; Сумма</Наименование>
							<Порядок>250</Порядок>
							<Источник Имя="" Вид=""/>
							<Приемник Имя="Сумма" Вид="Реквизит" Тип="Число"/>
						</Свойство>
						<Свойство>
							<Код>21</Код>
							<Наименование>--&gt; СтавкаНДС</Наименование>
							<Порядок>300</Порядок>
							<Источник Имя="" Вид=""/>
							<Приемник Имя="СтавкаНДС" Вид="Реквизит" Тип="СправочникСсылка.СтавкиНДС"/>
							<ПередВыгрузкой>СтавкаНДС = Строка(ОбъектКоллекции.СтавкаНДС);
ИсходящиеДанные = Новый Структура;
ИсходящиеДанные.Вставить("Наименование", СтавкаНДС);</ПередВыгрузкой>
						</Свойство>
						<Свойство>
							<Код>20</Код>
							<Наименование>--&gt; СуммаНДС</Наименование>
							<Порядок>350</Порядок>
							<Источник Имя="" Вид=""/>
							<Приемник Имя="СуммаНДС" Вид="Реквизит" Тип="Число"/>
						</Свойство>
						<Свойство>
							<Код>19</Код>
							<Наименование>--&gt; СуммаВсегоДоКорректировки</Наименование>
							<Порядок>400</Порядок>
							<Источник Имя="" Вид=""/>
							<Приемник Имя="СуммаВсегоДоКорректировки" Вид="Реквизит" Тип="Число"/>
						</Свойство>
						<Свойство>
							<Код>17</Код>
							<Наименование>--&gt; СуммаНДСДоКорректировки</Наименование>
							<Порядок>450</Порядок>
							<Источник Имя="" Вид=""/>
							<Приемник Имя="СуммаНДСДоКорректировки" Вид="Реквизит" Тип="Число"/>
						</Свойство>
						<Свойство>
							<Код>16</Код>
							<Наименование>--&gt; КодЕдиницыИзмеренияПоКлассификатору</Наименование>
							<Порядок>500</Порядок>
							<Источник Имя="" Вид=""/>
							<Приемник Имя="" Вид=""/>
							<ИмяПараметраДляПередачи>КодЕдиницыИзмеренияПоКлассификатору</ИмяПараметраДляПередачи>
							<ПередВыгрузкой>Значение = ОбъектКоллекции.КодЕдиницыИзмеренияПоКлассификатору;</ПередВыгрузкой>
						</Свойство>
						<Свойство>
							<Код>18</Код>
							<Наименование>--&gt; НомерГТД</Наименование>
							<Порядок>550</Порядок>
							<Источник Имя="" Вид=""/>
							<Приемник Имя="" Вид=""/>
							<ИмяПараметраДляПередачи>НомерГТД</ИмяПараметраДляПередачи>
							<ПередВыгрузкой>Значение = ОбъектКоллекции.НомерГТД;</ПередВыгрузкой>
						</Свойство>
						<Свойство>
							<Код>28</Код>
							<Наименование>--&gt; СтранаПроисхождения</Наименование>
							<Порядок>600</Порядок>
							<Источник Имя="" Вид=""/>
							<Приемник Имя="" Вид=""/>
							<ИмяПараметраДляПередачи>СтранаПроисхождения</ИмяПараметраДляПередачи>
							<ПередВыгрузкой>Значение = ОбъектКоллекции.СтранаПроисхождения;</ПередВыгрузкой>
						</Свойство>
						<Свойство>
							<Код>27</Код>
							<Наименование>--&gt; ИдентификаторТовара</Наименование>
							<Порядок>650</Порядок>
							<Источник Имя="" Вид=""/>
							<Приемник Имя="ИдентификаторТовара" Вид="Реквизит" Тип="Строка"/>
						</Свойство>
						<Свойство>
							<Код>29</Код>
							<Наименование>--&gt; СуммаВсего</Наименование>
							<Порядок>700</Порядок>
							<Источник Имя="" Вид=""/>
							<Приемник Имя="СуммаВсего" Вид="Реквизит" Тип="Число"/>
						</Свойство>
					</Группа>
					<Группа>
						<Код>30</Код>
						<Наименование>--&gt; КодыМаркировки</Наименование>
						<Порядок>850</Порядок>
						<ПолучитьИзВходящихДанных>true</ПолучитьИзВходящихДанных>
						<Источник Имя="" Вид=""/>
						<Приемник Имя="КодыМаркировки" Вид="ТабличнаяЧасть"/>
						<Свойство>
							<Код>31</Код>
							<Наименование>--&gt; КодМаркировки</Наименование>
							<Порядок>50</Порядок>
							<Источник Имя="" Вид=""/>
							<Приемник Имя="КодМаркировки" Вид="Реквизит" Тип="Строка"/>
						</Свойство>
						<Свойство>
							<Код>33</Код>
							<Наименование>--&gt; ИдентификаторТовара</Наименование>
							<Порядок>100</Порядок>
							<Источник Имя="" Вид=""/>
							<Приемник Имя="ИдентификаторТовара" Вид="Реквизит" Тип="Строка"/>
						</Свойство>
						<Свойство>
							<Код>32</Код>
							<Наименование>--&gt; Возврат</Наименование>
							<Порядок>150</Порядок>
							<Источник Имя="" Вид=""/>
							<Приемник Имя="Возврат" Вид="Реквизит" Тип="Булево"/>
						</Свойство>
					</Группа>
					<Свойство>
						<Код>34</Код>
						<Наименование>--&gt; ЭтоИсправление</Наименование>
						<Порядок>900</Порядок>
						<Источник Имя="" Вид=""/>
						<Приемник Имя="" Вид=""/>
						<ИмяПараметраДляПередачи>ЭтоИсправление</ИмяПараметраДляПередачи>
						<ПередВыгрузкой>Значение = (Источник.ВидОперации = Перечисления.ВидыОпераций.Исправление);</ПередВыгрузкой>
					</Свойство>
				</Свойства>
				<Значения/>
			</Правило>
		</Группа>
	</ПравилаКонвертацииОбъектов>
	<ПравилаВыгрузкиДанных>
		<Группа Отключить="false">
			<Код>Справочники</Код>
			<Наименование>Справочники</Наименование>
			<Порядок>50</Порядок>
			<Правило Отключить="false">
				<Код>Валюты</Код>
				<Наименование>Валюты</Наименование>
				<Порядок>50</Порядок>
				<КодПравилаКонвертации>Валюты                                            </КодПравилаКонвертации>
				<СпособОтбораДанных>СтандартнаяВыборка</СпособОтбораДанных>
				<ОбъектВыборки>СправочникСсылка.Валюты</ОбъектВыборки>
			</Правило>
			<Правило Отключить="false">
				<Код>СтраныМира</Код>
				<Наименование>Страны мира</Наименование>
				<Порядок>100</Порядок>
				<КодПравилаКонвертации>КлассификаторСтранМира                            </КодПравилаКонвертации>
				<СпособОтбораДанных>СтандартнаяВыборка</СпособОтбораДанных>
				<ОбъектВыборки>СправочникСсылка.СтраныМира</ОбъектВыборки>
			</Правило>
			<Правило Отключить="false">
				<Код>ЕдиницыИзмерения</Код>
				<Наименование>Единицы измерения</Наименование>
				<Порядок>150</Порядок>
				<КодПравилаКонвертации>ЕдиницыИзмерения                                  </КодПравилаКонвертации>
				<СпособОтбораДанных>СтандартнаяВыборка</СпособОтбораДанных>
				<ОбъектВыборки>СправочникСсылка.ЕдиницыИзмерения</ОбъектВыборки>
			</Правило>
			<Правило Отключить="false">
				<Код>Организации</Код>
				<Наименование>Организации</Наименование>
				<Порядок>200</Порядок>
				<КодПравилаКонвертации>Организации                                       </КодПравилаКонвертации>
				<СпособОтбораДанных>СтандартнаяВыборка</СпособОтбораДанных>
				<ОбъектВыборки>СправочникСсылка.Организации</ОбъектВыборки>
			</Правило>
			<Правило Отключить="false">
				<Код>Контрагенты</Код>
				<Наименование>Контрагенты</Наименование>
				<Порядок>250</Порядок>
				<КодПравилаКонвертации>Контрагенты                                       </КодПравилаКонвертации>
				<СпособОтбораДанных>СтандартнаяВыборка</СпособОтбораДанных>
				<ОбъектВыборки>СправочникСсылка.Контрагенты</ОбъектВыборки>
			</Правило>
			<Правило Отключить="false">
				<Код>ДоговорыКонтрагентов</Код>
				<Наименование>Договоры</Наименование>
				<Порядок>300</Порядок>
				<КодПравилаКонвертации>ДоговорыВзаиморасчетов                            </КодПравилаКонвертации>
				<СпособОтбораДанных>СтандартнаяВыборка</СпособОтбораДанных>
				<ОбъектВыборки>СправочникСсылка.ДоговорыКонтрагентов</ОбъектВыборки>
			</Правило>
			<Правило Отключить="false">
				<Код>Банки</Код>
				<Наименование>Банки</Наименование>
				<Порядок>350</Порядок>
				<КодПравилаКонвертации>Банки                                             </КодПравилаКонвертации>
				<СпособОтбораДанных>СтандартнаяВыборка</СпособОтбораДанных>
				<ОбъектВыборки>СправочникСсылка.КлассификаторБанков</ОбъектВыборки>
			</Правило>
			<Правило Отключить="false">
				<Код>БанковскиеСчета</Код>
				<Наименование>Банковские счета</Наименование>
				<Порядок>400</Порядок>
				<КодПравилаКонвертации>БанковскиеСчета                                   </КодПравилаКонвертации>
				<СпособОтбораДанных>СтандартнаяВыборка</СпособОтбораДанных>
				<ОбъектВыборки>СправочникСсылка.БанковскиеСчета</ОбъектВыборки>
			</Правило>
			<Правило Отключить="false">
				<Код>ВидыНоменклатуры</Код>
				<Наименование>Виды номенклатуры</Наименование>
				<Порядок>450</Порядок>
				<КодПравилаКонвертации>ТипыНоменклатуры                                  </КодПравилаКонвертации>
				<СпособОтбораДанных>СтандартнаяВыборка</СпособОтбораДанных>
				<ОбъектВыборки>СправочникСсылка.ВидыНоменклатуры</ОбъектВыборки>
			</Правило>
			<Правило Отключить="false">
				<Код>Номенклатура</Код>
				<Наименование>Номенклатура</Наименование>
				<Порядок>500</Порядок>
				<КодПравилаКонвертации>Номенклатура                                      </КодПравилаКонвертации>
				<СпособОтбораДанных>СтандартнаяВыборка</СпособОтбораДанных>
				<ОбъектВыборки>СправочникСсылка.Номенклатура</ОбъектВыборки>
			</Правило>
		</Группа>
		<Группа Отключить="false">
			<Код>Документы</Код>
			<Наименование>Документы</Наименование>
			<Порядок>100</Порядок>
			<Правило Отключить="false">
				<Код>ПоступлениеТоваровУслуг</Код>
				<Наименование>Поступление (акты, накладные)</Наименование>
				<Порядок>50</Порядок>
				<КодПравилаКонвертации>КорректировкаПоступления                          </КодПравилаКонвертации>
				<СпособОтбораДанных>СтандартнаяВыборка</СпособОтбораДанных>
				<ОбъектВыборки>ДокументСсылка.ПоступлениеТоваровУслуг</ОбъектВыборки>
				<ПередВыгрузкойОбъекта>Если Объект.ВидДокумента = Перечисления.ВидыДокументов.НакладнаяНаВозврат Тогда
	Отказ = Истина;
ИначеЕсли Объект.ВидОперации &lt;&gt; Перечисления.ВидыОпераций.Реализация Тогда
	Отказ = Истина;
КонецЕсли;</ПередВыгрузкойОбъекта>
			</Правило>
			<Правило Отключить="false">
				<Код>КорректировкаПоступления</Код>
				<Наименование>Корректировка поступления</Наименование>
				<Порядок>100</Порядок>
				<КодПравилаКонвертации>КорректировкаПоступления                          </КодПравилаКонвертации>
				<СпособОтбораДанных>СтандартнаяВыборка</СпособОтбораДанных>
				<ОбъектВыборки>ДокументСсылка.ПоступлениеТоваровУслуг</ОбъектВыборки>
				<ПередВыгрузкойОбъекта>Если Объект.ВидДокумента = Перечисления.ВидыДокументов.НакладнаяНаВозврат Тогда
	Отказ = Истина;
КонецЕсли;	
Если НЕ (Объект.ВидОперации = Перечисления.ВидыОпераций.Корректировка
	ИЛИ Объект.ВидОперации = Перечисления.ВидыОпераций.Исправление) Тогда
	Отказ = Истина;
КонецЕсли;</ПередВыгрузкойОбъекта>
			</Правило>
		</Группа>
	</ПравилаВыгрузкиДанных>
	<ПравилаОчисткиДанных/>
	<Алгоритмы>
		<Алгоритм Имя="ЗаполнитьЕдиницыИзмеренияГТД" ИспользуетсяПриЗагрузке="true">
			<Текст>ТаблицаПараметров = ?(ПараметрыОбъекта &lt;&gt; Неопределено, ПараметрыОбъекта.Получить("ТоварыТабличнаяЧасть"), ПараметрыОбъекта);

Если ТаблицаПараметров &lt;&gt; Неопределено Тогда
	
	ТаблицаЕдиницыИзмеренияГТД = Новый ТаблицаЗначений;
	ТаблицаЕдиницыИзмеренияГТД.Колонки.Добавить("НомерСтроки", Новый ОписаниеТипов("Число"));
	ТаблицаЕдиницыИзмеренияГТД.Колонки.Добавить("КодЕдиницыИзмеренияПоКлассификатору", Новый ОписаниеТипов("Строка", , Новый КвалификаторыСтроки(4)));
	ТаблицаЕдиницыИзмеренияГТД.Колонки.Добавить("НомерГТД", Новый ОписаниеТипов("Строка", , Новый КвалификаторыСтроки(200)));
	Для Каждого СтрокаПараметров Из ТаблицаПараметров Цикл
		НоваяСтрока = ТаблицаЕдиницыИзмеренияГТД.Добавить();
		НоваяСтрока.НомерСтроки = СтрокаПараметров.НомерСтроки + 1;
		НоваяСтрока.КодЕдиницыИзмеренияПоКлассификатору = СтрокаПараметров.КодЕдиницыИзмеренияПоКлассификатору;
		НоваяСтрока.НомерГТД = СтрокаПараметров.НомерГТД;
	КонецЦикла;
	
	Запрос = Новый Запрос;
	Запрос.Текст = 
		"ВЫБРАТЬ
		|	ТаблицаЕдиницыИзмерения.НомерСтроки КАК НомерСтроки,
		|	ТаблицаЕдиницыИзмерения.КодЕдиницыИзмеренияПоКлассификатору КАК КодЕдиницыИзмеренияПоКлассификатору,
		|	ТаблицаЕдиницыИзмерения.НомерГТД КАК НомерГТД
		|ПОМЕСТИТЬ ВТ_ЕдиницыИзмерения
		|ИЗ
		|	&amp;ТаблицаЕдиницыИзмерения КАК ТаблицаЕдиницыИзмерения
		|;
		|
		|////////////////////////////////////////////////////////////////////////////////
		|ВЫБРАТЬ
		|	ТаблицаТовары.НомерСтроки КАК НомерСтроки,
		|	ТаблицаТовары.Номенклатура КАК Номенклатура
		|ПОМЕСТИТЬ ВТ_Товары
		|ИЗ
		|	&amp;ТаблицаТовары КАК ТаблицаТовары
		|;
		|
		|////////////////////////////////////////////////////////////////////////////////
		|ВЫБРАТЬ
		|	ВТ_Товары.НомерСтроки КАК НомерСтроки,
		|	ВТ_Товары.Номенклатура КАК Номенклатура,
		|	ЕСТЬNULL(ЕдиницыИзмерения.Ссылка, Неопределено) КАК ЕдиницаИзмерения,
		|	ЕСТЬNULL(ЕдиницыИзмерения.Коэффициент, 0) КАК Коэффициент,
		|	ЕСТЬNULL(КлассификаторЕдиницИзмерения.Ссылка, Неопределено) КАК Классификатор
		|ИЗ
		|	ВТ_Товары КАК ВТ_Товары
		|		ВНУТРЕННЕЕ СОЕДИНЕНИЕ ВТ_ЕдиницыИзмерения КАК ВТ_ЕдиницыИзмерения
		|		ПО ВТ_Товары.НомерСтроки = ВТ_ЕдиницыИзмерения.НомерСтроки
		|		ЛЕВОЕ СОЕДИНЕНИЕ Справочник.КлассификаторЕдиницИзмерения КАК КлассификаторЕдиницИзмерения
		|		ПО (ВТ_ЕдиницыИзмерения.КодЕдиницыИзмеренияПоКлассификатору = КлассификаторЕдиницИзмерения.Код)
		|			И (НЕ КлассификаторЕдиницИзмерения.ПометкаУдаления)
		|		ЛЕВОЕ СОЕДИНЕНИЕ Справочник.ЕдиницыИзмерения КАК ЕдиницыИзмерения
		|		ПО (ВТ_Товары.Номенклатура = ЕдиницыИзмерения.Владелец ИЛИ ВТ_Товары.Номенклатура.ТипНоменклатуры = ЕдиницыИзмерения.Владелец)
		|			И (КлассификаторЕдиницИзмерения.Ссылка = ЕдиницыИзмерения.ЕдиницаПоКлассификатору)
		|			И (НЕ ЕдиницыИзмерения.ПометкаУдаления)
		|
		|УПОРЯДОЧИТЬ ПО
		|	НомерСтроки
		|;
		|
		|////////////////////////////////////////////////////////////////////////////////
		|ВЫБРАТЬ
		|	ВТ_Товары.НомерСтроки КАК НомерСтроки,
		|	ВТ_Товары.Номенклатура КАК Номенклатура,
		|	ЕСТЬNULL(ГТД.Ссылка, Неопределено) КАК ГТД,
		|	ВТ_ЕдиницыИзмерения.НомерГТД КАК НомерГТД
		|ИЗ
		|	ВТ_Товары КАК ВТ_Товары
		|		ВНУТРЕННЕЕ СОЕДИНЕНИЕ ВТ_ЕдиницыИзмерения КАК ВТ_ЕдиницыИзмерения
		|			ЛЕВОЕ СОЕДИНЕНИЕ Справочник.ГТД КАК ГТД
		|			ПО (ВТ_ЕдиницыИзмерения.НомерГТД = ГТД.Наименование
		|					И НЕ ГТД.ПометкаУдаления)
		|		ПО ВТ_Товары.НомерСтроки = ВТ_ЕдиницыИзмерения.НомерСтроки";	
	Запрос.УстановитьПараметр("ТаблицаЕдиницыИзмерения", ТаблицаЕдиницыИзмеренияГТД);
	Запрос.УстановитьПараметр("ТаблицаТовары", Объект.Товары.Выгрузить(,"НомерСтроки, Номенклатура"));
	
	ПакетЗапрос = Запрос.ВыполнитьПакет();
	Выборка = ПакетЗапрос[2].Выбрать();
	
	Пока Выборка.СледующийПоЗначениюПоля("НомерСтроки") Цикл
		СтрокаТаблицы = Объект.Товары[Выборка.НомерСтроки - 1];
		Если ЗначениеЗаполнено(Выборка.ЕдиницаИзмерения) Тогда
			СтрокаТаблицы.ЕдиницаИзмерения = Выборка.ЕдиницаИзмерения;
			СтрокаТаблицы.Коэффициент      = Выборка.Коэффициент;
		ИначеЕсли ЗначениеЗаполнено(Выборка.Классификатор) Тогда
			//ЕдиницаИзмерения = ЕдиницаИзмеренияНоменклатуры(СтрокаТаблицы.Номенклатура, Выборка.Классификатор);
			ЕдиницаИзмерения = неопределено;
			// посмотрим как у нас хранятся единицы измерения
			Если СтрокаТаблицы.Номенклатура.ТипНоменклатуры.ИспользованиеЕдиницИзмерения=1 Тогда // подчинены типу номенклатуры
				ВладелецЕдиниц = СтрокаТаблицы.Номенклатура.ТипНоменклатуры;
			Иначе // подчинены номенклатуре
				ВладелецЕдиниц = СтрокаТаблицы.Номенклатура;
			КонецЕсли;
			
			Если НЕ ЗначениеЗаполнено(ВладелецЕдиниц) Тогда
				Продолжить;
			КонецЕсли;
			
			// ищем единицу
			Запрос = Новый Запрос("ВЫБРАТЬ ПЕРВЫЕ 1
			|	ЕдиницыИзмерения.Ссылка,
			|	ЕдиницыИзмерения.Коэффициент КАК Коэффициент,
			|	ВЫБОР
			|		КОГДА ЕдиницыИзмерения.Наименование = &amp;ЕдиницаПоКлассификатору ТОГДА
			|			0
			|		ИНАЧЕ
			|			1
			|	КОНЕЦ КАК ПолеСортировки
			|ИЗ
			|	Справочник.ЕдиницыИзмерения КАК ЕдиницыИзмерения
			|ГДЕ
			|	ЕдиницыИзмерения.Владелец = &amp;ВладелецЕдиниц И 
			|	ЕдиницыИзмерения.ПометкаУдаления = ЛОЖЬ И 
			|	ЕдиницыИзмерения.ЕдиницаПоКлассификатору = &amp;БазоваяЕдиницаИзмерения
			|УПОРЯДОЧИТЬ ПО
			|	Коэффициент ВОЗР,
			|	ПолеСортировки ВОЗР
			|");
			
			Запрос.УстановитьПараметр("ВладелецЕдиниц",          ВладелецЕдиниц);
			Запрос.УстановитьПараметр("БазоваяЕдиницаИзмерения", Выборка.Классификатор);
			Запрос.УстановитьПараметр("ЕдиницаПоКлассификатору", Выборка.Классификатор.Наименование);
			Выборка = Запрос.Выполнить().Выбрать();
			// если нашли, то вернем единицу, иначе создадим новую
			Если Выборка.Следующий() Тогда
				ЕдиницаИзмерения = Выборка.Ссылка;
			Иначе
				// не нашли - создаем новую
				НоваяЕдиница=Справочники.ЕдиницыИзмерения.СоздатьЭлемент();
				НоваяЕдиница.Владелец=ВладелецЕдиниц;
				НоваяЕдиница.УстановитьНовыйКод("");
				НоваяЕдиница.ЕдиницаПоКлассификатору=Выборка.Классификатор;
				НоваяЕдиница.Коэффициент=1;
				НоваяЕдиница.Точность=2;
				НоваяЕдиница.Наименование=СокрЛП(Выборка.Классификатор);
				// ++ Alexku 02.02.2016
				Если СтрокаТаблицы.Номенклатура.ТипНоменклатуры.ИспользованиеЕдиницИзмерения = 2 Тогда
					// подчинены номенклатуре
					// перенесем вес и объем из карточки номенклатуры в основную единицу измерения
					НоваяЕдиница.Вес = СтрокаТаблицы.Номенклатура.Вес;
					НоваяЕдиница.Объем = СтрокаТаблицы.Номенклатура.Объем;
					ЭтотОбъект.Вес = 0;
					ЭтотОбъект.Объем = 0;
				КонецЕсли;
				// -- Alexku 
				НоваяЕдиница.Записать();
				ЕдиницаИзмерения = НоваяЕдиница.Ссылка;
			КонецЕсли;
			
			СтрокаТаблицы.ЕдиницаИзмерения = ЕдиницаИзмерения;
			СтрокаТаблицы.Коэффициент      = ЕдиницаИзмерения.Коэффициент;
		Иначе
			СтрокаТаблицы.ЕдиницаИзмерения = СтрокаТаблицы.Номенклатура.ОсновнаяЕдиницаИзмерения;
			СтрокаТаблицы.Коэффициент = СтрокаТаблицы.Номенклатура.ОсновнаяЕдиницаИзмерения.Коэффициент;
		КонецЕсли;
	КонецЦикла;
	
	Выборка = ПакетЗапрос[3].Выбрать();
	
	Пока Выборка.СледующийПоЗначениюПоля("НомерСтроки") Цикл
		СтрокаТаблицы = Объект.Товары[Выборка.НомерСтроки - 1];
		Если ЗначениеЗаполнено(Выборка.ГТД) Тогда
			СтрокаТаблицы.ГТД = Выборка.ГТД;
		ИначеЕсли ЗначениеЗаполнено(Выборка.НомерГТД) Тогда
			ГТД = Справочники.ГТД.СоздатьЭлемент();
			ГТД.Наименование = Выборка.НомерГТД;
			ГТД.Записать();
			СтрокаТаблицы.ГТД = ГТД;
		КонецЕсли;
	КонецЦикла;	
	
КонецЕсли;</Текст>
			<Параметры>Объект</Параметры>
		</Алгоритм>
	</Алгоритмы>
	<Запросы/>
</ПравилаОбмена>