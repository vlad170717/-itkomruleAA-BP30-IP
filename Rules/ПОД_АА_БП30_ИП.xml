<ПравилаОбмена>
	<ВерсияФормата РежимСовместимости="РежимСовместимостиСБСП20">2.01</ВерсияФормата>
	<Ид>29f7a4b1-9fff-467a-8638-7ddef107a4eb    </Ид>
	<Наименование>Автосалон5 --&gt; БухгалтерияПредприятия 3.0 ИП </Наименование>
	<ДатаВремяСоздания>2022-05-19T16:37:28</ДатаВремяСоздания>
	<Источник ВерсияПлатформы="8.0" ВерсияКонфигурации="5.0.07.03" СинонимКонфигурации="Альфа-Авто: Автосалон+Автосервис+Автозапчасти ПРОФ. Редакция 5">Автосалон5</Источник>
	<Приемник ВерсияПлатформы="8.0" ВерсияКонфигурации="3.0.74.69" СинонимКонфигурации="Бухгалтерия предприятия, редакция 3.0">БухгалтерияПредприятия</Приемник>
	<ПослеЗагрузкиПравилОбмена>
ВерсияПравил	= "//#%#150#%%#";
ВерсияПравил	= СтрЗаменить(ВерсияПравил, "//#%#","");
ВерсияПравил	= СтрЗаменить(ВерсияПравил, "#%%#","");
Сообщить("Версия правил " + ВерсияПравил);
// БП 3.0
Параметры.кодОргИПНиколаев = "00001";
Параметры.КодОсновногоСклада   = "00-000001";
Параметры.кодСкладаКомиссия = "00-000002";
Параметры.КодГруппыПоставщиков = "00-000003";
Параметры.КодГруппыПокупателей = "00-000005";
Параметры.КодГруппыТоваров     = "00-00000001";
Параметры.КодГруппыУСН         = "00-00000002";
Параметры.КодГруппыУслуг       = "00-00000003"; 
Параметры.КодНоменклатурнойГруппыТоваров = "00-000002";
Параметры.КодНоменклатурнойГруппыУСН = "00-000003";
Параметры.КодНоменклатурнойГруппыУслуги = "00-000004";
Параметры.кодОООАльфаМобил         = "ЦБ002462";</ПослеЗагрузкиПравилОбмена>
	<Параметры>
		<Параметр Имя="КодГруппыПокупателей                              " Наименование="Код группы поставщиков" ИспользуетсяПриЗагрузке="true" УстанавливатьВДиалоге="true" ТипЗначения="Строка" ПередаватьПараметрПриВыгрузке="true"/>
		<Параметр Имя="КодГруппыПоставщиков                              " Наименование="Код группы покупателей" ИспользуетсяПриЗагрузке="true" УстанавливатьВДиалоге="true" ТипЗначения="Строка" ПередаватьПараметрПриВыгрузке="true"/>
		<Параметр Имя="КодГруппыТоваров                                  " Наименование="Код группы товаров" ИспользуетсяПриЗагрузке="true" УстанавливатьВДиалоге="true" ТипЗначения="Строка" ПередаватьПараметрПриВыгрузке="true"/>
		<Параметр Имя="КодГруппыУслуг                                    " Наименование="Код группы услуг" ИспользуетсяПриЗагрузке="true" УстанавливатьВДиалоге="true" ТипЗначения="Строка" ПередаватьПараметрПриВыгрузке="true"/>
		<Параметр Имя="КодГруппыУСН                                      " Наименование="Код группы УСН" ИспользуетсяПриЗагрузке="true" УстанавливатьВДиалоге="true" ТипЗначения="Строка" ПередаватьПараметрПриВыгрузке="true"/>
		<Параметр Имя="КодНоменклатурнойГруппыТоваров                    " Наименование="КодНоменклатурнойГруппыТоваров" ИспользуетсяПриЗагрузке="true" УстанавливатьВДиалоге="true" ТипЗначения="Строка" ПередаватьПараметрПриВыгрузке="true"/>
		<Параметр Имя="КодНоменклатурнойГруппыУслуги                     " Наименование="КодНоменклатурнойГруппыУслуги" ИспользуетсяПриЗагрузке="true" УстанавливатьВДиалоге="true" ТипЗначения="Строка" ПередаватьПараметрПриВыгрузке="true"/>
		<Параметр Имя="КодНоменклатурнойГруппыУСН                        " Наименование="КодНоменклатурнойГруппыУСН" ИспользуетсяПриЗагрузке="true" УстанавливатьВДиалоге="true" ТипЗначения="Строка" ПередаватьПараметрПриВыгрузке="true"/>
		<Параметр Имя="кодОООАльфаМобил                                  " Наименование="кодОООАльфаМобил" ИспользуетсяПриЗагрузке="true" УстанавливатьВДиалоге="true" ТипЗначения="Строка" ПередаватьПараметрПриВыгрузке="true"/>
		<Параметр Имя="кодОргИПНиколаев                                  " Наименование="кодОргИПНиколаев" ИспользуетсяПриЗагрузке="true" УстанавливатьВДиалоге="true" ТипЗначения="Строка" ПередаватьПараметрПриВыгрузке="true"/>
		<Параметр Имя="КодОсновногоСклада                                " Наименование="КодОсновногоСклада" ИспользуетсяПриЗагрузке="true" УстанавливатьВДиалоге="true" ТипЗначения="Строка" ПередаватьПараметрПриВыгрузке="true"/>
		<Параметр Имя="кодСкладаКомиссия                                 " Наименование="кодСкладаКомиссия" ИспользуетсяПриЗагрузке="true" УстанавливатьВДиалоге="true" ТипЗначения="Строка" ПередаватьПараметрПриВыгрузке="true"/>
	</Параметры>
	<Обработки/>
	<ПравилаКонвертацииОбъектов>
		<Группа>
			<Код>Справочники</Код>
			<Наименование>Справочники</Наименование>
			<Порядок>50</Порядок>
			<Правило>
				<Код>Номенклатура</Код>
				<Наименование>Справочник: Номенклатура</Наименование>
				<Порядок>50</Порядок>
				<ПослеЗагрузки>Если Не Объект.ЭтоГруппа Тогда
	Если Найти(Объект.Комментарий, "#УСН#") &gt; 0 Тогда
		ГруппаУСН = Справочники.Номенклатура.НайтиПоКоду(Параметры.КодГруппыУСН);
		Если Не ГруппаУСН.Пустая() И ГруппаУСН.ЭтоГруппа Тогда
			Объект.Родитель = ГруппаУСН;
		КонецЕсли;
		НомГруппаУСН = Справочники.НоменклатурныеГруппы.НайтиПоКоду(Параметры.КодНоменклатурнойГруппыУСН);
		Если Не НомГруппаУСН.Пустая() Тогда
			Объект.НоменклатурнаяГруппа = НомГруппаУСН;
		КонецЕсли;
	Иначе
		ГруппаТоваров = Справочники.Номенклатура.НайтиПоКоду(Параметры.КодГруппыТоваров);
		Если Не ГруппаТоваров.Пустая() И ГруппаТоваров.ЭтоГруппа Тогда
			Объект.Родитель = ГруппаТоваров;
		КонецЕсли;
		НомГруппаТоваров = Справочники.НоменклатурныеГруппы.НайтиПоКоду(Параметры.КодНоменклатурнойГруппыТоваров);
		Если Не НомГруппаТоваров.Пустая() Тогда
			Объект.НоменклатурнаяГруппа = НомГруппаТоваров;
		КонецЕсли;
	КонецЕсли;		
	Объект.Комментарий  = СтрЗаменить(Объект.Комментарий, "#УСН#", "");
	Объект.Наименование = СокрЛП(Объект.Артикул) + ", " + СокрЛП(Объект.Наименование);
	Объект.ВидНоменклатуры = Справочники.ВидыНоменклатуры.НайтиПоНаименованию("Товары");
КонецЕсли;</ПослеЗагрузки>
				<ПоследовательностьПолейПоиска>  //Артикул         = СокрЛП(СвойстваПоиска.Получить("Артикул"));
  Код         = СокрЛП(СвойстваПоиска.Получить("Код"));
	Наименование    = СокрЛП(СвойстваПоиска.Получить("Наименование"));	
	УСН             = СвойстваПоиска.Получить("");
	Услуга          = СвойстваПоиска.Получить("Услуга");
	Если НомерВариантаПоиска = 1 Тогда
		//СсылкаНаОбъект = Справочники.Номенклатура.НайтиПоРеквизиту("Артикул", Артикул);
		СсылкаНаОбъект = Справочники.Номенклатура.НайтиПоКоду(Код);
		//Если СсылкаНаОбъект.Пустая() Тогда
		//	СсылкаНаОбъект = Справочники.Номенклатура.НайтиПоНаименованию(Артикул + ", " + Наименование);
		//КонецЕсли;
		//Если СсылкаНаОбъект.Пустая() Тогда
		//	СсылкаНаОбъект = Справочники.Номенклатура.НайтиПоНаименованию(Артикул + " " + Наименование);
		//КонецЕсли;	
		Если СсылкаНаОбъект.Пустая() Тогда
			СсылкаНаОбъект = Неопределено;
		КонецЕсли;	
		СвойстваПоиска.Удалить("");
		ПрекратитьПоиск = Истина;
	КонецЕсли;</ПоследовательностьПолейПоиска>
				<НеЗамещать>true</НеЗамещать>
				<ГенерироватьНовыйНомерИлиКодЕслиНеУказан>true</ГенерироватьНовыйНомерИлиКодЕслиНеУказан>
				<Источник>СправочникСсылка.Номенклатура</Источник>
				<Приемник>СправочникСсылка.Номенклатура</Приемник>
				<Свойства>
					<Свойство>
						<Код>1</Код>
						<Наименование>Артикул --&gt; Артикул</Наименование>
						<Порядок>50</Порядок>
						<Источник Имя="Артикул" Вид="Реквизит" Тип="Строка"/>
						<Приемник Имя="Артикул" Вид="Реквизит" Тип="Строка"/>
					</Свойство>
					<Свойство>
						<Код>2</Код>
						<Наименование>БазоваяЕдиницаИзмерения --&gt; ЕдиницаИзмерения</Наименование>
						<Порядок>100</Порядок>
						<Источник Имя="БазоваяЕдиницаИзмерения" Вид="Реквизит" Тип="СправочникСсылка.КлассификаторЕдиницИзмерения"/>
						<Приемник Имя="ЕдиницаИзмерения" Вид="Реквизит" Тип="СправочникСсылка.КлассификаторЕдиницИзмерения"/>
						<КодПравилаКонвертации>КлассификаторЕдиницИзмерения                      </КодПравилаКонвертации>
					</Свойство>
					<Свойство Отключить="true" Поиск="true">
						<Код>3</Код>
						<Наименование>Артикул --&gt; Код</Наименование>
						<Порядок>150</Порядок>
						<Источник Имя="Артикул" Вид="Реквизит" Тип="Строка"/>
						<Приемник Имя="Код" Вид="Свойство" Тип="Строка"/>
					</Свойство>
					<Свойство>
						<Код>4</Код>
						<Наименование>--&gt; Комментарий</Наименование>
						<Порядок>200</Порядок>
						<Источник Имя="" Вид=""/>
						<Приемник Имя="Комментарий" Вид="Реквизит" Тип="Строка"/>
						<ПередВыгрузкой>Если Источник.амбУСН Тогда
	Значение = Источник.Комментарий + "#УСН#";
Иначе	
	Значение = Источник.Комментарий;
КонецЕсли;</ПередВыгрузкой>
					</Свойство>
					<Свойство>
						<Код>5</Код>
						<Наименование>Наименование --&gt; Наименование</Наименование>
						<Порядок>250</Порядок>
						<Источник Имя="Наименование" Вид="Свойство" Тип="Строка"/>
						<Приемник Имя="Наименование" Вид="Свойство" Тип="Строка"/>
					</Свойство>
					<Свойство>
						<Код>6</Код>
						<Наименование>НаименованиеПолное --&gt; НаименованиеПолное</Наименование>
						<Порядок>300</Порядок>
						<Источник Имя="НаименованиеПолное" Вид="Реквизит" Тип="Строка"/>
						<Приемник Имя="НаименованиеПолное" Вид="Реквизит" Тип="Строка"/>
					</Свойство>
					<Свойство>
						<Код>7</Код>
						<Наименование>ПометкаУдаления --&gt; ПометкаУдаления</Наименование>
						<Порядок>350</Порядок>
						<Источник Имя="ПометкаУдаления" Вид="Свойство" Тип="Булево"/>
						<Приемник Имя="ПометкаУдаления" Вид="Свойство" Тип="Булево"/>
					</Свойство>
					<Свойство Отключить="true">
						<Код>8</Код>
						<Наименование>Производитель --&gt; Производитель</Наименование>
						<Порядок>400</Порядок>
						<Источник Имя="Производитель" Вид="Реквизит" Тип="СправочникСсылка.Производители"/>
						<Приемник Имя="Производитель" Вид="Реквизит" Тип="СправочникСсылка.Контрагенты"/>
					</Свойство>
					<Свойство Поиск="true">
						<Код>9</Код>
						<Наименование>--&gt; Родитель</Наименование>
						<Порядок>450</Порядок>
						<Источник Имя="" Вид=""/>
						<Приемник Имя="Родитель" Вид="Свойство" Тип="СправочникСсылка.Номенклатура"/>
						<КодПравилаКонвертации>НоменклатураПоКоду                                </КодПравилаКонвертации>
						<ПередВыгрузкой>Если Источник.амбУСН Тогда
	Значение = Параметры.КодГруппыУСН;
Иначе
	Значение = Параметры.КодГруппыТоваров;
КонецЕсли;</ПередВыгрузкой>
					</Свойство>
					<Свойство>
						<Код>11</Код>
						<Наименование>СтранаПроисхождения --&gt; СтранаПроисхождения</Наименование>
						<Порядок>550</Порядок>
						<Источник Имя="СтранаПроисхождения" Вид="Реквизит" Тип="СправочникСсылка.КлассификаторСтранМира"/>
						<Приемник Имя="СтранаПроисхождения" Вид="Реквизит" Тип="СправочникСсылка.СтраныМира"/>
						<КодПравилаКонвертации>КлассификаторСтранМира                            </КодПравилаКонвертации>
					</Свойство>
					<Свойство Поиск="true" Обязательное="true">
						<Код>12</Код>
						<Наименование>ЭтоГруппа --&gt; ЭтоГруппа</Наименование>
						<Порядок>600</Порядок>
						<Источник Имя="ЭтоГруппа" Вид="Свойство" Тип="Булево"/>
						<Приемник Имя="ЭтоГруппа" Вид="Свойство" Тип="Булево"/>
					</Свойство>
					<Свойство Поиск="true">
						<Код>13</Код>
						<Наименование>--&gt; Услуга</Наименование>
						<Порядок>650</Порядок>
						<Источник Имя="" Вид=""/>
						<Приемник Имя="Услуга" Вид="Реквизит" Тип="Булево"/>
						<ПередВыгрузкой>Если Источник.ВидНоменклатуры = Перечисления.ВидыНоменклатуры.Услуга Тогда
	Значение = Истина;
Иначе
	Значение = Ложь;
КонецЕсли;</ПередВыгрузкой>
					</Свойство>
					<Свойство Поиск="true">
						<Код>14</Код>
						<Наименование>амбУСН --&gt;</Наименование>
						<Порядок>700</Порядок>
						<Источник Имя="амбУСН" Вид="Реквизит" Тип="Булево"/>
						<Приемник Имя="" Вид=""/>
					</Свойство>
					<Свойство Поиск="true">
						<Код>15</Код>
						<Наименование>Код --&gt; Код</Наименование>
						<Порядок>750</Порядок>
						<Источник Имя="Код" Вид="Свойство" Тип="Строка"/>
						<Приемник Имя="Код" Вид="Свойство" Тип="Строка"/>
					</Свойство>
				</Свойства>
				<Значения/>
			</Правило>
			<Правило>
				<Код>КлассификаторЕдиницИзмерения</Код>
				<Наименование>Справочник: Классификатор единиц измерения</Наименование>
				<Порядок>100</Порядок>
				<НеЗамещать>true</НеЗамещать>
				<ГенерироватьНовыйНомерИлиКодЕслиНеУказан>true</ГенерироватьНовыйНомерИлиКодЕслиНеУказан>
				<Источник>СправочникСсылка.КлассификаторЕдиницИзмерения</Источник>
				<Приемник>СправочникСсылка.КлассификаторЕдиницИзмерения</Приемник>
				<Свойства>
					<Свойство>
						<Код>1</Код>
						<Наименование>Код --&gt; Код</Наименование>
						<Порядок>50</Порядок>
						<Источник Имя="Код" Вид="Свойство" Тип="Строка"/>
						<Приемник Имя="Код" Вид="Свойство" Тип="Строка"/>
					</Свойство>
					<Свойство Поиск="true">
						<Код>2</Код>
						<Наименование>Наименование --&gt; Наименование</Наименование>
						<Порядок>100</Порядок>
						<Источник Имя="Наименование" Вид="Свойство" Тип="Строка"/>
						<Приемник Имя="Наименование" Вид="Свойство" Тип="Строка"/>
					</Свойство>
				</Свойства>
				<Значения/>
			</Правило>
			<Правило>
				<Код>КлассификаторСтранМира</Код>
				<Наименование>Справочник: Классификатор стран мира</Наименование>
				<Порядок>150</Порядок>
				<НеЗамещать>true</НеЗамещать>
				<ГенерироватьНовыйНомерИлиКодЕслиНеУказан>true</ГенерироватьНовыйНомерИлиКодЕслиНеУказан>
				<Источник>СправочникСсылка.КлассификаторСтранМира</Источник>
				<Приемник>СправочникСсылка.СтраныМира</Приемник>
				<Свойства>
					<Свойство Поиск="true">
						<Код>1</Код>
						<Наименование>Код --&gt; Код</Наименование>
						<Порядок>50</Порядок>
						<Источник Имя="Код" Вид="Свойство" Тип="Строка"/>
						<Приемник Имя="Код" Вид="Свойство" Тип="Строка"/>
					</Свойство>
					<Свойство>
						<Код>2</Код>
						<Наименование>Наименование --&gt; Наименование</Наименование>
						<Порядок>100</Порядок>
						<Источник Имя="Наименование" Вид="Свойство" Тип="Строка"/>
						<Приемник Имя="Наименование" Вид="Свойство" Тип="Строка"/>
					</Свойство>
					<Свойство>
						<Код>3</Код>
						<Наименование>НаименованиеПолное --&gt; НаименованиеПолное</Наименование>
						<Порядок>150</Порядок>
						<Источник Имя="НаименованиеПолное" Вид="Реквизит" Тип="Строка"/>
						<Приемник Имя="НаименованиеПолное" Вид="Реквизит" Тип="Строка"/>
					</Свойство>
					<Свойство>
						<Код>4</Код>
						<Наименование>ПометкаУдаления --&gt; ПометкаУдаления</Наименование>
						<Порядок>200</Порядок>
						<Источник Имя="ПометкаУдаления" Вид="Свойство" Тип="Булево"/>
						<Приемник Имя="ПометкаУдаления" Вид="Свойство" Тип="Булево"/>
					</Свойство>
				</Свойства>
				<Значения/>
			</Правило>
			<Правило>
				<Код>Валюты</Код>
				<Наименование>Справочник: Валюты</Наименование>
				<Порядок>250</Порядок>
				<НеЗамещать>true</НеЗамещать>
				<Источник>СправочникСсылка.Валюты</Источник>
				<Приемник>СправочникСсылка.Валюты</Приемник>
				<Свойства>
					<Свойство Поиск="true">
						<Код>1</Код>
						<Наименование>Код --&gt; Код</Наименование>
						<Порядок>50</Порядок>
						<Источник Имя="Код" Вид="Свойство" Тип="Строка"/>
						<Приемник Имя="Код" Вид="Свойство" Тип="Строка"/>
					</Свойство>
					<Свойство>
						<Код>2</Код>
						<Наименование>Наименование --&gt; Наименование</Наименование>
						<Порядок>100</Порядок>
						<Источник Имя="Наименование" Вид="Свойство" Тип="Строка"/>
						<Приемник Имя="Наименование" Вид="Свойство" Тип="Строка"/>
					</Свойство>
				</Свойства>
				<Значения/>
			</Правило>
			<Правило>
				<Код>Контрагенты</Код>
				<Наименование>Справочник: Контрагенты и контакты</Наименование>
				<Порядок>300</Порядок>
				<ПослеЗагрузки>Объект.СтранаРегистрации = Справочники.СтраныМира.НайтиПоНаименованию("РОССИЯ", Истина);
Если Не Объект.ЭтоГруппа Тогда	
	Если Найти(Объект.Комментарий, "#Поставщик#") &gt; 0 Тогда
		ГруппаПоставщиков = Справочники.Контрагенты.НайтиПоКоду(Параметры.КодГруппыПоставщиков);
		Если Не ГруппаПоставщиков.Пустая() И ГруппаПоставщиков.ЭтоГруппа Тогда
			Объект.Родитель = ГруппаПоставщиков;
		КонецЕсли;			
	Иначе	
		ГруппаПокупателей = Справочники.Контрагенты.НайтиПоКоду(Параметры.КодГруппыПокупателей);
		Если Не ГруппаПокупателей.Пустая() И ГруппаПокупателей.ЭтоГруппа Тогда
			Объект.Родитель = ГруппаПокупателей;
		КонецЕсли;				
	КонецЕсли;
	Объект.Комментарий = СтрЗаменить(Объект.Комментарий, "#Поставщик#", "");
	Объект.Комментарий = СтрЗаменить(Объект.Комментарий, "#Покупатель#", "");  	
КонецЕсли;</ПослеЗагрузки>
				<ПоследовательностьПолейПоиска>Если НомерВариантаПоиска  = 1 Тогда
	ИНН = СвойстваПоиска.Получить("ИНН");
	Если ЗначениеЗаполнено(ИНН) Тогда
		СтрокаИменСвойствПоиска = "ИНН"; 
	Иначе
		СтрокаИменСвойствПоиска = "Наименование"; 
	КонецЕсли;	
	//СсылкаНаОбъект = Неопределено;
	//ПрекратитьПоиск  = Истина;	
КонецЕсли;</ПоследовательностьПолейПоиска>
				<НеСоздаватьЕслиНеНайден>true</НеСоздаватьЕслиНеНайден>
				<Источник>СправочникСсылка.Контрагенты</Источник>
				<Приемник>СправочникСсылка.Контрагенты</Приемник>
				<Свойства>
					<Свойство>
						<Код>1</Код>
						<Наименование>Код --&gt; Код</Наименование>
						<Порядок>50</Порядок>
						<Источник Имя="Код" Вид="Свойство" Тип="Строка"/>
						<Приемник Имя="Код" Вид="Свойство" Тип="Строка"/>
					</Свойство>
					<Свойство Отключить="true">
						<Код>2</Код>
						<Наименование>Наименование --&gt; Наименование</Наименование>
						<Порядок>100</Порядок>
						<Источник Имя="Наименование" Вид="Свойство" Тип="Строка"/>
						<Приемник Имя="Наименование" Вид="Свойство" Тип="Строка"/>
					</Свойство>
					<Свойство Отключить="true">
						<Код>3</Код>
						<Наименование>--&gt; Родитель</Наименование>
						<Порядок>150</Порядок>
						<Источник Имя="" Вид=""/>
						<Приемник Имя="Родитель" Вид="Свойство" Тип="СправочникСсылка.Контрагенты"/>
						<КодПравилаКонвертации>КонтрагентыПоКоду                                 </КодПравилаКонвертации>
						<ПередВыгрузкой>Если Источник.ВидКонтрагента = Перечисления.ВидыКонтрагентов.Поставщик Тогда
	Значение = Параметры.КодГруппыПоставщиков;
Иначе	
	Значение = Параметры.КодГруппыПокупателей;
КонецЕсли;</ПередВыгрузкой>
					</Свойство>
					<Свойство Обязательное="true">
						<Код>4</Код>
						<Наименование>ЭтоГруппа --&gt; ЭтоГруппа</Наименование>
						<Порядок>200</Порядок>
						<Источник Имя="ЭтоГруппа" Вид="Свойство" Тип="Булево"/>
						<Приемник Имя="ЭтоГруппа" Вид="Свойство" Тип="Булево"/>
					</Свойство>
					<Свойство Поиск="true">
						<Код>5</Код>
						<Наименование>ИНН --&gt; ИНН</Наименование>
						<Порядок>250</Порядок>
						<Источник Имя="ИНН" Вид="Реквизит" Тип="Строка"/>
						<Приемник Имя="ИНН" Вид="Реквизит" Тип="Строка"/>
					</Свойство>
					<Свойство Отключить="true">
						<Код>6</Код>
						<Наименование>КодПоОКПО --&gt; КодПоОКПО</Наименование>
						<Порядок>300</Порядок>
						<Источник Имя="КодПоОКПО" Вид="Реквизит" Тип="Строка"/>
						<Приемник Имя="КодПоОКПО" Вид="Реквизит" Тип="Строка"/>
					</Свойство>
					<Свойство>
						<Код>7</Код>
						<Наименование>--&gt; Комментарий</Наименование>
						<Порядок>350</Порядок>
						<Источник Имя="" Вид=""/>
						<Приемник Имя="Комментарий" Вид="Реквизит" Тип="Строка"/>
						<ПередВыгрузкой>ТекстКомментария = Источник.Наименование + " Тип:"+ ?(Источник.ВидКонтрагента = Перечисления.ВидыКонтрагентов.Поставщик, "Поставщик", "Покупатель");
Значение = Источник.Комментарий + "# " + ТекстКомментария + "#";</ПередВыгрузкой>
					</Свойство>
					<Свойство Отключить="true">
						<Код>8</Код>
						<Наименование>КПП --&gt; КПП</Наименование>
						<Порядок>400</Порядок>
						<Источник Имя="КПП" Вид="Реквизит" Тип="Строка"/>
						<Приемник Имя="КПП" Вид="Реквизит" Тип="Строка"/>
					</Свойство>
					<Свойство Отключить="true">
						<Код>9</Код>
						<Наименование>НаименованиеПолное --&gt; НаименованиеПолное</Наименование>
						<Порядок>450</Порядок>
						<Источник Имя="НаименованиеПолное" Вид="Реквизит" Тип="Строка"/>
						<Приемник Имя="НаименованиеПолное" Вид="Реквизит" Тип="Строка"/>
					</Свойство>
					<Свойство Отключить="true">
						<Код>10</Код>
						<Наименование>ОсновнойБанковскийСчет --&gt; ОсновнойБанковскийСчет</Наименование>
						<Порядок>500</Порядок>
						<Источник Имя="ОсновнойБанковскийСчет" Вид="Реквизит" Тип="СправочникСсылка.БанковскиеСчета"/>
						<Приемник Имя="ОсновнойБанковскийСчет" Вид="Реквизит" Тип="СправочникСсылка.БанковскиеСчета"/>
						<КодПравилаКонвертации>БанковскиеСчета                                   </КодПравилаКонвертации>
					</Свойство>
					<Свойство Отключить="true">
						<Код>11</Код>
						<Наименование>ПометкаУдаления --&gt; ПометкаУдаления</Наименование>
						<Порядок>550</Порядок>
						<Источник Имя="ПометкаУдаления" Вид="Свойство" Тип="Булево"/>
						<Приемник Имя="ПометкаУдаления" Вид="Свойство" Тип="Булево"/>
					</Свойство>
					<Свойство Отключить="true">
						<Код>12</Код>
						<Наименование>--&gt; ГоловнойКонтрагент</Наименование>
						<Порядок>600</Порядок>
						<Источник Имя="" Вид=""/>
						<Приемник Имя="ГоловнойКонтрагент" Вид="Реквизит" Тип="СправочникСсылка.Контрагенты"/>
						<КодПравилаКонвертации>Контрагенты                                       </КодПравилаКонвертации>
						<ПередВыгрузкой>Значение = Источник</ПередВыгрузкой>
					</Свойство>
					<Свойство Отключить="true">
						<Код>13</Код>
						<Наименование>ДатаРегистрации --&gt; ДатаРегистрации</Наименование>
						<Порядок>650</Порядок>
						<Источник Имя="ДатаРегистрации" Вид="Реквизит" Тип="Дата"/>
						<Приемник Имя="ДатаРегистрации" Вид="Реквизит" Тип="Дата"/>
					</Свойство>
					<Свойство>
						<Код>14</Код>
						<Наименование>--&gt; ЮридическоеФизическоеЛицо</Наименование>
						<Порядок>700</Порядок>
						<Источник Имя="" Вид=""/>
						<Приемник Имя="ЮридическоеФизическоеЛицо" Вид="Реквизит" Тип="ПеречислениеСсылка.ЮридическоеФизическоеЛицо"/>
						<ПередВыгрузкой>ИНН = Источник.ИНН;
ДлинаИНН = СтрДлина(СокрЛП(ИНН));
Если ДлинаИНН = 10 ИЛИ ДлинаИНН = 0 Тогда
	Значение = "ЮридическоеЛицо";
Иначе	
	Значение = "ФизическоеЛицо";
КонецЕсли;</ПередВыгрузкой>
					</Свойство>
					<Свойство Отключить="true">
						<Код>15</Код>
						<Наименование>--&gt; СтранаРегистрации</Наименование>
						<Порядок>750</Порядок>
						<Источник Имя="" Вид=""/>
						<Приемник Имя="СтранаРегистрации" Вид="Реквизит" Тип="СправочникСсылка.СтраныМира"/>
						<ПередВыгрузкой>Значение = "РОССИЯ";</ПередВыгрузкой>
					</Свойство>
				</Свойства>
				<Значения/>
			</Правило>
			<Правило>
				<Код>Организации</Код>
				<Наименование>Справочник: Организации</Наименование>
				<Порядок>350</Порядок>
				<НеСоздаватьЕслиНеНайден>true</НеСоздаватьЕслиНеНайден>
				<Источник>СправочникСсылка.Организации</Источник>
				<Приемник>СправочникСсылка.Организации</Приемник>
				<Свойства>
					<Свойство>
						<Код>1</Код>
						<Наименование>Код --&gt; Код</Наименование>
						<Порядок>50</Порядок>
						<Источник Имя="Код" Вид="Свойство" Тип="Строка"/>
						<Приемник Имя="Код" Вид="Свойство" Тип="Строка"/>
					</Свойство>
					<Свойство>
						<Код>2</Код>
						<Наименование>Наименование --&gt; Наименование</Наименование>
						<Порядок>100</Порядок>
						<Источник Имя="Наименование" Вид="Свойство" Тип="Строка"/>
						<Приемник Имя="Наименование" Вид="Свойство" Тип="Строка"/>
					</Свойство>
					<Свойство Поиск="true">
						<Код>3</Код>
						<Наименование>ИНН --&gt; ИНН</Наименование>
						<Порядок>150</Порядок>
						<Источник Имя="ИНН" Вид="Реквизит" Тип="Строка"/>
						<Приемник Имя="ИНН" Вид="Реквизит" Тип="Строка"/>
					</Свойство>
				</Свойства>
				<Значения/>
			</Правило>
			<Правило>
				<Код>БанковскиеСчета</Код>
				<Наименование>Справочник: Банковские счета</Наименование>
				<Порядок>400</Порядок>
				<НеЗамещать>true</НеЗамещать>
				<Источник>СправочникСсылка.БанковскиеСчета</Источник>
				<Приемник>СправочникСсылка.БанковскиеСчета</Приемник>
				<Свойства>
					<Свойство>
						<Код>1</Код>
						<Наименование>Банк --&gt; Банк</Наименование>
						<Порядок>50</Порядок>
						<Источник Имя="Банк" Вид="Реквизит" Тип="СправочникСсылка.Банки"/>
						<Приемник Имя="Банк" Вид="Реквизит" Тип="СправочникСсылка.Банки"/>
						<КодПравилаКонвертации>Банки                                             </КодПравилаКонвертации>
					</Свойство>
					<Свойство>
						<Код>2</Код>
						<Наименование>БанкДляРасчетов --&gt; БанкДляРасчетов</Наименование>
						<Порядок>100</Порядок>
						<Источник Имя="БанкДляРасчетов" Вид="Реквизит" Тип="СправочникСсылка.Банки"/>
						<Приемник Имя="БанкДляРасчетов" Вид="Реквизит" Тип="СправочникСсылка.Банки"/>
						<КодПравилаКонвертации>Банки                                             </КодПравилаКонвертации>
					</Свойство>
					<Свойство>
						<Код>3</Код>
						<Наименование>ВалютаДенежныхСредств --&gt; ВалютаДенежныхСредств</Наименование>
						<Порядок>150</Порядок>
						<Источник Имя="ВалютаДенежныхСредств" Вид="Реквизит" Тип="СправочникСсылка.Валюты"/>
						<Приемник Имя="ВалютаДенежныхСредств" Вид="Реквизит" Тип="СправочникСсылка.Валюты"/>
						<КодПравилаКонвертации>Валюты                                            </КодПравилаКонвертации>
					</Свойство>
					<Свойство>
						<Код>4</Код>
						<Наименование>ВидСчета --&gt; ВидСчета</Наименование>
						<Порядок>200</Порядок>
						<Источник Имя="ВидСчета" Вид="Реквизит" Тип="Строка"/>
						<Приемник Имя="ВидСчета" Вид="Реквизит" Тип="Строка"/>
					</Свойство>
					<Свойство Поиск="true">
						<Код>5</Код>
						<Наименование>Владелец --&gt; Владелец</Наименование>
						<Порядок>250</Порядок>
						<Источник Имя="Владелец" Вид="Свойство"/>
						<Приемник Имя="Владелец" Вид="Свойство"/>
						<ПередВыгрузкой>Если ТипЗнч(Источник.Владелец) = Тип("СправочникСсылка.Организации") Тогда
	ИмяПКО = "Организации";
Иначе	
	ИмяПКО = "Контрагенты";
КонецЕсли;</ПередВыгрузкой>
					</Свойство>
					<Свойство>
						<Код>6</Код>
						<Наименование>ДатаЗакрытия --&gt; ДатаЗакрытия</Наименование>
						<Порядок>300</Порядок>
						<Источник Имя="ДатаЗакрытия" Вид="Реквизит" Тип="Дата"/>
						<Приемник Имя="ДатаЗакрытия" Вид="Реквизит" Тип="Дата"/>
					</Свойство>
					<Свойство>
						<Код>7</Код>
						<Наименование>ДатаОткрытия --&gt; ДатаОткрытия</Наименование>
						<Порядок>350</Порядок>
						<Источник Имя="ДатаОткрытия" Вид="Реквизит" Тип="Дата"/>
						<Приемник Имя="ДатаОткрытия" Вид="Реквизит" Тип="Дата"/>
					</Свойство>
					<Свойство>
						<Код>8</Код>
						<Наименование>Код --&gt; Код</Наименование>
						<Порядок>400</Порядок>
						<Источник Имя="Код" Вид="Свойство" Тип="Строка"/>
						<Приемник Имя="Код" Вид="Свойство" Тип="Строка"/>
					</Свойство>
					<Свойство>
						<Код>9</Код>
						<Наименование>МесяцПрописью --&gt; МесяцПрописью</Наименование>
						<Порядок>450</Порядок>
						<Источник Имя="МесяцПрописью" Вид="Реквизит" Тип="Булево"/>
						<Приемник Имя="МесяцПрописью" Вид="Реквизит" Тип="Булево"/>
					</Свойство>
					<Свойство>
						<Код>10</Код>
						<Наименование>Наименование --&gt; Наименование</Наименование>
						<Порядок>500</Порядок>
						<Источник Имя="Наименование" Вид="Свойство" Тип="Строка"/>
						<Приемник Имя="Наименование" Вид="Свойство" Тип="Строка"/>
					</Свойство>
					<Свойство>
						<Код>11</Код>
						<Наименование>НомерИДатаРазрешения --&gt; НомерИДатаРазрешения</Наименование>
						<Порядок>550</Порядок>
						<Источник Имя="НомерИДатаРазрешения" Вид="Реквизит" Тип="Строка"/>
						<Приемник Имя="НомерИДатаРазрешения" Вид="Реквизит" Тип="Строка"/>
					</Свойство>
					<Свойство Поиск="true">
						<Код>12</Код>
						<Наименование>НомерСчета --&gt; НомерСчета</Наименование>
						<Порядок>600</Порядок>
						<Источник Имя="НомерСчета" Вид="Реквизит" Тип="Строка"/>
						<Приемник Имя="НомерСчета" Вид="Реквизит" Тип="Строка"/>
					</Свойство>
					<Свойство>
						<Код>13</Код>
						<Наименование>ПометкаУдаления --&gt; ПометкаУдаления</Наименование>
						<Порядок>650</Порядок>
						<Источник Имя="ПометкаУдаления" Вид="Свойство" Тип="Булево"/>
						<Приемник Имя="ПометкаУдаления" Вид="Свойство" Тип="Булево"/>
					</Свойство>
					<Свойство>
						<Код>14</Код>
						<Наименование>СуммаБезКопеек --&gt; СуммаБезКопеек</Наименование>
						<Порядок>700</Порядок>
						<Источник Имя="СуммаБезКопеек" Вид="Реквизит" Тип="Булево"/>
						<Приемник Имя="СуммаБезКопеек" Вид="Реквизит" Тип="Булево"/>
					</Свойство>
				</Свойства>
				<Значения/>
			</Правило>
			<Правило>
				<Код>Банки</Код>
				<Наименование>Справочник: Банки</Наименование>
				<Порядок>450</Порядок>
				<НеЗамещать>true</НеЗамещать>
				<Источник>СправочникСсылка.Банки</Источник>
				<Приемник>СправочникСсылка.Банки</Приемник>
				<Свойства>
					<Свойство>
						<Код>1</Код>
						<Наименование>Адрес --&gt; Адрес</Наименование>
						<Порядок>50</Порядок>
						<Источник Имя="Адрес" Вид="Реквизит" Тип="Строка"/>
						<Приемник Имя="Адрес" Вид="Реквизит" Тип="Строка"/>
					</Свойство>
					<Свойство>
						<Код>2</Код>
						<Наименование>Город --&gt; Город</Наименование>
						<Порядок>100</Порядок>
						<Источник Имя="Город" Вид="Реквизит" Тип="Строка"/>
						<Приемник Имя="Город" Вид="Реквизит" Тип="Строка"/>
					</Свойство>
					<Свойство Поиск="true">
						<Код>3</Код>
						<Наименование>Код --&gt; Код</Наименование>
						<Порядок>150</Порядок>
						<Источник Имя="Код" Вид="Свойство" Тип="Строка"/>
						<Приемник Имя="Код" Вид="Свойство" Тип="Строка"/>
					</Свойство>
					<Свойство>
						<Код>4</Код>
						<Наименование>КоррСчет --&gt; КоррСчет</Наименование>
						<Порядок>200</Порядок>
						<Источник Имя="КоррСчет" Вид="Реквизит" Тип="Строка"/>
						<Приемник Имя="КоррСчет" Вид="Реквизит" Тип="Строка"/>
					</Свойство>
					<Свойство>
						<Код>5</Код>
						<Наименование>Наименование --&gt; Наименование</Наименование>
						<Порядок>250</Порядок>
						<Источник Имя="Наименование" Вид="Свойство" Тип="Строка"/>
						<Приемник Имя="Наименование" Вид="Свойство" Тип="Строка"/>
					</Свойство>
					<Свойство>
						<Код>6</Код>
						<Наименование>ПометкаУдаления --&gt; ПометкаУдаления</Наименование>
						<Порядок>300</Порядок>
						<Источник Имя="ПометкаУдаления" Вид="Свойство" Тип="Булево"/>
						<Приемник Имя="ПометкаУдаления" Вид="Свойство" Тип="Булево"/>
					</Свойство>
					<Свойство>
						<Код>7</Код>
						<Наименование>Родитель --&gt; Родитель</Наименование>
						<Порядок>350</Порядок>
						<Источник Имя="Родитель" Вид="Свойство" Тип="СправочникСсылка.Банки"/>
						<Приемник Имя="Родитель" Вид="Свойство" Тип="СправочникСсылка.Банки"/>
						<КодПравилаКонвертации>Банки                                             </КодПравилаКонвертации>
					</Свойство>
					<Свойство>
						<Код>8</Код>
						<Наименование>Телефоны --&gt; Телефоны</Наименование>
						<Порядок>400</Порядок>
						<Источник Имя="Телефоны" Вид="Реквизит" Тип="Строка"/>
						<Приемник Имя="Телефоны" Вид="Реквизит" Тип="Строка"/>
					</Свойство>
					<Свойство Обязательное="true">
						<Код>9</Код>
						<Наименование>ЭтоГруппа --&gt; ЭтоГруппа</Наименование>
						<Порядок>450</Порядок>
						<Источник Имя="ЭтоГруппа" Вид="Свойство" Тип="Булево"/>
						<Приемник Имя="ЭтоГруппа" Вид="Свойство" Тип="Булево"/>
					</Свойство>
				</Свойства>
				<Значения/>
			</Правило>
			<Правило>
				<Код>КонтрагентыПоКоду</Код>
				<Наименование>:</Наименование>
				<Порядок>500</Порядок>
				<НеСоздаватьЕслиНеНайден>true</НеСоздаватьЕслиНеНайден>
				<Приемник>СправочникСсылка.Контрагенты</Приемник>
				<Свойства>
					<Свойство Поиск="true">
						<Код>1</Код>
						<Наименование>--&gt; Код</Наименование>
						<Порядок>50</Порядок>
						<Источник Имя="" Вид=""/>
						<Приемник Имя="Код" Вид="Свойство" Тип="Строка"/>
						<ПередВыгрузкой>Значение = Источник</ПередВыгрузкой>
					</Свойство>
					<Свойство Поиск="true" Обязательное="true">
						<Код>2</Код>
						<Наименование>--&gt; ЭтоГруппа</Наименование>
						<Порядок>100</Порядок>
						<Источник Имя="" Вид=""/>
						<Приемник Имя="ЭтоГруппа" Вид="Свойство" Тип="Булево"/>
						<ПередВыгрузкой>Значение = Истина;</ПередВыгрузкой>
					</Свойство>
				</Свойства>
				<Значения/>
			</Правило>
			<Правило>
				<Код>НоменклатураПоКоду</Код>
				<Наименование>:</Наименование>
				<Порядок>550</Порядок>
				<НеЗамещать>true</НеЗамещать>
				<Приемник>СправочникСсылка.Номенклатура</Приемник>
				<Свойства>
					<Свойство Поиск="true">
						<Код>1</Код>
						<Наименование>--&gt; Код</Наименование>
						<Порядок>50</Порядок>
						<Источник Имя="" Вид=""/>
						<Приемник Имя="Код" Вид="Свойство" Тип="Строка"/>
						<ПередВыгрузкой>Значение = Источник</ПередВыгрузкой>
					</Свойство>
					<Свойство Поиск="true" Обязательное="true">
						<Код>2</Код>
						<Наименование>--&gt; ЭтоГруппа</Наименование>
						<Порядок>100</Порядок>
						<Источник Имя="" Вид=""/>
						<Приемник Имя="ЭтоГруппа" Вид="Свойство" Тип="Булево"/>
						<ПередВыгрузкой>Значение = Истина</ПередВыгрузкой>
					</Свойство>
				</Свойства>
				<Значения/>
			</Правило>
			<Правило>
				<Код>Автоработы</Код>
				<Наименование>Справочник: Автоработы</Наименование>
				<Порядок>600</Порядок>
				<ПослеЗагрузки>Объект.ВидНоменклатуры = Справочники.ВидыНоменклатуры.НайтиПоНаименованию("Услуги ЕНВД");
ГруппаНоменклатуры = Справочники.Номенклатура.НайтиПоКоду(Параметры.КодГруппыУслуг);
Если ГруппаНоменклатуры.ЭтоГруппа Тогда
	Объект.Родитель = ГруппаНоменклатуры;
Иначе	
	Объект.Родитель = Справочники.Номенклатура.ПустаяСсылка();
КонецЕсли;
НомГруппаУслуги = Справочники.НоменклатурныеГруппы.НайтиПоКоду(Параметры.КодНоменклатурнойГруппыУслуги);
Если Не НомГруппаУслуги.Пустая() Тогда
	Объект.НоменклатурнаяГруппа = НомГруппаУслуги;
КонецЕсли;</ПослеЗагрузки>
				<ПоследовательностьПолейПоиска>
Артикул = СвойстваПоиска.Получить("Артикул");
Если НомерВариантаПоиска  = 1 Тогда
	РодительСсылка = Справочники.Номенклатура.НайтиПоКоду(Параметры.КодГруппыУслуг);
	СсылкаНаОбъект = Справочники.Номенклатура.НайтиПоРеквизиту("Артикул", Артикул, РодительСсылка);
	Если СсылкаНаОбъект.Пустая() Тогда
		СсылкаНаОбъект = Неопределено;
	КонецЕсли;
	ПрекратитьПоиск = Истина;
КонецЕсли;</ПоследовательностьПолейПоиска>
				<ГенерироватьНовыйНомерИлиКодЕслиНеУказан>true</ГенерироватьНовыйНомерИлиКодЕслиНеУказан>
				<Источник>СправочникСсылка.Автоработы</Источник>
				<Приемник>СправочникСсылка.Номенклатура</Приемник>
				<Свойства>
					<Свойство>
						<Код>2</Код>
						<Наименование>Комментарий --&gt; Комментарий</Наименование>
						<Порядок>100</Порядок>
						<Источник Имя="Комментарий" Вид="Реквизит" Тип="Строка"/>
						<Приемник Имя="Комментарий" Вид="Реквизит" Тип="Строка"/>
					</Свойство>
					<Свойство>
						<Код>3</Код>
						<Наименование>--&gt; НаименованиеПолное</Наименование>
						<Порядок>150</Порядок>
						<Источник Имя="" Вид=""/>
						<Приемник Имя="НаименованиеПолное" Вид="Реквизит" Тип="Строка"/>
						<ПередВыгрузкой>Если ПустаяСтрока(Источник.НаименованиеПолное) Тогда
	Значение = Источник.Наименование;
Иначе
	Значение = Источник.НаименованиеПолное;
КонецЕсли;</ПередВыгрузкой>
					</Свойство>
					<Свойство Поиск="true">
						<Код>4</Код>
						<Наименование>Код --&gt; Артикул</Наименование>
						<Порядок>200</Порядок>
						<Источник Имя="Код" Вид="Свойство" Тип="Строка"/>
						<Приемник Имя="Артикул" Вид="Реквизит" Тип="Строка"/>
					</Свойство>
					<Свойство>
						<Код>5</Код>
						<Наименование>Наименование --&gt; Наименование</Наименование>
						<Порядок>250</Порядок>
						<Источник Имя="Наименование" Вид="Свойство" Тип="Строка"/>
						<Приемник Имя="Наименование" Вид="Свойство" Тип="Строка"/>
					</Свойство>
					<Свойство>
						<Код>6</Код>
						<Наименование>ПометкаУдаления --&gt; ПометкаУдаления</Наименование>
						<Порядок>300</Порядок>
						<Источник Имя="ПометкаУдаления" Вид="Свойство" Тип="Булево"/>
						<Приемник Имя="ПометкаУдаления" Вид="Свойство" Тип="Булево"/>
					</Свойство>
					<Свойство Поиск="true" Обязательное="true">
						<Код>7</Код>
						<Наименование>ЭтоГруппа --&gt; ЭтоГруппа</Наименование>
						<Порядок>350</Порядок>
						<Источник Имя="ЭтоГруппа" Вид="Свойство" Тип="Булево"/>
						<Приемник Имя="ЭтоГруппа" Вид="Свойство" Тип="Булево"/>
					</Свойство>
					<Свойство>
						<Код>8</Код>
						<Наименование>--&gt; Услуга</Наименование>
						<Порядок>400</Порядок>
						<Источник Имя="" Вид=""/>
						<Приемник Имя="Услуга" Вид="Реквизит" Тип="Булево"/>
						<ПередВыгрузкой>Значение = Истина;</ПередВыгрузкой>
					</Свойство>
					<Свойство Отключить="true">
						<Код>9</Код>
						<Наименование>--&gt; Родитель</Наименование>
						<Порядок>450</Порядок>
						<Источник Имя="" Вид=""/>
						<Приемник Имя="Родитель" Вид="Свойство" Тип="СправочникСсылка.Номенклатура"/>
						<КодПравилаКонвертации>НоменклатураПоКоду                                </КодПравилаКонвертации>
						<ПередВыгрузкой>Значение = Параметры.КодГруппыУслуг</ПередВыгрузкой>
					</Свойство>
					<Свойство>
						<Код>10</Код>
						<Наименование>--&gt; ВидНоменклатуры</Наименование>
						<Порядок>500</Порядок>
						<Источник Имя="" Вид=""/>
						<Приемник Имя="ВидНоменклатуры" Вид="Реквизит" Тип="СправочникСсылка.ВидыНоменклатуры"/>
						<ПередВыгрузкой>Значение = "Услуги";</ПередВыгрузкой>
					</Свойство>
				</Свойства>
				<Значения/>
			</Правило>
			<Правило>
				<Код>КлассификаторЕдиницИзмеренияПоНаменованию</Код>
				<Наименование>:</Наименование>
				<Порядок>650</Порядок>
				<ГенерироватьНовыйНомерИлиКодЕслиНеУказан>true</ГенерироватьНовыйНомерИлиКодЕслиНеУказан>
				<Приемник>СправочникСсылка.КлассификаторЕдиницИзмерения</Приемник>
				<Свойства>
					<Свойство Поиск="true">
						<Код>1</Код>
						<Наименование>--&gt; Наименование</Наименование>
						<Порядок>50</Порядок>
						<Источник Имя="" Вид=""/>
						<Приемник Имя="Наименование" Вид="Свойство" Тип="Строка"/>
						<ПередВыгрузкой>Значение = Источник;</ПередВыгрузкой>
					</Свойство>
				</Свойства>
				<Значения/>
			</Правило>
			<Правило>
				<Код>НоменклатураУслуги</Код>
				<Наименование>:</Наименование>
				<Порядок>700</Порядок>
				<Приемник>СправочникСсылка.Номенклатура</Приемник>
				<Свойства>
					<Свойство Поиск="true">
						<Код>1</Код>
						<Наименование>--&gt; Код</Наименование>
						<Порядок>50</Порядок>
						<Источник Имя="" Вид=""/>
						<Приемник Имя="Код" Вид="Свойство" Тип="Строка"/>
						<ПередВыгрузкой>Значение = Параметры.КодГруппыУслуг;</ПередВыгрузкой>
					</Свойство>
					<Свойство Поиск="true" Обязательное="true">
						<Код>2</Код>
						<Наименование>--&gt; ЭтоГруппа</Наименование>
						<Порядок>100</Порядок>
						<Источник Имя="" Вид=""/>
						<Приемник Имя="ЭтоГруппа" Вид="Свойство" Тип="Булево"/>
						<ПередВыгрузкой>Значение = Истина</ПередВыгрузкой>
					</Свойство>
				</Свойства>
				<Значения/>
			</Правило>
			<Правило>
				<Код>КлассификатСтранМира</Код>
				<Наименование>Справочник: КлассификаторСтранМира</Наименование>
				<Порядок>750</Порядок>
				<СинхронизироватьПоИдентификатору>true</СинхронизироватьПоИдентификатору>
				<Источник>СправочникСсылка.КлассификаторСтранМира</Источник>
				<Приемник>СправочникСсылка.СтраныМира</Приемник>
				<Свойства>
					<Свойство Поиск="true">
						<Код>1</Код>
						<Наименование>Код --&gt; Код</Наименование>
						<Порядок>50</Порядок>
						<Источник Имя="Код" Вид="Свойство" Тип="Строка"/>
						<Приемник Имя="Код" Вид="Свойство" Тип="Строка"/>
					</Свойство>
					<Свойство>
						<Код>2</Код>
						<Наименование>Наименование --&gt; Наименование</Наименование>
						<Порядок>100</Порядок>
						<Источник Имя="Наименование" Вид="Свойство" Тип="Строка"/>
						<Приемник Имя="Наименование" Вид="Свойство" Тип="Строка"/>
					</Свойство>
					<Свойство>
						<Код>3</Код>
						<Наименование>НаименованиеПолное --&gt; НаименованиеПолное</Наименование>
						<Порядок>150</Порядок>
						<Источник Имя="НаименованиеПолное" Вид="Реквизит" Тип="Строка"/>
						<Приемник Имя="НаименованиеПолное" Вид="Реквизит" Тип="Строка"/>
					</Свойство>
					<Свойство>
						<Код>4</Код>
						<Наименование>ПометкаУдаления --&gt; ПометкаУдаления</Наименование>
						<Порядок>200</Порядок>
						<Источник Имя="ПометкаУдаления" Вид="Свойство" Тип="Булево"/>
						<Приемник Имя="ПометкаУдаления" Вид="Свойство" Тип="Булево"/>
					</Свойство>
				</Свойства>
				<Значения/>
			</Правило>
		</Группа>
		<Группа>
			<Код>Документы</Код>
			<Наименование>Документы</Наименование>
			<Порядок>100</Порядок>
			<Правило>
				<Код>ПоступлениеТоваровУслуг</Код>
				<Наименование>Документ: Поступление товаров</Наименование>
				<Порядок>50</Порядок>
				<ПередВыгрузкой>Отказ = Источник.амбООО;</ПередВыгрузкой>
				<ПередЗагрузкой>РежимЗаписи  = "Запись";</ПередЗагрузкой>
				<ПриЗагрузке>РежимЗаписи  = "Запись";</ПриЗагрузке>
				<ПослеЗагрузки>Объект.СчетУчетаРасчетовСКонтрагентом = ПланыСчетов.Хозрасчетный.РасчетыСПоставщиками;
Объект.СчетУчетаРасчетовПоАвансам = ПланыСчетов.Хозрасчетный.РасчетыПоАвансамВыданным;

//Объект.СчетНаОплатуПоставщика = Документы.СчетНаОплатуПоставщика.НайтиПоНомеру(Объект.Номер,Объект.Дата);
Объект.Склад = Справочники.Склады.НайтиПоКоду(Параметры.КодОсновногоСклада);
Договор = Справочники.ДоговорыКонтрагентов.НайтиПоРеквизиту("ВидДоговора",Перечисления.ВидыДоговоровКонтрагентов.СПоставщиком,,Объект.Контрагент);
Если НЕ Договор = Справочники.ДоговорыКонтрагентов.ПустаяСсылка() Тогда
	Объект.ДоговорКонтрагента = Договор;
	Сообщить("Договор найден: "+Объект.Контрагент.Комментарий+" Наим:"+Договор.Наименование);
Иначе
	Объект.ДоговорКонтрагента = Справочники.ДоговорыКонтрагентов.ПустаяСсылка();
	Сообщить("Договор не найден: "+Объект.Контрагент.Комментарий);
КонецЕсли;

Документы.РеализацияТоваровУслуг.ЗаполнитьСчетаУчетаВТабличнойЧасти(Объект, "Товары");</ПослеЗагрузки>
				<ГенерироватьНовыйНомерИлиКодЕслиНеУказан>true</ГенерироватьНовыйНомерИлиКодЕслиНеУказан>
				<Источник>ДокументСсылка.ПоступлениеТоваров</Источник>
				<Приемник>ДокументСсылка.ПоступлениеТоваровУслуг</Приемник>
				<Свойства>
					<Группа>
						<Код>11</Код>
						<Наименование>Товары --&gt; Товары</Наименование>
						<Порядок>50</Порядок>
						<Источник Имя="Товары" Вид="ТабличнаяЧасть"/>
						<Приемник Имя="Товары" Вид="ТабличнаяЧасть"/>
						<Свойство>
							<Код>12</Код>
							<Наименование>--&gt; ЕдиницаИзмерения</Наименование>
							<Порядок>50</Порядок>
							<Источник Имя="" Вид=""/>
							<Приемник Имя="ЕдиницаИзмерения" Вид="Реквизит" Тип="СправочникСсылка.КлассификаторЕдиницИзмерения"/>
							<ПередВыгрузкой>Значение = ОбъектКоллекции .ЕдиницаИзмерения.ЕдиницаПоКлассификатору;</ПередВыгрузкой>
						</Свойство>
						<Свойство>
							<Код>13</Код>
							<Наименование>Количество --&gt; Количество</Наименование>
							<Порядок>100</Порядок>
							<Источник Имя="Количество" Вид="Реквизит" Тип="Число"/>
							<Приемник Имя="Количество" Вид="Реквизит" Тип="Число"/>
						</Свойство>
						<Свойство>
							<Код>14</Код>
							<Наименование>Коэффициент --&gt; Коэффициент</Наименование>
							<Порядок>150</Порядок>
							<Источник Имя="Коэффициент" Вид="Реквизит" Тип="Число"/>
							<Приемник Имя="Коэффициент" Вид="Реквизит" Тип="Число"/>
						</Свойство>
						<Свойство>
							<Код>15</Код>
							<Наименование>Номенклатура --&gt; Номенклатура</Наименование>
							<Порядок>200</Порядок>
							<Источник Имя="Номенклатура" Вид="Реквизит" Тип="СправочникСсылка.Номенклатура"/>
							<Приемник Имя="Номенклатура" Вид="Реквизит" Тип="СправочникСсылка.Номенклатура"/>
							<КодПравилаКонвертации>Номенклатура                                      </КодПравилаКонвертации>
						</Свойство>
						<Свойство>
							<Код>16</Код>
							<Наименование>СтавкаНДС --&gt; СтавкаНДС</Наименование>
							<Порядок>250</Порядок>
							<Источник Имя="СтавкаНДС" Вид="Реквизит" Тип="СправочникСсылка.СтавкиНДС"/>
							<Приемник Имя="СтавкаНДС" Вид="Реквизит" Тип="ПеречислениеСсылка.СтавкиНДС"/>
							<КодПравилаКонвертации>СтавкиНДС                                         </КодПравилаКонвертации>
							<ПриВыгрузке>Значение = Справочники.СтавкиНДС.ОсновнаяСтавкаНДС;</ПриВыгрузке>
						</Свойство>
						<Свойство>
							<Код>17</Код>
							<Наименование>Сумма --&gt; Сумма</Наименование>
							<Порядок>300</Порядок>
							<Источник Имя="Сумма" Вид="Реквизит" Тип="Число"/>
							<Приемник Имя="Сумма" Вид="Реквизит" Тип="Число"/>
							<ПередВыгрузкой>Значение = ОбъектКоллекции.Сумма- ОбъектКоллекции.Сумма /120 * 20;</ПередВыгрузкой>
						</Свойство>
						<Свойство>
							<Код>18</Код>
							<Наименование>СуммаНДС --&gt; СуммаНДС</Наименование>
							<Порядок>350</Порядок>
							<Источник Имя="СуммаНДС" Вид="Реквизит" Тип="Число"/>
							<Приемник Имя="СуммаНДС" Вид="Реквизит" Тип="Число"/>
							<ПередВыгрузкой>Значение = ОбъектКоллекции.Сумма /120 * 20;</ПередВыгрузкой>
						</Свойство>
						<Свойство>
							<Код>19</Код>
							<Наименование>Цена --&gt; Цена</Наименование>
							<Порядок>400</Порядок>
							<Источник Имя="Цена" Вид="Реквизит" Тип="Число"/>
							<Приемник Имя="Цена" Вид="Реквизит" Тип="Число"/>
							<ПередВыгрузкой>Значение = ОбъектКоллекции.Цена - ОбъектКоллекции.Цена /120 * 20;</ПередВыгрузкой>
						</Свойство>
					</Группа>
					<Свойство>
						<Код>1</Код>
						<Наименование>ВалютаДокумента --&gt; ВалютаДокумента</Наименование>
						<Порядок>100</Порядок>
						<Источник Имя="ВалютаДокумента" Вид="Реквизит" Тип="СправочникСсылка.Валюты"/>
						<Приемник Имя="ВалютаДокумента" Вид="Реквизит" Тип="СправочникСсылка.Валюты"/>
						<КодПравилаКонвертации>Валюты                                            </КодПравилаКонвертации>
					</Свойство>
					<Свойство Поиск="true">
						<Код>2</Код>
						<Наименование>Дата --&gt; Дата</Наименование>
						<Порядок>150</Порядок>
						<Источник Имя="Дата" Вид="Свойство" Тип="Дата"/>
						<Приемник Имя="Дата" Вид="Свойство" Тип="Дата"/>
					</Свойство>
					<Свойство>
						<Код>3</Код>
						<Наименование>Комментарий --&gt; Комментарий</Наименование>
						<Порядок>200</Порядок>
						<Источник Имя="Комментарий" Вид="Реквизит" Тип="Строка"/>
						<Приемник Имя="Комментарий" Вид="Реквизит" Тип="Строка"/>
						<ПередВыгрузкой>Значение = Источник.Контрагент.Наименование;</ПередВыгрузкой>
					</Свойство>
					<Свойство Отключить="true">
						<Код>4</Код>
						<Наименование>Контрагент --&gt; Контрагент</Наименование>
						<Порядок>250</Порядок>
						<Источник Имя="Контрагент" Вид="Реквизит" Тип="СправочникСсылка.Контрагенты"/>
						<Приемник Имя="Контрагент" Вид="Реквизит" Тип="СправочникСсылка.Контрагенты"/>
						<КодПравилаКонвертации>Контрагенты                                       </КодПравилаКонвертации>
					</Свойство>
					<Свойство Поиск="true">
						<Код>5</Код>
						<Наименование>--&gt; Номер</Наименование>
						<Порядок>300</Порядок>
						<Источник Имя="" Вид=""/>
						<Приемник Имя="Номер" Вид="Свойство" Тип="Строка"/>
						<ПередВыгрузкой>Значение = "Z" + Источник.Номер;</ПередВыгрузкой>
					</Свойство>
					<Свойство>
						<Код>6</Код>
						<Наименование>Организация --&gt; Организация</Наименование>
						<Порядок>350</Порядок>
						<Источник Имя="Организация" Вид="Реквизит" Тип="СправочникСсылка.Организации"/>
						<Приемник Имя="Организация" Вид="Реквизит" Тип="СправочникСсылка.Организации"/>
						<КодПравилаКонвертации>Организации                                       </КодПравилаКонвертации>
					</Свойство>
					<Свойство>
						<Код>7</Код>
						<Наименование>ПометкаУдаления --&gt; ПометкаУдаления</Наименование>
						<Порядок>400</Порядок>
						<Источник Имя="ПометкаУдаления" Вид="Свойство" Тип="Булево"/>
						<Приемник Имя="ПометкаУдаления" Вид="Свойство" Тип="Булево"/>
					</Свойство>
					<Свойство Отключить="true">
						<Код>8</Код>
						<Наименование>Проведен --&gt; Проведен</Наименование>
						<Порядок>450</Порядок>
						<Источник Имя="Проведен" Вид="Свойство" Тип="Булево"/>
						<Приемник Имя="Проведен" Вид="Свойство" Тип="Булево"/>
					</Свойство>
					<Свойство>
						<Код>9</Код>
						<Наименование>СуммаДокумента --&gt; СуммаДокумента</Наименование>
						<Порядок>500</Порядок>
						<Источник Имя="СуммаДокумента" Вид="Реквизит" Тип="Число"/>
						<Приемник Имя="СуммаДокумента" Вид="Реквизит" Тип="Число"/>
					</Свойство>
					<Свойство Отключить="true">
						<Код>10</Код>
						<Наименование>ТипЦен --&gt; ТипЦен</Наименование>
						<Порядок>550</Порядок>
						<Источник Имя="ТипЦен" Вид="Реквизит" Тип="СправочникСсылка.ТипыЦен"/>
						<Приемник Имя="ТипЦен" Вид="Реквизит" Тип="СправочникСсылка.ТипыЦенНоменклатуры"/>
					</Свойство>
					<Свойство>
						<Код>20</Код>
						<Наименование>--&gt; КурсВзаиморасчетов</Наименование>
						<Порядок>600</Порядок>
						<Источник Имя="" Вид=""/>
						<Приемник Имя="КурсВзаиморасчетов" Вид="Реквизит" Тип="Число"/>
						<ПередВыгрузкой>Значение = 1;</ПередВыгрузкой>
					</Свойство>
					<Свойство>
						<Код>21</Код>
						<Наименование>--&gt; НДСВключенВСтоимость</Наименование>
						<Порядок>650</Порядок>
						<Источник Имя="" Вид=""/>
						<Приемник Имя="НДСВключенВСтоимость" Вид="Реквизит" Тип="Булево"/>
						<ПередВыгрузкой>Значение = Истина;</ПередВыгрузкой>
					</Свойство>
					<Свойство>
						<Код>22</Код>
						<Наименование>--&gt; СуммаВключаетНДС</Наименование>
						<Порядок>700</Порядок>
						<Источник Имя="" Вид=""/>
						<Приемник Имя="СуммаВключаетНДС" Вид="Реквизит" Тип="Булево"/>
						<ПередВыгрузкой>Значение = Ложь;</ПередВыгрузкой>
					</Свойство>
					<Свойство>
						<Код>24</Код>
						<Наименование>--&gt; СпособЗачетаАвансов</Наименование>
						<Порядок>800</Порядок>
						<Источник Имя="" Вид=""/>
						<Приемник Имя="СпособЗачетаАвансов" Вид="Реквизит" Тип="ПеречислениеСсылка.СпособыЗачетаАвансов"/>
						<ПередВыгрузкой>Значение = "Автоматически";</ПередВыгрузкой>
					</Свойство>
					<Свойство>
						<Код>25</Код>
						<Наименование>ХозОперация --&gt; ВидОперации</Наименование>
						<Порядок>850</Порядок>
						<Источник Имя="ХозОперация" Вид="Реквизит" Тип="СправочникСсылка.ХозОперации"/>
						<Приемник Имя="ВидОперации" Вид="Реквизит" Тип="ПеречислениеСсылка.ВидыОперацийПоступлениеТоваровУслуг"/>
						<КодПравилаКонвертации>ВидыОперацийПоступлениеТоваровУслуг               </КодПравилаКонвертации>
					</Свойство>
					<Свойство>
						<Код>26</Код>
						<Наименование>--&gt; НДСНеВыделять</Наименование>
						<Порядок>900</Порядок>
						<Источник Имя="" Вид=""/>
						<Приемник Имя="НДСНеВыделять" Вид="Реквизит" Тип="Булево"/>
						<ПередВыгрузкой>Значение = Ложь;</ПередВыгрузкой>
					</Свойство>
					<Свойство>
						<Код>27</Код>
						<Наименование>--&gt; КратностьВзаиморасчетов</Наименование>
						<Порядок>950</Порядок>
						<Источник Имя="" Вид=""/>
						<Приемник Имя="КратностьВзаиморасчетов" Вид="Реквизит" Тип="Число"/>
						<ПередВыгрузкой>Значение = 1;</ПередВыгрузкой>
					</Свойство>
				</Свойства>
				<Значения/>
			</Правило>
			<Правило>
				<Код>СчетНаОплатуПокупателю</Код>
				<Наименование>Документ: Счет на оплату</Наименование>
				<Порядок>100</Порядок>
				<ПередВыгрузкой>//Если НЕ ЭтотОбъект.Метаданные().Реквизиты.Найти("амбООО") = Неопределено Тогда
//	Отказ=Источник.ДокументОснование.амбООО;
//КонецЕсли;
Отказ = НЕ Источник.Организация.ФормаСобственности = Перечисления.ФормыСобственности.ЧастныйПредприниматель;</ПередВыгрузкой>
				<ПередЗагрузкой>РежимЗаписи  = "Запись";</ПередЗагрузкой>
				<ПриЗагрузке>РежимЗаписи  = "Запись";</ПриЗагрузке>
				<ПослеЗагрузки>//Объект.Склад = УправлениеПользователями.ПолучитьЗначениеПоУмолчанию(глЗначениеПеременной("глТекущийПользователь"), "ОсновнойСклад");
Объект.ДоговорКонтрагента = Справочники.ДоговорыКонтрагентов.НайтиПоРеквизиту("ВидДоговора",Перечисления.ВидыДоговоровКонтрагентов.СПокупателем,,Объект.Контрагент);</ПослеЗагрузки>
				<ГенерироватьНовыйНомерИлиКодЕслиНеУказан>true</ГенерироватьНовыйНомерИлиКодЕслиНеУказан>
				<Источник>ДокументСсылка.СчетНаОплату</Источник>
				<Приемник>ДокументСсылка.СчетНаОплатуПокупателю</Приемник>
				<Свойства>
					<Группа>
						<Код>10</Код>
						<Наименование>--&gt; Товары</Наименование>
						<Порядок>50</Порядок>
						<Источник Имя="" Вид=""/>
						<Приемник Имя="Товары" Вид="ТабличнаяЧасть"/>
						<ПередОбработкойВыгрузки>ТаблицаТоваров = Источник.Товары.Выгрузить();
//УдалямыеСтроки = Новый Массив;
Для каждого СтрокаДокумента Из ТаблицаТоваров Цикл	
//	Если ТипЗнч(СтрокаДокумента.Номенклатура) = Тип("СправочникСсылка.Автоработы") Тогда	
//		УдалямыеСтроки.Добавить(СтрокаДокумента);
//	Иначе
//		Если СтрокаДокумента.Номенклатура.ВидНоменклатуры =  Перечисления.ВидыНоменклатуры.Услуга Тогда
//			УдалямыеСтроки.Добавить(СтрокаДокумента);
//		КонецЕсли;	
//	КонецЕсли;	
	СтрокаДокумента.Сумма = СтрокаДокумента.СуммаВсего;
	Если СтрокаДокумента.Количество &gt; 0 Тогда
		СтрокаДокумента.Цена = СтрокаДокумента.Сумма / СтрокаДокумента.Количество;
	КонецЕсли;	
//	
КонецЦикла;	
//Для каждого УдаляемаяСтрока Из УдалямыеСтроки Цикл
//	ТаблицаТоваров.Удалить(УдаляемаяСтрока);
//КонецЦикла;	
КоллекцияОбъектов = ТаблицаТоваров;</ПередОбработкойВыгрузки>
						<Свойство>
							<Код>11</Код>
							<Наименование>--&gt; Количество</Наименование>
							<Порядок>50</Порядок>
							<Источник Имя="" Вид=""/>
							<Приемник Имя="Количество" Вид="Реквизит" Тип="Число"/>
						</Свойство>
						<Свойство>
							<Код>12</Код>
							<Наименование>--&gt; Номенклатура</Наименование>
							<Порядок>100</Порядок>
							<Источник Имя="" Вид=""/>
							<Приемник Имя="Номенклатура" Вид="Реквизит" Тип="СправочникСсылка.Номенклатура"/>
							<ПередВыгрузкой>Если ТипЗнч(ОбъектКоллекции.Номенклатура) = Тип("СправочникСсылка.Номенклатура") Тогда
	ИмяПКО = "Номенклатура";
ИначеЕсли ТипЗнч(ОбъектКоллекции.Номенклатура) = Тип("СправочникСсылка.Автоработы") Тогда	
	ИмяПКО = "Автоработы";
КонецЕсли;</ПередВыгрузкой>
						</Свойство>
						<Свойство>
							<Код>13</Код>
							<Наименование>--&gt; СтавкаНДС</Наименование>
							<Порядок>150</Порядок>
							<Источник Имя="" Вид=""/>
							<Приемник Имя="СтавкаНДС" Вид="Реквизит" Тип="ПеречислениеСсылка.СтавкиНДС"/>
						</Свойство>
						<Свойство>
							<Код>14</Код>
							<Наименование>--&gt; Сумма</Наименование>
							<Порядок>200</Порядок>
							<Источник Имя="" Вид=""/>
							<Приемник Имя="Сумма" Вид="Реквизит" Тип="Число"/>
						</Свойство>
						<Свойство>
							<Код>15</Код>
							<Наименование>--&gt; СуммаНДС</Наименование>
							<Порядок>250</Порядок>
							<Источник Имя="" Вид=""/>
							<Приемник Имя="СуммаНДС" Вид="Реквизит" Тип="Число"/>
						</Свойство>
						<Свойство>
							<Код>16</Код>
							<Наименование>--&gt; Цена</Наименование>
							<Порядок>300</Порядок>
							<Источник Имя="" Вид=""/>
							<Приемник Имя="Цена" Вид="Реквизит" Тип="Число"/>
						</Свойство>
					</Группа>
					<Свойство>
						<Код>1</Код>
						<Наименование>ВалютаДокумента --&gt; ВалютаДокумента</Наименование>
						<Порядок>150</Порядок>
						<Источник Имя="ВалютаДокумента" Вид="Реквизит" Тип="СправочникСсылка.Валюты"/>
						<Приемник Имя="ВалютаДокумента" Вид="Реквизит" Тип="СправочникСсылка.Валюты"/>
						<КодПравилаКонвертации>Валюты                                            </КодПравилаКонвертации>
					</Свойство>
					<Свойство Поиск="true">
						<Код>2</Код>
						<Наименование>Дата --&gt; Дата</Наименование>
						<Порядок>200</Порядок>
						<Источник Имя="Дата" Вид="Свойство" Тип="Дата"/>
						<Приемник Имя="Дата" Вид="Свойство" Тип="Дата"/>
					</Свойство>
					<Свойство>
						<Код>3</Код>
						<Наименование>Комментарий --&gt; Комментарий</Наименование>
						<Порядок>250</Порядок>
						<Источник Имя="Комментарий" Вид="Реквизит" Тип="Строка"/>
						<Приемник Имя="Комментарий" Вид="Реквизит" Тип="Строка"/>
						<ПередВыгрузкой>Значение = Источник.Контрагент.Наименование;</ПередВыгрузкой>
					</Свойство>
					<Свойство Отключить="true">
						<Код>4</Код>
						<Наименование>Контрагент --&gt; Контрагент</Наименование>
						<Порядок>300</Порядок>
						<Источник Имя="Контрагент" Вид="Реквизит" Тип="СправочникСсылка.Контрагенты"/>
						<Приемник Имя="Контрагент" Вид="Реквизит" Тип="СправочникСсылка.Контрагенты"/>
						<КодПравилаКонвертации>Контрагенты                                       </КодПравилаКонвертации>
					</Свойство>
					<Свойство Поиск="true">
						<Код>5</Код>
						<Наименование>--&gt; Номер</Наименование>
						<Порядок>350</Порядок>
						<Источник Имя="" Вид=""/>
						<Приемник Имя="Номер" Вид="Свойство" Тип="Строка"/>
						<ПередВыгрузкой>Значение = "Z" + Источник.Номер;</ПередВыгрузкой>
					</Свойство>
					<Свойство>
						<Код>6</Код>
						<Наименование>Организация --&gt; Организация</Наименование>
						<Порядок>400</Порядок>
						<Источник Имя="Организация" Вид="Реквизит" Тип="СправочникСсылка.Организации"/>
						<Приемник Имя="Организация" Вид="Реквизит" Тип="СправочникСсылка.Организации"/>
						<КодПравилаКонвертации>Организации                                       </КодПравилаКонвертации>
					</Свойство>
					<Свойство>
						<Код>7</Код>
						<Наименование>ПометкаУдаления --&gt; ПометкаУдаления</Наименование>
						<Порядок>450</Порядок>
						<Источник Имя="ПометкаУдаления" Вид="Свойство" Тип="Булево"/>
						<Приемник Имя="ПометкаУдаления" Вид="Свойство" Тип="Булево"/>
					</Свойство>
					<Свойство>
						<Код>8</Код>
						<Наименование>СуммаДокумента --&gt; СуммаДокумента</Наименование>
						<Порядок>500</Порядок>
						<Источник Имя="СуммаДокумента" Вид="Реквизит" Тип="Число"/>
						<Приемник Имя="СуммаДокумента" Вид="Реквизит" Тип="Число"/>
					</Свойство>
					<Свойство Отключить="true">
						<Код>9</Код>
						<Наименование>ТипЦен --&gt; ТипЦен</Наименование>
						<Порядок>550</Порядок>
						<Источник Имя="ТипЦен" Вид="Реквизит" Тип="СправочникСсылка.ТипыЦен"/>
						<Приемник Имя="ТипЦен" Вид="Реквизит" Тип="СправочникСсылка.ТипыЦенНоменклатуры"/>
					</Свойство>
					<Свойство>
						<Код>17</Код>
						<Наименование>Организация --&gt; ОрганизацияПолучатель</Наименование>
						<Порядок>600</Порядок>
						<Источник Имя="Организация" Вид="Реквизит" Тип="СправочникСсылка.Организации"/>
						<Приемник Имя="ОрганизацияПолучатель" Вид="Реквизит" Тип="СправочникСсылка.Организации"/>
					</Свойство>
					<Свойство>
						<Код>18</Код>
						<Наименование>--&gt; ДокументБезНДС</Наименование>
						<Порядок>650</Порядок>
						<Источник Имя="" Вид=""/>
						<Приемник Имя="ДокументБезНДС" Вид="Реквизит" Тип="Булево"/>
						<ПередВыгрузкой>Значение = Истина;</ПередВыгрузкой>
					</Свойство>
				</Свойства>
				<Значения/>
			</Правило>
			<Правило>
				<Код>ОтчетОРозничныхПродажах</Код>
				<Наименование>:</Наименование>
				<Порядок>150</Порядок>
				<ПередЗагрузкой>РежимЗаписи  = "Запись";</ПередЗагрузкой>
				<ПриЗагрузке>РежимЗаписи  = "Запись";</ПриЗагрузке>
				<ПослеЗагрузки>Если Найти(Объект.Комментарий,"Товары НДС#") = 0 И Найти(Объект.Комментарий,"Возвраты НДС#") = 0 Тогда
	Объект.Склад = Справочники.Склады.НайтиПоКоду(Параметры.КодОсновногоСклада);
	Объект.ДокументБезНДС = Истина;
Иначе
	Объект.Склад = Справочники.Склады.НайтиПоКоду(Параметры.кодСкладаКомиссия);
	Объект.ДокументБезНДС = Ложь;
КонецЕсли;

Объект.ДополнительныеСвойства.Вставить("ЗаполнитьСчетаУчетаПередЗаписью", Истина);
СчетаУчетаВДокументах.ЗаполнитьПередЗаписью(Объект, РежимЗаписиДокумента.Запись);</ПослеЗагрузки>
				<ГенерироватьНовыйНомерИлиКодЕслиНеУказан>true</ГенерироватьНовыйНомерИлиКодЕслиНеУказан>
				<Приемник>ДокументСсылка.ОтчетОРозничныхПродажах</Приемник>
				<Свойства>
					<Группа>
						<Код>23</Код>
						<Наименование>--&gt; Товары</Наименование>
						<Порядок>50</Порядок>
						<ПолучитьИзВходящихДанных>true</ПолучитьИзВходящихДанных>
						<Источник Имя="" Вид=""/>
						<Приемник Имя="Товары" Вид="ТабличнаяЧасть"/>
						<Свойство>
							<Код>25</Код>
							<Наименование>--&gt; Количество</Наименование>
							<Порядок>100</Порядок>
							<Источник Имя="" Вид=""/>
							<Приемник Имя="Количество" Вид="Реквизит" Тип="Число"/>
						</Свойство>
						<Свойство>
							<Код>26</Код>
							<Наименование>--&gt; Номенклатура</Наименование>
							<Порядок>150</Порядок>
							<Источник Имя="" Вид=""/>
							<Приемник Имя="Номенклатура" Вид="Реквизит" Тип="СправочникСсылка.Номенклатура"/>
							<ПередВыгрузкой>Если ТипЗнч(ОбъектКоллекции.Номенклатура) = Тип("СправочникСсылка.Номенклатура") Тогда
	ИмяПКО = "Номенклатура";
ИначеЕсли ТипЗнч(ОбъектКоллекции.Номенклатура) = Тип("СправочникСсылка.Автоработы") Тогда	
	ИмяПКО = "Автоработы";
КонецЕсли;</ПередВыгрузкой>
						</Свойство>
						<Свойство>
							<Код>29</Код>
							<Наименование>--&gt; СтавкаНДС</Наименование>
							<Порядок>300</Порядок>
							<Источник Имя="" Вид=""/>
							<Приемник Имя="СтавкаНДС" Вид="Реквизит" Тип="ПеречислениеСсылка.СтавкиНДС"/>
							<ПередВыгрузкой>Значение = "НДС20";</ПередВыгрузкой>
						</Свойство>
						<Свойство>
							<Код>32</Код>
							<Наименование>--&gt; Сумма</Наименование>
							<Порядок>450</Порядок>
							<Источник Имя="" Вид=""/>
							<Приемник Имя="Сумма" Вид="Реквизит" Тип="Число"/>
						</Свойство>
						<Свойство>
							<Код>38</Код>
							<Наименование>--&gt; Цена</Наименование>
							<Порядок>750</Порядок>
							<Источник Имя="" Вид=""/>
							<Приемник Имя="Цена" Вид="Реквизит" Тип="Число"/>
						</Свойство>
						<Свойство>
							<Код>39</Код>
							<Наименование>--&gt; СуммаНДС</Наименование>
							<Порядок>800</Порядок>
							<Источник Имя="" Вид=""/>
							<Приемник Имя="СуммаНДС" Вид="Реквизит" Тип="Число"/>
						</Свойство>
					</Группа>
					<Свойство>
						<Код>1</Код>
						<Наименование>--&gt; ВалютаДокумента</Наименование>
						<Порядок>100</Порядок>
						<Источник Имя="" Вид=""/>
						<Приемник Имя="ВалютаДокумента" Вид="Реквизит" Тип="СправочникСсылка.Валюты"/>
						<КодПравилаКонвертации>Валюты                                            </КодПравилаКонвертации>
						<ПередВыгрузкой>Значение = Константы.ВалютаРегламентированногоУчетаОрганизаций.Получить();</ПередВыгрузкой>
					</Свойство>
					<Свойство>
						<Код>2</Код>
						<Наименование>--&gt; ВидОперации</Наименование>
						<Порядок>150</Порядок>
						<Источник Имя="" Вид=""/>
						<Приемник Имя="ВидОперации" Вид="Реквизит" Тип="ПеречислениеСсылка.ВидыОперацийОтчетОРозничныхПродажах"/>
						<ПередВыгрузкой>Значение = "ОтчетККМОПродажах";</ПередВыгрузкой>
					</Свойство>
					<Свойство Поиск="true">
						<Код>5</Код>
						<Наименование>--&gt; Комментарий</Наименование>
						<Порядок>300</Порядок>
						<ПолучитьИзВходящихДанных>true</ПолучитьИзВходящихДанных>
						<Источник Имя="" Вид=""/>
						<Приемник Имя="Комментарий" Вид="Реквизит" Тип="Строка"/>
					</Свойство>
					<Свойство>
						<Код>6</Код>
						<Наименование>--&gt; КратностьДокумента</Наименование>
						<Порядок>350</Порядок>
						<Источник Имя="" Вид=""/>
						<Приемник Имя="КратностьДокумента" Вид="Реквизит" Тип="Число"/>
						<ПередВыгрузкой>Значение = 1;</ПередВыгрузкой>
					</Свойство>
					<Свойство>
						<Код>7</Код>
						<Наименование>--&gt; КурсДокумента</Наименование>
						<Порядок>400</Порядок>
						<Источник Имя="" Вид=""/>
						<Приемник Имя="КурсДокумента" Вид="Реквизит" Тип="Число"/>
						<ПередВыгрузкой>Значение = 1</ПередВыгрузкой>
					</Свойство>
					<Свойство Поиск="true">
						<Код>8</Код>
						<Наименование>--&gt; Организация</Наименование>
						<Порядок>450</Порядок>
						<ПолучитьИзВходящихДанных>true</ПолучитьИзВходящихДанных>
						<Источник Имя="" Вид=""/>
						<Приемник Имя="Организация" Вид="Реквизит" Тип="СправочникСсылка.Организации"/>
						<КодПравилаКонвертации>Организации                                       </КодПравилаКонвертации>
					</Свойство>
					<Свойство Отключить="true">
						<Код>13</Код>
						<Наименование>--&gt; СтатьяДвиженияДенежныхСредств</Наименование>
						<Порядок>700</Порядок>
						<Источник Имя="" Вид=""/>
						<Приемник Имя="СтатьяДвиженияДенежныхСредств" Вид="Реквизит" Тип="СправочникСсылка.СтатьиДвиженияДенежныхСредств"/>
					</Свойство>
					<Свойство>
						<Код>14</Код>
						<Наименование>--&gt; СуммаВключаетНДС</Наименование>
						<Порядок>750</Порядок>
						<Источник Имя="" Вид=""/>
						<Приемник Имя="СуммаВключаетНДС" Вид="Реквизит" Тип="Булево"/>
						<ПередВыгрузкой>Значение = Истина;</ПередВыгрузкой>
					</Свойство>
					<Свойство>
						<Код>15</Код>
						<Наименование>--&gt; СуммаДокумента</Наименование>
						<Порядок>800</Порядок>
						<ПолучитьИзВходящихДанных>true</ПолучитьИзВходящихДанных>
						<Источник Имя="" Вид=""/>
						<Приемник Имя="СуммаДокумента" Вид="Реквизит" Тип="Число"/>
					</Свойство>
					<Свойство>
						<Код>16</Код>
						<Наименование>--&gt; СчетКасса</Наименование>
						<Порядок>850</Порядок>
						<Источник Имя="" Вид=""/>
						<Приемник Имя="СчетКасса" Вид="Реквизит" Тип="ПланСчетовСсылка.Хозрасчетный"/>
						<ПередВыгрузкой>Значение = "КассаОрганизации";</ПередВыгрузкой>
					</Свойство>
					<Свойство Отключить="true">
						<Код>17</Код>
						<Наименование>--&gt; ТипЦен</Наименование>
						<Порядок>900</Порядок>
						<Источник Имя="" Вид=""/>
						<Приемник Имя="ТипЦен" Вид="Реквизит" Тип="СправочникСсылка.ТипыЦенНоменклатуры"/>
					</Свойство>
					<Свойство Поиск="true">
						<Код>19</Код>
						<Наименование>--&gt; Дата</Наименование>
						<Порядок>1000</Порядок>
						<ПолучитьИзВходящихДанных>true</ПолучитьИзВходящихДанных>
						<Источник Имя="" Вид=""/>
						<Приемник Имя="Дата" Вид="Свойство" Тип="Дата"/>
					</Свойство>
					<Группа>
						<Код>40</Код>
						<Наименование>--&gt; Возвраты</Наименование>
						<Порядок>1050</Порядок>
						<ПолучитьИзВходящихДанных>true</ПолучитьИзВходящихДанных>
						<Источник Имя="" Вид=""/>
						<Приемник Имя="Возвраты" Вид="ТабличнаяЧасть"/>
						<Свойство>
							<Код>41</Код>
							<Наименование>--&gt; Количество</Наименование>
							<Порядок>50</Порядок>
							<Источник Имя="" Вид=""/>
							<Приемник Имя="Количество" Вид="Реквизит" Тип="Число"/>
						</Свойство>
						<Свойство>
							<Код>42</Код>
							<Наименование>--&gt; Номенклатура</Наименование>
							<Порядок>100</Порядок>
							<Источник Имя="" Вид=""/>
							<Приемник Имя="Номенклатура" Вид="Реквизит" Тип="СправочникСсылка.Номенклатура"/>
						</Свойство>
						<Свойство>
							<Код>43</Код>
							<Наименование>--&gt; СтавкаНДС</Наименование>
							<Порядок>150</Порядок>
							<Источник Имя="" Вид=""/>
							<Приемник Имя="СтавкаНДС" Вид="Реквизит" Тип="ПеречислениеСсылка.СтавкиНДС"/>
						</Свойство>
						<Свойство>
							<Код>44</Код>
							<Наименование>--&gt; Сумма</Наименование>
							<Порядок>200</Порядок>
							<Источник Имя="" Вид=""/>
							<Приемник Имя="Сумма" Вид="Реквизит" Тип="Число"/>
						</Свойство>
						<Свойство>
							<Код>45</Код>
							<Наименование>--&gt; СуммаНДС</Наименование>
							<Порядок>250</Порядок>
							<Источник Имя="" Вид=""/>
							<Приемник Имя="СуммаНДС" Вид="Реквизит" Тип="Число"/>
						</Свойство>
						<Свойство>
							<Код>46</Код>
							<Наименование>--&gt; Цена</Наименование>
							<Порядок>300</Порядок>
							<Источник Имя="" Вид=""/>
							<Приемник Имя="Цена" Вид="Реквизит" Тип="Число"/>
						</Свойство>
					</Группа>
				</Свойства>
				<Значения/>
			</Правило>
			<Правило>
				<Код>РеализацияТоваровУслуг</Код>
				<Наименование>:</Наименование>
				<Порядок>200</Порядок>
				<ПередЗагрузкой>РежимЗаписи  = "Запись";</ПередЗагрузкой>
				<ПриЗагрузке>РежимЗаписи  = "Запись";</ПриЗагрузке>
				<ПослеЗагрузки>Объект.ДоговорКонтрагента = Объект.Контрагент.ОсновнойДоговорКонтрагента;
ЗаполнениеДокументов.ЗаполнитьШапкуДокумента(ОБъект, глЗначениеПеременной("глТекущийПользователь"), Константы.ВалютаРегламентированногоУчета.Получить(), "Продажа");
Объект.Склад = Справочники.Склады.НайтиПоНаименованию("Цветочная НДС");
Для каждого СтрокаТоваров Из Объект.Товары Цикл
  ОбработкаТабличныхЧастей.ЗаполнитьНомерГТДИСтрануПроисхождения(СтрокаТоваров, Ложь, Объект.Организация, Объект.Дата);
  ОбработкаТабличныхЧастей.РассчитатьСуммуНДСТабЧасти(СтрокаТоваров, Объект);
    Объект.ЗаполнитьСчетаУчетаВСтрокеТабЧасти(СтрокаТоваров, "Товары", Истина);
КонецЦикла;</ПослеЗагрузки>
				<ГенерироватьНовыйНомерИлиКодЕслиНеУказан>true</ГенерироватьНовыйНомерИлиКодЕслиНеУказан>
				<Приемник>ДокументСсылка.РеализацияТоваровУслуг</Приемник>
				<Свойства>
					<Свойство Поиск="true">
						<Код>2</Код>
						<Наименование>--&gt; Дата</Наименование>
						<Порядок>100</Порядок>
						<ПолучитьИзВходящихДанных>true</ПолучитьИзВходящихДанных>
						<Источник Имя="" Вид=""/>
						<Приемник Имя="Дата" Вид="Свойство" Тип="Дата"/>
					</Свойство>
					<Свойство Поиск="true">
						<Код>3</Код>
						<Наименование>--&gt; Организация</Наименование>
						<Порядок>150</Порядок>
						<ПолучитьИзВходящихДанных>true</ПолучитьИзВходящихДанных>
						<Источник Имя="" Вид=""/>
						<Приемник Имя="Организация" Вид="Реквизит" Тип="СправочникСсылка.Организации"/>
						<КодПравилаКонвертации>Организации                                       </КодПравилаКонвертации>
					</Свойство>
					<Свойство>
						<Код>4</Код>
						<Наименование>--&gt; ВалютаДокумента</Наименование>
						<Порядок>200</Порядок>
						<Источник Имя="" Вид=""/>
						<Приемник Имя="ВалютаДокумента" Вид="Реквизит" Тип="СправочникСсылка.Валюты"/>
						<КодПравилаКонвертации>Валюты                                            </КодПравилаКонвертации>
						<ПередВыгрузкой>Значение = Константы.ВалютаРегламентированногоУчетаОрганизаций.Получить();</ПередВыгрузкой>
					</Свойство>
					<Свойство Поиск="true">
						<Код>5</Код>
						<Наименование>--&gt; Комментарий</Наименование>
						<Порядок>250</Порядок>
						<ПолучитьИзВходящихДанных>true</ПолучитьИзВходящихДанных>
						<Источник Имя="" Вид=""/>
						<Приемник Имя="Комментарий" Вид="Реквизит" Тип="Строка"/>
					</Свойство>
					<Свойство>
						<Код>6</Код>
						<Наименование>--&gt; ВидОперации</Наименование>
						<Порядок>300</Порядок>
						<Источник Имя="" Вид=""/>
						<Приемник Имя="ВидОперации" Вид="Реквизит" Тип="ПеречислениеСсылка.ВидыОперацийРеализацияТоваров"/>
						<ПередВыгрузкой>Значение = "ПродажаКомиссия";</ПередВыгрузкой>
					</Свойство>
					<Группа>
						<Код>7</Код>
						<Наименование>--&gt; Товары</Наименование>
						<Порядок>350</Порядок>
						<ПолучитьИзВходящихДанных>true</ПолучитьИзВходящихДанных>
						<Источник Имя="" Вид=""/>
						<Приемник Имя="Товары" Вид="ТабличнаяЧасть"/>
						<Свойство>
							<Код>10</Код>
							<Наименование>--&gt; Количество</Наименование>
							<Порядок>150</Порядок>
							<Источник Имя="" Вид=""/>
							<Приемник Имя="Количество" Вид="Реквизит" Тип="Число"/>
						</Свойство>
						<Свойство>
							<Код>13</Код>
							<Наименование>--&gt; Номенклатура</Наименование>
							<Порядок>300</Порядок>
							<Источник Имя="" Вид=""/>
							<Приемник Имя="Номенклатура" Вид="Реквизит" Тип="СправочникСсылка.Номенклатура"/>
							<ПередВыгрузкой>Если ТипЗнч(ОбъектКоллекции.Номенклатура) = Тип("СправочникСсылка.Номенклатура") Тогда
	ИмяПКО = "Номенклатура";
ИначеЕсли ТипЗнч(ОбъектКоллекции.Номенклатура) = Тип("СправочникСсылка.Автоработы") Тогда	
	ИмяПКО = "Автоработы";
КонецЕсли;</ПередВыгрузкой>
						</Свойство>
						<Свойство>
							<Код>17</Код>
							<Наименование>--&gt; СтавкаНДС</Наименование>
							<Порядок>500</Порядок>
							<Источник Имя="" Вид=""/>
							<Приемник Имя="СтавкаНДС" Вид="Реквизит" Тип="ПеречислениеСсылка.СтавкиНДС"/>
							<ПередВыгрузкой>Значение = "НДС18";</ПередВыгрузкой>
						</Свойство>
						<Свойство>
							<Код>26</Код>
							<Наименование>--&gt; Цена</Наименование>
							<Порядок>950</Порядок>
							<Источник Имя="" Вид=""/>
							<Приемник Имя="Цена" Вид="Реквизит" Тип="Число"/>
						</Свойство>
						<Свойство>
							<Код>27</Код>
							<Наименование>--&gt; Сумма</Наименование>
							<Порядок>1000</Порядок>
							<Источник Имя="" Вид=""/>
							<Приемник Имя="Сумма" Вид="Реквизит" Тип="Число"/>
						</Свойство>
					</Группа>
					<Свойство>
						<Код>28</Код>
						<Наименование>--&gt; Контрагент</Наименование>
						<Порядок>400</Порядок>
						<Источник Имя="" Вид=""/>
						<Приемник Имя="Контрагент" Вид="Реквизит" Тип="СправочникСсылка.Контрагенты"/>
						<ПередВыгрузкой>Значение = "ЦБ002267";</ПередВыгрузкой>
					</Свойство>
				</Свойства>
				<Значения/>
			</Правило>
			<Правило>
				<Код>ПоступлениеТоваровУслугТоварыООО</Код>
				<Наименование>:</Наименование>
				<Порядок>250</Порядок>
				<ПередЗагрузкой>РежимЗаписи  = "Запись";</ПередЗагрузкой>
				<ПриЗагрузке>РежимЗаписи  = "Запись";</ПриЗагрузке>
				<ПослеЗагрузки>Объект.СчетУчетаРасчетовСКонтрагентом = ПланыСчетов.Хозрасчетный.РасчетыСПоставщиками;
Объект.СчетУчетаРасчетовПоАвансам = ПланыСчетов.Хозрасчетный.РасчетыПоАвансамВыданным;
Если ПараметрыОбъекта["ЧекСНДС"] Тогда
	Объект.СчетУчетаРасчетовСКонтрагентом = ПланыСчетов.Хозрасчетный.ПрочиеРасчетыСРазнымиДебиторамиИКредиторами;
	Объект.НДСВключенВСтоимость = Истина;
	Объект.СуммаВключаетНДС = Истина;
	Объект.НДСНеВыделять = Ложь;
	Объект.Склад = Справочники.Склады.НайтиПоКоду(Параметры.кодСкладаКомиссия);
	Сообщить("склад "+Объект.Склад);
	Объект.ДоговорКонтрагента = 
	     Справочники.ДоговорыКонтрагентов.НайтиПоРеквизиту("ВидДоговора",Перечисления.ВидыДоговоровКонтрагентов.СКомитентом,,Объект.Контрагент);
	 Документы.ПоступлениеТоваровУслуг.ЗаполнитьСчетаУчетаВТабличнойЧасти(Объект, "Товары");
Иначе // чек с товарами ООО, не без	НДС
	Объект.Склад = Справочники.Склады.НайтиПоКоду(Параметры.КодОсновногоСклада);
	Сообщить("склад "+Объект.Склад);
	Объект.ДоговорКонтрагента = 
	     Справочники.ДоговорыКонтрагентов.НайтиПоРеквизиту("ВидДоговора",Перечисления.ВидыДоговоровКонтрагентов.СПоставщиком,,Объект.Контрагент);
	Документы.ПоступлениеТоваровУслуг.ЗаполнитьСчетаУчетаВТабличнойЧасти(Объект, "Товары");
	 
КонецЕсли;</ПослеЗагрузки>
				<ГенерироватьНовыйНомерИлиКодЕслиНеУказан>true</ГенерироватьНовыйНомерИлиКодЕслиНеУказан>
				<Приемник>ДокументСсылка.ПоступлениеТоваровУслуг</Приемник>
				<Свойства>
					<Свойство>
						<Код>1</Код>
						<Наименование>--&gt; ВидОперации</Наименование>
						<Порядок>50</Порядок>
						<Источник Имя="" Вид=""/>
						<Приемник Имя="ВидОперации" Вид="Реквизит" Тип="ПеречислениеСсылка.ВидыОперацийПоступлениеТоваровУслуг"/>
						<ПередВыгрузкой>Значение = "ПокупкаКомиссия";</ПередВыгрузкой>
					</Свойство>
					<Свойство Поиск="true">
						<Код>3</Код>
						<Наименование>--&gt; Комментарий</Наименование>
						<Порядок>150</Порядок>
						<ПолучитьИзВходящихДанных>true</ПолучитьИзВходящихДанных>
						<Источник Имя="" Вид=""/>
						<Приемник Имя="Комментарий" Вид="Реквизит" Тип="Строка"/>
					</Свойство>
					<Свойство>
						<Код>4</Код>
						<Наименование>--&gt; Контрагент</Наименование>
						<Порядок>200</Порядок>
						<ПолучитьИзВходящихДанных>true</ПолучитьИзВходящихДанных>
						<Источник Имя="" Вид=""/>
						<Приемник Имя="Контрагент" Вид="Реквизит" Тип="СправочникСсылка.Контрагенты"/>
					</Свойство>
					<Свойство Поиск="true">
						<Код>8</Код>
						<Наименование>--&gt; Организация</Наименование>
						<Порядок>400</Порядок>
						<ПолучитьИзВходящихДанных>true</ПолучитьИзВходящихДанных>
						<Источник Имя="" Вид=""/>
						<Приемник Имя="Организация" Вид="Реквизит" Тип="СправочникСсылка.Организации"/>
					</Свойство>
					<Свойство Поиск="true">
						<Код>10</Код>
						<Наименование>--&gt; Дата</Наименование>
						<Порядок>500</Порядок>
						<ПолучитьИзВходящихДанных>true</ПолучитьИзВходящихДанных>
						<Источник Имя="" Вид=""/>
						<Приемник Имя="Дата" Вид="Свойство" Тип="Дата"/>
					</Свойство>
					<Группа>
						<Код>11</Код>
						<Наименование>--&gt; Товары</Наименование>
						<Порядок>550</Порядок>
						<ПолучитьИзВходящихДанных>true</ПолучитьИзВходящихДанных>
						<Источник Имя="" Вид=""/>
						<Приемник Имя="Товары" Вид="ТабличнаяЧасть"/>
						<Свойство>
							<Код>12</Код>
							<Наименование>--&gt; Количество</Наименование>
							<Порядок>50</Порядок>
							<Источник Имя="" Вид=""/>
							<Приемник Имя="Количество" Вид="Реквизит" Тип="Число"/>
						</Свойство>
						<Свойство>
							<Код>13</Код>
							<Наименование>--&gt; Номенклатура</Наименование>
							<Порядок>100</Порядок>
							<Источник Имя="" Вид=""/>
							<Приемник Имя="Номенклатура" Вид="Реквизит" Тип="СправочникСсылка.Номенклатура"/>
							<ПередВыгрузкой>Если ТипЗнч(ОбъектКоллекции.Номенклатура) = Тип("СправочникСсылка.Номенклатура") Тогда
	ИмяПКО = "Номенклатура";
ИначеЕсли ТипЗнч(ОбъектКоллекции.Номенклатура) = Тип("СправочникСсылка.Автоработы") Тогда	
	ИмяПКО = "Автоработы";
КонецЕсли;</ПередВыгрузкой>
						</Свойство>
						<Свойство>
							<Код>14</Код>
							<Наименование>--&gt; СтавкаНДС</Наименование>
							<Порядок>150</Порядок>
							<Источник Имя="" Вид=""/>
							<Приемник Имя="СтавкаНДС" Вид="Реквизит" Тип="ПеречислениеСсылка.СтавкиНДС"/>
							<ПередВыгрузкой>Значение = "НДС20";</ПередВыгрузкой>
						</Свойство>
						<Свойство>
							<Код>15</Код>
							<Наименование>--&gt; Сумма</Наименование>
							<Порядок>200</Порядок>
							<Источник Имя="" Вид=""/>
							<Приемник Имя="Сумма" Вид="Реквизит" Тип="Число"/>
						</Свойство>
						<Свойство>
							<Код>17</Код>
							<Наименование>--&gt; Цена</Наименование>
							<Порядок>250</Порядок>
							<Источник Имя="" Вид=""/>
							<Приемник Имя="Цена" Вид="Реквизит" Тип="Число"/>
						</Свойство>
						<Свойство>
							<Код>22</Код>
							<Наименование>--&gt; СуммаНДС</Наименование>
							<Порядок>300</Порядок>
							<Источник Имя="" Вид=""/>
							<Приемник Имя="СуммаНДС" Вид="Реквизит" Тип="Число"/>
						</Свойство>
					</Группа>
					<Свойство>
						<Код>16</Код>
						<Наименование>--&gt; ВалютаДокумента</Наименование>
						<Порядок>600</Порядок>
						<Источник Имя="" Вид=""/>
						<Приемник Имя="ВалютаДокумента" Вид="Реквизит" Тип="СправочникСсылка.Валюты"/>
						<ПередВыгрузкой>Значение = Константы.ВалютаРегламентированногоУчетаОрганизаций.Получить();</ПередВыгрузкой>
					</Свойство>
					<Свойство>
						<Код>18</Код>
						<Наименование>--&gt; СпособЗачетаАвансов</Наименование>
						<Порядок>650</Порядок>
						<Источник Имя="" Вид=""/>
						<Приемник Имя="СпособЗачетаАвансов" Вид="Реквизит" Тип="ПеречислениеСсылка.СпособыЗачетаАвансов"/>
						<ПередВыгрузкой>Значение = "НеЗачитывать";</ПередВыгрузкой>
					</Свойство>
					<Свойство>
						<Код>19</Код>
						<Наименование>--&gt; ЧекСНДС</Наименование>
						<Порядок>700</Порядок>
						<ПолучитьИзВходящихДанных>true</ПолучитьИзВходящихДанных>
						<Источник Имя="" Вид=""/>
						<Приемник Имя="" Вид=""/>
						<ИмяПараметраДляПередачи>ЧекСНДС</ИмяПараметраДляПередачи>
					</Свойство>
					<Свойство>
						<Код>20</Код>
						<Наименование>--&gt; КратностьВзаиморасчетов</Наименование>
						<Порядок>750</Порядок>
						<Источник Имя="" Вид=""/>
						<Приемник Имя="КратностьВзаиморасчетов" Вид="Реквизит" Тип="Число"/>
						<ПередВыгрузкой>Значение = 1;</ПередВыгрузкой>
					</Свойство>
					<Свойство>
						<Код>21</Код>
						<Наименование>--&gt; КурсВзаиморасчетов</Наименование>
						<Порядок>800</Порядок>
						<Источник Имя="" Вид=""/>
						<Приемник Имя="КурсВзаиморасчетов" Вид="Реквизит" Тип="Число"/>
						<ПередВыгрузкой>Значение = 1;</ПередВыгрузкой>
					</Свойство>
					<Свойство>
						<Код>23</Код>
						<Наименование>--&gt; СуммаДокумента</Наименование>
						<Порядок>850</Порядок>
						<ПолучитьИзВходящихДанных>true</ПолучитьИзВходящихДанных>
						<Источник Имя="" Вид=""/>
						<Приемник Имя="СуммаДокумента" Вид="Реквизит" Тип="Число"/>
					</Свойство>
				</Свойства>
				<Значения/>
			</Правило>
			<Правило>
				<Код>ОООПродаетКлиентамТоварИПСчетПокупателю</Код>
				<Наименование>:</Наименование>
				<Порядок>300</Порядок>
				<Приемник>ДокументСсылка.СчетНаОплатуПокупателю</Приемник>
				<Свойства>
					<Свойство>
						<Код>1</Код>
						<Наименование>--&gt; ВалютаДокумента</Наименование>
						<Порядок>50</Порядок>
						<ПолучитьИзВходящихДанных>true</ПолучитьИзВходящихДанных>
						<Источник Имя="" Вид=""/>
						<Приемник Имя="ВалютаДокумента" Вид="Реквизит" Тип="СправочникСсылка.Валюты"/>
					</Свойство>
					<Свойство>
						<Код>2</Код>
						<Наименование>--&gt; Комментарий</Наименование>
						<Порядок>100</Порядок>
						<ПолучитьИзВходящихДанных>true</ПолучитьИзВходящихДанных>
						<Источник Имя="" Вид=""/>
						<Приемник Имя="Комментарий" Вид="Реквизит" Тип="Строка"/>
					</Свойство>
					<Свойство>
						<Код>3</Код>
						<Наименование>--&gt; Контрагент</Наименование>
						<Порядок>150</Порядок>
						<ПолучитьИзВходящихДанных>true</ПолучитьИзВходящихДанных>
						<Источник Имя="" Вид=""/>
						<Приемник Имя="Контрагент" Вид="Реквизит" Тип="СправочникСсылка.Контрагенты"/>
					</Свойство>
					<Свойство>
						<Код>4</Код>
						<Наименование>--&gt; Организация</Наименование>
						<Порядок>200</Порядок>
						<ПолучитьИзВходящихДанных>true</ПолучитьИзВходящихДанных>
						<Источник Имя="" Вид=""/>
						<Приемник Имя="Организация" Вид="Реквизит" Тип="СправочникСсылка.Организации"/>
					</Свойство>
					<Свойство>
						<Код>5</Код>
						<Наименование>--&gt; СуммаДокумента</Наименование>
						<Порядок>250</Порядок>
						<ПолучитьИзВходящихДанных>true</ПолучитьИзВходящихДанных>
						<Источник Имя="" Вид=""/>
						<Приемник Имя="СуммаДокумента" Вид="Реквизит" Тип="Число"/>
					</Свойство>
					<Свойство Поиск="true">
						<Код>6</Код>
						<Наименование>--&gt; Дата</Наименование>
						<Порядок>300</Порядок>
						<ПолучитьИзВходящихДанных>true</ПолучитьИзВходящихДанных>
						<Источник Имя="" Вид=""/>
						<Приемник Имя="Дата" Вид="Свойство" Тип="Дата"/>
					</Свойство>
					<Свойство Поиск="true">
						<Код>7</Код>
						<Наименование>--&gt; Номер</Наименование>
						<Порядок>350</Порядок>
						<ПолучитьИзВходящихДанных>true</ПолучитьИзВходящихДанных>
						<Источник Имя="" Вид=""/>
						<Приемник Имя="Номер" Вид="Свойство" Тип="Строка"/>
					</Свойство>
					<Группа>
						<Код>8</Код>
						<Наименование>--&gt; Товары</Наименование>
						<Порядок>400</Порядок>
						<ПолучитьИзВходящихДанных>true</ПолучитьИзВходящихДанных>
						<Источник Имя="" Вид=""/>
						<Приемник Имя="Товары" Вид="ТабличнаяЧасть"/>
						<Свойство>
							<Код>9</Код>
							<Наименование>--&gt; Количество</Наименование>
							<Порядок>50</Порядок>
							<Источник Имя="" Вид=""/>
							<Приемник Имя="Количество" Вид="Реквизит" Тип="Число"/>
						</Свойство>
						<Свойство>
							<Код>10</Код>
							<Наименование>--&gt; Номенклатура</Наименование>
							<Порядок>100</Порядок>
							<Источник Имя="" Вид=""/>
							<Приемник Имя="Номенклатура" Вид="Реквизит" Тип="СправочникСсылка.Номенклатура"/>
						</Свойство>
						<Свойство>
							<Код>11</Код>
							<Наименование>--&gt; СтавкаНДС</Наименование>
							<Порядок>150</Порядок>
							<Источник Имя="" Вид=""/>
							<Приемник Имя="СтавкаНДС" Вид="Реквизит" Тип="ПеречислениеСсылка.СтавкиНДС"/>
						</Свойство>
						<Свойство>
							<Код>12</Код>
							<Наименование>--&gt; Сумма</Наименование>
							<Порядок>200</Порядок>
							<Источник Имя="" Вид=""/>
							<Приемник Имя="Сумма" Вид="Реквизит" Тип="Число"/>
						</Свойство>
						<Свойство>
							<Код>13</Код>
							<Наименование>--&gt; СуммаНДС</Наименование>
							<Порядок>250</Порядок>
							<Источник Имя="" Вид=""/>
							<Приемник Имя="СуммаНДС" Вид="Реквизит" Тип="Число"/>
						</Свойство>
						<Свойство>
							<Код>14</Код>
							<Наименование>--&gt; Цена</Наименование>
							<Порядок>300</Порядок>
							<Источник Имя="" Вид=""/>
							<Приемник Имя="Цена" Вид="Реквизит" Тип="Число"/>
						</Свойство>
					</Группа>
					<Свойство>
						<Код>15</Код>
						<Наименование>--&gt; СуммаВключаетНДС</Наименование>
						<Порядок>450</Порядок>
						<Источник Имя="" Вид=""/>
						<Приемник Имя="СуммаВключаетНДС" Вид="Реквизит" Тип="Булево"/>
						<ПередВыгрузкой>Значение = Истина;</ПередВыгрузкой>
					</Свойство>
					<Свойство>
						<Код>16</Код>
						<Наименование>--&gt; ОрганизацияПолучатель</Наименование>
						<Порядок>500</Порядок>
						<ПолучитьИзВходящихДанных>true</ПолучитьИзВходящихДанных>
						<Источник Имя="" Вид=""/>
						<Приемник Имя="ОрганизацияПолучатель" Вид="Реквизит" Тип="СправочникСсылка.Организации"/>
					</Свойство>
					<Свойство>
						<Код>17</Код>
						<Наименование>--&gt; ДокументБезНДС</Наименование>
						<Порядок>550</Порядок>
						<Источник Имя="" Вид=""/>
						<Приемник Имя="ДокументБезНДС" Вид="Реквизит" Тип="Булево"/>
						<ПередВыгрузкой>Значение = Истина;</ПередВыгрузкой>
					</Свойство>
				</Свойства>
				<Значения/>
			</Правило>
			<Правило>
				<Код>ВозвратТоваровОтПокупателя</Код>
				<Наименование>:</Наименование>
				<Порядок>350</Порядок>
				<ПередЗагрузкой>РежимЗаписи  = "Запись";</ПередЗагрузкой>
				<ПриЗагрузке>РежимЗаписи  = "Запись";</ПриЗагрузке>
				<ПослеЗагрузки>//ЗаполнениеДокументов.ЗаполнитьШапкуДокумента(ОБъект, глЗначениеПеременной("глТекущийПользователь"), Константы.ВалютаРегламентированногоУчета.Получить(), "Продажа");
Если Найти(Объект.Комментарий,"Товары НДС#") = 0 Тогда
	Объект.Склад = Справочники.Склады.НайтиПоКоду(Параметры.КодОсновногоСклада);
Иначе
	Объект.Склад = Справочники.Склады.НайтиПоКоду(Параметры.кодСкладаКомиссия,Истина);
КонецЕсли;
Объект.Контрагент = Справочники.Контрагенты.НайтиПоНаименованию("физическое лицо");

Объект.ДоговорКонтрагента = Справочники.ДоговорыКонтрагентов.НайтиПоРеквизиту("ВидДоговора",Перечисления.ВидыДоговоровКонтрагентов.СПокупателем,,Объект.Контрагент);
Документы.ВозвратТоваровОтПокупателя.ЗаполнитьСчетаУчетаВТабличнойЧасти(Объект,"Товары");</ПослеЗагрузки>
				<ГенерироватьНовыйНомерИлиКодЕслиНеУказан>true</ГенерироватьНовыйНомерИлиКодЕслиНеУказан>
				<Приемник>ДокументСсылка.ВозвратТоваровОтПокупателя</Приемник>
				<Свойства>
					<Свойство Поиск="true">
						<Код>2</Код>
						<Наименование>--&gt; Дата</Наименование>
						<Порядок>100</Порядок>
						<ПолучитьИзВходящихДанных>true</ПолучитьИзВходящихДанных>
						<Источник Имя="" Вид=""/>
						<Приемник Имя="Дата" Вид="Свойство" Тип="Дата"/>
					</Свойство>
					<Свойство Поиск="true">
						<Код>3</Код>
						<Наименование>--&gt; Комментарий</Наименование>
						<Порядок>150</Порядок>
						<ПолучитьИзВходящихДанных>true</ПолучитьИзВходящихДанных>
						<Источник Имя="" Вид=""/>
						<Приемник Имя="Комментарий" Вид="Реквизит" Тип="Строка"/>
					</Свойство>
					<Свойство>
						<Код>4</Код>
						<Наименование>--&gt; ВалютаДокумента</Наименование>
						<Порядок>200</Порядок>
						<Источник Имя="" Вид=""/>
						<Приемник Имя="ВалютаДокумента" Вид="Реквизит" Тип="СправочникСсылка.Валюты"/>
						<ПередВыгрузкой>Значение = Константы.ВалютаРегламентированногоУчетаОрганизаций.Получить();</ПередВыгрузкой>
					</Свойство>
					<Свойство>
						<Код>5</Код>
						<Наименование>--&gt; ВидОперации</Наименование>
						<Порядок>250</Порядок>
						<Источник Имя="" Вид=""/>
						<Приемник Имя="ВидОперации" Вид="Реквизит" Тип="ПеречислениеСсылка.ВидыОперацийВозвратТоваровОтПокупателя"/>
						<ПередВыгрузкой>Значение = "ПродажаКомиссия";</ПередВыгрузкой>
					</Свойство>
					<Свойство Поиск="true">
						<Код>6</Код>
						<Наименование>--&gt; Организация</Наименование>
						<Порядок>300</Порядок>
						<ПолучитьИзВходящихДанных>true</ПолучитьИзВходящихДанных>
						<Источник Имя="" Вид=""/>
						<Приемник Имя="Организация" Вид="Реквизит" Тип="СправочникСсылка.Организации"/>
					</Свойство>
					<Группа>
						<Код>7</Код>
						<Наименование>--&gt; Товары</Наименование>
						<Порядок>350</Порядок>
						<ПолучитьИзВходящихДанных>true</ПолучитьИзВходящихДанных>
						<Источник Имя="" Вид=""/>
						<Приемник Имя="Товары" Вид="ТабличнаяЧасть"/>
						<Свойство>
							<Код>8</Код>
							<Наименование>--&gt; Количество</Наименование>
							<Порядок>50</Порядок>
							<Источник Имя="" Вид=""/>
							<Приемник Имя="Количество" Вид="Реквизит" Тип="Число"/>
						</Свойство>
						<Свойство>
							<Код>9</Код>
							<Наименование>--&gt; Номенклатура</Наименование>
							<Порядок>100</Порядок>
							<Источник Имя="" Вид=""/>
							<Приемник Имя="Номенклатура" Вид="Реквизит" Тип="СправочникСсылка.Номенклатура"/>
							<ПередВыгрузкой>Если ТипЗнч(ОбъектКоллекции.Номенклатура) = Тип("СправочникСсылка.Номенклатура") Тогда
	ИмяПКО = "Номенклатура";
ИначеЕсли ТипЗнч(ОбъектКоллекции.Номенклатура) = Тип("СправочникСсылка.Автоработы") Тогда	
	ИмяПКО = "Автоработы";
КонецЕсли;</ПередВыгрузкой>
						</Свойство>
						<Свойство>
							<Код>10</Код>
							<Наименование>--&gt; СтавкаНДС</Наименование>
							<Порядок>150</Порядок>
							<Источник Имя="" Вид=""/>
							<Приемник Имя="СтавкаНДС" Вид="Реквизит" Тип="ПеречислениеСсылка.СтавкиНДС"/>
							<ПередВыгрузкой>Значение = "БезНДС";</ПередВыгрузкой>
						</Свойство>
						<Свойство>
							<Код>11</Код>
							<Наименование>--&gt; Сумма</Наименование>
							<Порядок>200</Порядок>
							<Источник Имя="" Вид=""/>
							<Приемник Имя="Сумма" Вид="Реквизит" Тип="Число"/>
						</Свойство>
						<Свойство>
							<Код>12</Код>
							<Наименование>--&gt; Цена</Наименование>
							<Порядок>250</Порядок>
							<Источник Имя="" Вид=""/>
							<Приемник Имя="Цена" Вид="Реквизит" Тип="Число"/>
						</Свойство>
					</Группа>
					<Свойство>
						<Код>13</Код>
						<Наименование>--&gt; СуммаДокумента</Наименование>
						<Порядок>400</Порядок>
						<ПолучитьИзВходящихДанных>true</ПолучитьИзВходящихДанных>
						<Источник Имя="" Вид=""/>
						<Приемник Имя="СуммаДокумента" Вид="Реквизит" Тип="Число"/>
					</Свойство>
				</Свойства>
				<Значения/>
			</Правило>
			<Правило>
				<Код>ИнвентаризацияТоваровНаСкладе</Код>
				<Наименование>Документ: Инвентаризация товаров</Наименование>
				<Порядок>400</Порядок>
				<ГенерироватьНовыйНомерИлиКодЕслиНеУказан>true</ГенерироватьНовыйНомерИлиКодЕслиНеУказан>
				<Источник>ДокументСсылка.Инвентаризация</Источник>
				<Приемник>ДокументСсылка.ИнвентаризацияТоваровНаСкладе</Приемник>
				<Свойства>
					<Свойство Поиск="true">
						<Код>1</Код>
						<Наименование>Дата --&gt; Дата</Наименование>
						<Порядок>50</Порядок>
						<Источник Имя="Дата" Вид="Свойство" Тип="Дата"/>
						<Приемник Имя="Дата" Вид="Свойство" Тип="Дата"/>
					</Свойство>
					<Свойство>
						<Код>2</Код>
						<Наименование>Комментарий --&gt; Комментарий</Наименование>
						<Порядок>100</Порядок>
						<Источник Имя="Комментарий" Вид="Реквизит" Тип="Строка"/>
						<Приемник Имя="Комментарий" Вид="Реквизит" Тип="Строка"/>
					</Свойство>
					<Свойство Поиск="true">
						<Код>3</Код>
						<Наименование>Номер --&gt; Номер</Наименование>
						<Порядок>150</Порядок>
						<Источник Имя="Номер" Вид="Свойство" Тип="Строка"/>
						<Приемник Имя="Номер" Вид="Свойство" Тип="Строка"/>
						<ПриводитьКДлине>11</ПриводитьКДлине>
					</Свойство>
					<Свойство>
						<Код>4</Код>
						<Наименование>Организация --&gt; Организация</Наименование>
						<Порядок>200</Порядок>
						<Источник Имя="Организация" Вид="Реквизит" Тип="СправочникСсылка.Организации"/>
						<Приемник Имя="Организация" Вид="Реквизит" Тип="СправочникСсылка.Организации"/>
						<КодПравилаКонвертации>Организации                                       </КодПравилаКонвертации>
					</Свойство>
					<Свойство>
						<Код>5</Код>
						<Наименование>ПометкаУдаления --&gt; ПометкаУдаления</Наименование>
						<Порядок>250</Порядок>
						<Источник Имя="ПометкаУдаления" Вид="Свойство" Тип="Булево"/>
						<Приемник Имя="ПометкаУдаления" Вид="Свойство" Тип="Булево"/>
					</Свойство>
					<Свойство>
						<Код>6</Код>
						<Наименование>Проведен --&gt; Проведен</Наименование>
						<Порядок>300</Порядок>
						<Источник Имя="Проведен" Вид="Свойство" Тип="Булево"/>
						<Приемник Имя="Проведен" Вид="Свойство" Тип="Булево"/>
					</Свойство>
					<Группа>
						<Код>7</Код>
						<Наименование>Товары --&gt; Товары</Наименование>
						<Порядок>350</Порядок>
						<Источник Имя="Товары" Вид="ТабличнаяЧасть"/>
						<Приемник Имя="Товары" Вид="ТабличнаяЧасть"/>
						<Свойство>
							<Код>8</Код>
							<Наименование>КоличествоФакт --&gt; Количество</Наименование>
							<Порядок>50</Порядок>
							<Источник Имя="КоличествоФакт" Вид="Реквизит" Тип="Число"/>
							<Приемник Имя="Количество" Вид="Реквизит" Тип="Число"/>
						</Свойство>
						<Свойство>
							<Код>9</Код>
							<Наименование>Номенклатура --&gt; Номенклатура</Наименование>
							<Порядок>100</Порядок>
							<Источник Имя="Номенклатура" Вид="Реквизит" Тип="СправочникСсылка.Номенклатура"/>
							<Приемник Имя="Номенклатура" Вид="Реквизит" Тип="СправочникСсылка.Номенклатура"/>
							<КодПравилаКонвертации>Номенклатура                                      </КодПравилаКонвертации>
						</Свойство>
						<Свойство>
							<Код>10</Код>
							<Наименование>СуммаФакт --&gt; Сумма</Наименование>
							<Порядок>150</Порядок>
							<Источник Имя="СуммаФакт" Вид="Реквизит" Тип="Число"/>
							<Приемник Имя="Сумма" Вид="Реквизит" Тип="Число"/>
						</Свойство>
						<Свойство>
							<Код>11</Код>
							<Наименование>Цена --&gt; Цена</Наименование>
							<Порядок>200</Порядок>
							<Источник Имя="Цена" Вид="Реквизит" Тип="Число"/>
							<Приемник Имя="Цена" Вид="Реквизит" Тип="Число"/>
						</Свойство>
						<Свойство>
							<Код>12</Код>
							<Наименование>КоличествоКнижн --&gt; КоличествоУчет</Наименование>
							<Порядок>250</Порядок>
							<Источник Имя="КоличествоКнижн" Вид="Реквизит" Тип="Число"/>
							<Приемник Имя="КоличествоУчет" Вид="Реквизит" Тип="Число"/>
						</Свойство>
						<Свойство>
							<Код>13</Код>
							<Наименование>СуммаКнижн --&gt; СуммаУчет</Наименование>
							<Порядок>300</Порядок>
							<Источник Имя="СуммаКнижн" Вид="Реквизит" Тип="Число"/>
							<Приемник Имя="СуммаУчет" Вид="Реквизит" Тип="Число"/>
						</Свойство>
					</Группа>
				</Свойства>
				<Значения/>
			</Правило>
		</Группа>
		<Группа>
			<Код>Перечисления</Код>
			<Наименование>Перечисления</Наименование>
			<Порядок>150</Порядок>
			<Правило>
				<Код>СтавкиНДС</Код>
				<Наименование>Справочник: Ставки НДС</Наименование>
				<Порядок>50</Порядок>
				<Источник>СправочникСсылка.СтавкиНДС</Источник>
				<Приемник>ПеречислениеСсылка.СтавкиНДС</Приемник>
				<Свойства/>
				<Значения>
					<Значение>
						<Код>1</Код>
						<Наименование>БезНДС --&gt; БезНДС</Наименование>
						<Порядок>50</Порядок>
						<Источник>БезНДС</Источник>
						<Приемник>БезНДС</Приемник>
					</Значение>
					<Значение>
						<Код>2</Код>
						<Наименование>ОсновнаяСтавкаНДС --&gt; НДС18</Наименование>
						<Порядок>100</Порядок>
						<Источник>ОсновнаяСтавкаНДС</Источник>
						<Приемник>НДС20</Приемник>
					</Значение>
					<Значение>
						<Код>3</Код>
						<Наименование>20% --&gt; НДС20</Наименование>
						<Порядок>150</Порядок>
						<Источник>20%</Источник>
						<Приемник>НДС20</Приемник>
					</Значение>
				</Значения>
			</Правило>
			<Правило>
				<Код>ВидыОперацийПоступлениеТоваровУслуг</Код>
				<Наименование>Справочник: Хоз. операции</Наименование>
				<Порядок>100</Порядок>
				<Источник>СправочникСсылка.ХозОперации</Источник>
				<Приемник>ПеречислениеСсылка.ВидыОперацийПоступлениеТоваровУслуг</Приемник>
				<Свойства/>
				<Значения>
					<Значение>
						<Код>1</Код>
						<Наименование>ПоступлениеТМЦ --&gt;</Наименование>
						<Порядок>50</Порядок>
						<Источник>ПоступлениеТМЦ</Источник>
						<Приемник>ПокупкаКомиссия</Приемник>
					</Значение>
					<Значение>
						<Код>2</Код>
						<Наименование>ПоступлениеТоваров --&gt;</Наименование>
						<Порядок>100</Порядок>
						<Источник>ПоступлениеТоваров</Источник>
						<Приемник>ПокупкаКомиссия</Приемник>
					</Значение>
					<Значение>
						<Код>3</Код>
						<Наименование>ПоступлениеТоваровКомиссия --&gt;</Наименование>
						<Порядок>150</Порядок>
						<Источник>ПоступлениеТоваровКомиссия</Источник>
						<Приемник>ПокупкаКомиссия</Приемник>
					</Значение>
				</Значения>
			</Правило>
			<Правило>
				<Код>ЮридическоеФизическоеЛицо</Код>
				<Наименование>Перечисление: Формы собственности</Наименование>
				<Порядок>150</Порядок>
				<Источник>ПеречислениеСсылка.ФормыСобственности</Источник>
				<Приемник>ПеречислениеСсылка.ЮридическоеФизическоеЛицо</Приемник>
				<Свойства/>
				<Значения>
					<Значение>
						<Код>1</Код>
						<Наименование>ЮридическоеЛицо --&gt; ЮридическоеЛицо</Наименование>
						<Порядок>50</Порядок>
						<Источник>ЮридическоеЛицо</Источник>
						<Приемник>ЮридическоеЛицо</Приемник>
					</Значение>
					<Значение>
						<Код>2</Код>
						<Наименование>Прочее --&gt; ФизическоеЛицо</Наименование>
						<Порядок>100</Порядок>
						<Источник>Прочее</Источник>
						<Приемник>ФизическоеЛицо</Приемник>
					</Значение>
					<Значение>
						<Код>3</Код>
						<Наименование>ЧастноеЛицо --&gt; ФизическоеЛицо</Наименование>
						<Порядок>150</Порядок>
						<Источник>ЧастноеЛицо</Источник>
						<Приемник>ФизическоеЛицо</Приемник>
					</Значение>
					<Значение>
						<Код>4</Код>
						<Наименование>ЧастныйПредприниматель --&gt; ЮридическоеЛицо</Наименование>
						<Порядок>200</Порядок>
						<Источник>ЧастныйПредприниматель</Источник>
						<Приемник>ЮридическоеЛицо</Приемник>
					</Значение>
				</Значения>
			</Правило>
		</Группа>
	</ПравилаКонвертацииОбъектов>
	<ПравилаВыгрузкиДанных>
		<Группа Отключить="false">
			<Код>Документы</Код>
			<Наименование>Документы</Наименование>
			<Порядок>50</Порядок>
			<Правило Отключить="false">
				<Код>ПоступлениеТоваров</Код>
				<Наименование>Поступление товаров</Наименование>
				<Порядок>50</Порядок>
				<Описание>Поступление -&gt; Поступление - !!нет фильтра по ИП</Описание>
				<КодПравилаКонвертации>ПоступлениеТоваровУслуг                           </КодПравилаКонвертации>
				<СпособОтбораДанных>СтандартнаяВыборка</СпособОтбораДанных>
				<ОбъектВыборки>ДокументСсылка.ПоступлениеТоваров</ОбъектВыборки>
			</Правило>
			<Правило Отключить="false">
				<Код>СчетНаОплату</Код>
				<Наименование>Счет на оплату</Наименование>
				<Порядок>100</Порядок>
				<Описание>Продажи по безналу. Счет пок -&gt; Счет Пок</Описание>
				<КодПравилаКонвертации>СчетНаОплатуПокупателю                            </КодПравилаКонвертации>
				<СпособОтбораДанных>СтандартнаяВыборка</СпособОтбораДанных>
				<ОбъектВыборки>ДокументСсылка.СчетНаОплату</ОбъектВыборки>
			</Правило>
			<Правило Отключить="false">
				<Код>ЧекНаОплату</Код>
				<Наименование>Чек на оплату</Наименование>
				<Порядок>200</Порядок>
				<Описание>Наличные продажи собственного товара. ЧекиНаОплату.Ставка &lt;&gt; 18% -&gt; ОтчетОРозничныхПродажах</Описание>
				<СпособОтбораДанных>ПроизвольныйАлгоритм</СпособОтбораДанных>
				<ПередОбработкойПравила>парамОрганизация = Справочники.Организации.НайтиПоКоду(Параметры.кодОргИПНиколаев);

	Запрос = Новый Запрос;
	Запрос.Текст = 
	"ВЫБРАТЬ
	|	ЧекНаОплатуТовары.Ссылка.Организация КАК Организация,
	|	ЧекНаОплатуТовары.Ссылка.амбУСН КАК ПризнакУСН,
	|	ЧекНаОплатуТовары.Ссылка.Сделка КАК Сделка,
	|	ПРЕДСТАВЛЕНИЕ(ЧекНаОплатуТовары.Ссылка.Сделка) КАК СделкаПредставление,
	|	ЧекНаОплатуТовары.Номенклатура КАК Номенклатура,
	|	ПРЕДСТАВЛЕНИЕ(ЧекНаОплатуТовары.Номенклатура) КАК НоменклатураПредставление,
	|	ЧекНаОплатуТовары.Количество КАК Количество,
	|	""Товары ИМ"" КАК Категория,
	|	ЧекНаОплатуТовары.СуммаВсего КАК СуммаВсего,
	|	(ЧекНаОплатуТовары.Сумма - ЧекНаОплатуТовары.СуммаВсего) / ЧекНаОплатуТовары.Количество КАК СкидкаНаЦену,
	|	ЧекНаОплатуТовары.Цена КАК ЦенаБезСкидки,
	|	ЧекНаОплатуТовары.Сумма - ЧекНаОплатуТовары.СуммаВсего КАК СуммаСкидки,
	|	ЧекНаОплатуТовары.СуммаВсего / ЧекНаОплатуТовары.Количество КАК ЦенаПродажи,
	|	НАЧАЛОПЕРИОДА(ЧекНаОплатуТовары.Ссылка.Дата, ДЕНЬ) КАК Дата,
	|	ЧекНаОплатуТовары.Номенклатура.Артикул КАК Артикул,
	|	ЧекНаОплатуТовары.Ссылка.ХозОперация КАК ХозОперация,
	|	ЧекНаОплатуТовары.Ссылка КАК Ссылка
	|ИЗ
	|	Документ.ЧекНаОплату.Товары КАК ЧекНаОплатуТовары
	|ГДЕ
	|	НЕ ЧекНаОплатуТовары.Номенклатура.ВидНоменклатуры = &amp;ЭтоУслуга
	|	И ЧекНаОплатуТовары.Ссылка.Проведен
	|	И ЧекНаОплатуТовары.Ссылка.Дата МЕЖДУ &amp;ДатаНачала И &amp;ДатаОкончания
	|	И ЕСТЬNULL(ЧекНаОплатуТовары.Ссылка.амбИнтМаг, ЛОЖЬ)
	|
	|ОБЪЕДИНИТЬ ВСЕ
	|
	|ВЫБРАТЬ
	|	ЧекНаОплатуТовары.Ссылка.Организация,
	|	ЧекНаОплатуТовары.Ссылка.амбУСН,
	|	ЧекНаОплатуТовары.Ссылка.Сделка,
	|	ПРЕДСТАВЛЕНИЕ(ЧекНаОплатуТовары.Ссылка.Сделка),
	|	ЧекНаОплатуТовары.Номенклатура,
	|	ПРЕДСТАВЛЕНИЕ(ЧекНаОплатуТовары.Номенклатура),
	|	ЧекНаОплатуТовары.Количество,
	|	""Товары УСН"",
	|	ЧекНаОплатуТовары.СуммаВсего,
	|	(ЧекНаОплатуТовары.Сумма - ЧекНаОплатуТовары.СуммаВсего) / ЧекНаОплатуТовары.Количество,
	|	ЧекНаОплатуТовары.Цена,
	|	ЧекНаОплатуТовары.Сумма - ЧекНаОплатуТовары.СуммаВсего,
	|	ЧекНаОплатуТовары.СуммаВсего / ЧекНаОплатуТовары.Количество,
	|	НАЧАЛОПЕРИОДА(ЧекНаОплатуТовары.Ссылка.Дата, ДЕНЬ),
	|	ЧекНаОплатуТовары.Номенклатура.Артикул,
	|	ЧекНаОплатуТовары.Ссылка.ХозОперация,
	|	ЧекНаОплатуТовары.Ссылка
	|ИЗ
	|	Документ.ЧекНаОплату.Товары КАК ЧекНаОплатуТовары
	|ГДЕ
	|	(ЧекНаОплатуТовары.Ссылка.амбУСН = ИСТИНА
	|				И НЕ ЧекНаОплатуТовары.Ссылка.амбТоварООО
	|			ИЛИ ЧекНаОплатуТовары.Ссылка.СтавкаНДС = ЗНАЧЕНИЕ(Справочник.СтавкиНДС.БезНДС)
	|				И ЧекНаОплатуТовары.Ссылка.амбТоварООО)
	|	И НЕ ЧекНаОплатуТовары.Номенклатура.ВидНоменклатуры = &amp;ЭтоУслуга
	|	И ЧекНаОплатуТовары.Ссылка.Проведен
	|	И ЧекНаОплатуТовары.Ссылка.Дата МЕЖДУ &amp;ДатаНачала И &amp;ДатаОкончания
	|	И НЕ ЕСТЬNULL(ЧекНаОплатуТовары.Ссылка.амбИнтМаг, ЛОЖЬ)
	|
	|ОБЪЕДИНИТЬ ВСЕ
	|
	|ВЫБРАТЬ
	|	ЧекНаОплатуТовары.Ссылка.Организация,
	|	ЧекНаОплатуТовары.Ссылка.амбУСН,
	|	ЧекНаОплатуТовары.Ссылка.Сделка,
	|	ПРЕДСТАВЛЕНИЕ(ЧекНаОплатуТовары.Ссылка.Сделка),
	|	ЧекНаОплатуТовары.Номенклатура,
	|	ПРЕДСТАВЛЕНИЕ(ЧекНаОплатуТовары.Номенклатура),
	|	ЧекНаОплатуТовары.Количество,
	|	""Товары ЕНВД"",
	|	ЧекНаОплатуТовары.СуммаВсего,
	|	(ЧекНаОплатуТовары.Сумма - ЧекНаОплатуТовары.СуммаВсего) / ЧекНаОплатуТовары.Количество,
	|	ЧекНаОплатуТовары.Цена,
	|	ЧекНаОплатуТовары.Сумма - ЧекНаОплатуТовары.СуммаВсего,
	|	ЧекНаОплатуТовары.СуммаВсего / ЧекНаОплатуТовары.Количество,
	|	НАЧАЛОПЕРИОДА(ЧекНаОплатуТовары.Ссылка.Дата, ДЕНЬ),
	|	ЧекНаОплатуТовары.Номенклатура.Артикул,
	|	ЧекНаОплатуТовары.Ссылка.ХозОперация,
	|	ЧекНаОплатуТовары.Ссылка
	|ИЗ
	|	Документ.ЧекНаОплату.Товары КАК ЧекНаОплатуТовары
	|ГДЕ
	|	ЧекНаОплатуТовары.Ссылка.амбУСН = ЛОЖЬ
	|	И НЕ ЧекНаОплатуТовары.Номенклатура.ВидНоменклатуры = &amp;ЭтоУслуга
	|	И НЕ ЧекНаОплатуТовары.Ссылка.амбТоварООО
	|	И ЧекНаОплатуТовары.Ссылка.Проведен
	|	И ЧекНаОплатуТовары.Ссылка.Дата МЕЖДУ &amp;ДатаНачала И &amp;ДатаОкончания
	|	И НЕ ЕСТЬNULL(ЧекНаОплатуТовары.Ссылка.амбИнтМаг, ЛОЖЬ)
	|
	|ОБЪЕДИНИТЬ ВСЕ
	|
	|ВЫБРАТЬ
	|	ЧекНаОплатуТовары.Ссылка.Организация,
	|	ЧекНаОплатуТовары.Ссылка.амбУСН,
	|	ЧекНаОплатуТовары.Ссылка.Сделка,
	|	ПРЕДСТАВЛЕНИЕ(ЧекНаОплатуТовары.Ссылка.Сделка),
	|	ЧекНаОплатуТовары.ХарактеристикаНоменклатуры,
	|	ПРЕДСТАВЛЕНИЕ(ЧекНаОплатуТовары.ХарактеристикаНоменклатуры),
	|	ЧекНаОплатуТовары.Количество,
	|	""Услуги УСН"",
	|	ЧекНаОплатуТовары.СуммаВсего,
	|	(ЧекНаОплатуТовары.Сумма - ЧекНаОплатуТовары.СуммаВсего) / ЧекНаОплатуТовары.Количество,
	|	ЧекНаОплатуТовары.Цена,
	|	ЧекНаОплатуТовары.Сумма - ЧекНаОплатуТовары.СуммаВсего,
	|	ЧекНаОплатуТовары.СуммаВсего / ЧекНаОплатуТовары.Количество,
	|	НАЧАЛОПЕРИОДА(ЧекНаОплатуТовары.Ссылка.Дата, ДЕНЬ),
	|	ЧекНаОплатуТовары.Номенклатура.Артикул,
	|	ЧекНаОплатуТовары.Ссылка.ХозОперация,
	|	ЧекНаОплатуТовары.Ссылка
	|ИЗ
	|	Документ.ЧекНаОплату.Товары КАК ЧекНаОплатуТовары
	|ГДЕ
	|	ЧекНаОплатуТовары.Номенклатура.ВидНоменклатуры = &amp;ЭтоУслуга
	|	И НЕ ЧекНаОплатуТовары.Ссылка.амбТоварООО
	|	И ЧекНаОплатуТовары.Ссылка.Проведен
	|	И ЧекНаОплатуТовары.Ссылка.Дата МЕЖДУ &amp;ДатаНачала И &amp;ДатаОкончания
	|	И НЕ ЕСТЬNULL(ЧекНаОплатуТовары.Ссылка.амбИнтМаг, ЛОЖЬ)
	|
	|УПОРЯДОЧИТЬ ПО
	|	ПризнакУСН
	|ИТОГИ
	|	СУММА(Количество),
	|	СУММА(СуммаВсего),
	|	СУММА(СкидкаНаЦену),
	|	СУММА(ЦенаБезСкидки),
	|	СУММА(СуммаСкидки),
	|	СУММА(ЦенаПродажи)
	|ПО
	|	Дата,
	|	Организация,
	|	Категория";
	
	Запрос.УстановитьПараметр("ЭтоУслуга", Перечисления.ВидыНоменклатуры.Услуга);
	Запрос.УстановитьПараметр("ДатаНачала", НачалоДня(ДатаНачала));
	Запрос.УстановитьПараметр("ДатаОкончания", КонецДня(ДатаОкончания)); 	
	ВыборкаДат = Запрос.Выполнить().Выбрать(ОбходРезультатаЗапроса.ПоГруппировкам);
	Пока ВыборкаДат.Следующий() Цикл
		ВыборкаОрганизаций = ВыборкаДат.Выбрать(ОбходРезультатаЗапроса.ПоГруппировкам);
		Пока ВыборкаОрганизаций.Следующий() Цикл
			Если НЕ ВыборкаОрганизаций.Организация = парамОрганизация Тогда
				Сообщить("ВыборкаОрганизаций.Организация:" + ВыборкаОрганизаций.Организация);
				Продолжить;
			КонецЕсли;
			ВыборкаКатегорий = ВыборкаОрганизаций.Выбрать(ОбходРезультатаЗапроса.ПоГруппировкам);
			Пока ВыборкаКатегорий.Следующий() Цикл
				Категория   = ВыборкаКатегорий.Категория;
				Организация = ВыборкаОрганизаций.Организация;
				Дата        = ВыборкаДат.Дата;
				Комментарий = "#" + Формат(ВыборкаДат.Дата, "ДФ=dd.MM.yyyy") + "; " + Организация + "; " + Категория + "#";
				ВходящиеДанные = Новый Структура;
				ВходящиеДанные.Вставить("Дата", Дата);
				ВходящиеДанные.Вставить("Организация", Организация);				
				ВходящиеДанные.Вставить("Комментарий", Комментарий);
				ТаблицаТоваров = Новый ТаблицаЗначений;
				ТаблицаТоваров.Колонки.Добавить("Количество");
				ТаблицаТоваров.Колонки.Добавить("Номенклатура");
				ТаблицаТоваров.Колонки.Добавить("СтавкаНДС");
				ТаблицаТоваров.Колонки.Добавить("СуммаНДС");
				ТаблицаТоваров.Колонки.Добавить("Сумма");				
				ТаблицаТоваров.Колонки.Добавить("Цена");				
				ТаблицаВозвратов = ТаблицаТоваров.СкопироватьКолонки();
				
				Выборка = ВыборкаКатегорий.Выбрать();
				Пока Выборка.Следующий() Цикл
					Количество = Выборка.Количество;
					Если Количество &lt; 0 Тогда
						Продолжить;
					КонецЕсли;	
					Если Выборка.ХозОперация = Справочники.ХозОперации.ЧекНаОплату Тогда
						НоваяСтрока = ТаблицаТоваров.Добавить();
					Иначе
						НоваяСтрока = ТаблицаВозвратов.Добавить();
					КонецЕсли;	
					НоваяСтрока.Сумма        = Выборка.СуммаВсего;
					НоваяСтрока.Количество   = Количество;
					НоваяСтрока.Цена         = Окр(Выборка.СуммаВсего / Количество, 2);
					Если ТипЗнч(Выборка.Номенклатура) = Тип("СправочникСсылка.Номенклатура") Тогда
						НоваяСтрока.Номенклатура = Выборка.Номенклатура;
					Иначе
						НоваяСтрока.Номенклатура = Справочники.Автоработы.НайтиПоНаименованию(Выборка.НоменклатураПредставление, Истина);
					КонецЕсли;
					Если Найти(ВыборкаКатегорий.Категория, "НДС") = 0 Тогда
						НоваяСтрока.СтавкаНДС   = Справочники.СтавкиНДС.БезНДС;
						НоваяСтрока.СуммаНДС   = 0; 
					Иначе
						НоваяСтрока.СтавкаНДС = Справочники.СтавкиНДС.ОсновнаяСтавкаНДС;
						НоваяСтрока.СуммаНДС  = Выборка.СуммаВсего / 120 * 20;
					КонецЕсли;
				КонецЦикла;	
				ВходящиеДанные.Вставить("СуммаДокумента", ТаблицаТоваров.Итог("Сумма") - ТаблицаВозвратов.Итог("Сумма"));
				ВходящиеДанные.Вставить("Товары", ТаблицаТоваров);
				ВходящиеДанные.Вставить("Возвраты", ТаблицаВозвратов);
				ВыгрузитьПоПравилу(,,ВходящиеДанные,,"ОтчетОРозничныхПродажах");

			КонецЦикла;	
		КонецЦикла;	
	КонецЦикла;</ПередОбработкойПравила>
			</Правило>
			<Правило Отключить="false">
				<Код>ЧекНаОплатуНДС</Код>
				<Наименование>ЧекНаОплатуНДС</Наименование>
				<Порядок>250</Порядок>
				<Описание>Наличные продажи товаров ООО. ЧекиНаОплату.Ставка = 20% -&gt; ПоступлениеТоваровУслугКомиссия</Описание>
				<СпособОтбораДанных>ПроизвольныйАлгоритм</СпособОтбораДанных>
				<ПередОбработкойПравила>парамОрганизация = Справочники.Организации.НайтиПоКоду(Параметры.кодОргИПНиколаев);

Запрос = Новый Запрос;
	Запрос.Текст = 
	"ВЫБРАТЬ
	|	ЧекНаОплатуТовары.Ссылка.Организация КАК Организация,
	|	ЧекНаОплатуТовары.Ссылка.амбУСН КАК ПризнакУСН,
	|	ЧекНаОплатуТовары.Ссылка.Сделка,
	|	ЧекНаОплатуТовары.СтавкаНДС КАК СтавкаНДС,
	|	ПРЕДСТАВЛЕНИЕ(ЧекНаОплатуТовары.Ссылка.Сделка),
	|	ЧекНаОплатуТовары.Номенклатура,
	|	ПРЕДСТАВЛЕНИЕ(ЧекНаОплатуТовары.Номенклатура),
	|	ЧекНаОплатуТовары.Количество КАК Количество,
	|	""Товары НДС"" КАК Категория,
	|	ЧекНаОплатуТовары.СуммаВсего КАК СуммаВсего,
	|	(ЧекНаОплатуТовары.Сумма - ЧекНаОплатуТовары.СуммаВсего) / ЧекНаОплатуТовары.Количество КАК СкидкаНаЦену,
	|	ЧекНаОплатуТовары.Цена КАК ЦенаБезСкидки,
	|	ЧекНаОплатуТовары.Сумма - ЧекНаОплатуТовары.СуммаВсего КАК СуммаСкидки,
	|	ЧекНаОплатуТовары.СуммаВсего / ЧекНаОплатуТовары.Количество КАК ЦенаПродажи,
	|	НАЧАЛОПЕРИОДА(ЧекНаОплатуТовары.Ссылка.Дата, ДЕНЬ) КАК Дата,
	|	ЧекНаОплатуТовары.Номенклатура.Артикул КАК Артикул,
	|	ЧекНаОплатуТовары.Ссылка.ХозОперация КАК ХозОперация,
	|	ЧекНаОплатуТовары.Ссылка
	|ИЗ
	|	Документ.ЧекНаОплату.Товары КАК ЧекНаОплатуТовары
	|ГДЕ
//	|	ЧекНаОплатуТовары.Номенклатура.амбУСН = ЛОЖЬ
	|	 НЕ ЧекНаОплатуТовары.Номенклатура.ВидНоменклатуры = &amp;ЭтоУслуга
	|	И НЕ ЧекНаОплатуТовары.СтавкаНДС = Значение(Справочник.СтавкиНДС.БезНДС)
//	|	И ЧекНаОплатуТовары.Ссылка.ХозОперация = ЗНАЧЕНИЕ(Справочник.ХозОперации.ЧекНаОплату)
//	|	И ЧекНаОплатуТовары.Ссылка.амбТоварООО = Истина
	|   И ЧекНаОплатуТовары.Ссылка.Дата &gt;= ДАТАВРЕМЯ(2018,08,20)
	|	И ЧекНаОплатуТовары.Ссылка.Проведен
	|	И ЧекНаОплатуТовары.Ссылка.Дата МЕЖДУ &amp;ДатаНачала И &amp;ДатаОкончания
	|	И НЕ ЕСТЬNULL(ЧекНаОплатуТовары.Ссылка.амбИнтМаг, Ложь)
	|
	|УПОРЯДОЧИТЬ ПО
	|	ПризнакУСН
	|ИТОГИ
	|	СУММА(Количество),
	|	СУММА(СуммаВсего),
	|	СУММА(СкидкаНаЦену),
	|	СУММА(ЦенаБезСкидки),
	|	СУММА(СуммаСкидки),
	|	СУММА(ЦенаПродажи)
	|ПО
	|	Дата,
	|	Организация,
	|	Категория";
	
	Запрос.УстановитьПараметр("ЭтоУслуга", Перечисления.ВидыНоменклатуры.Услуга);
	Запрос.УстановитьПараметр("ДатаНачала", НачалоДня(ДатаНачала));
	Запрос.УстановитьПараметр("ДатаОкончания", КонецДня(ДатаОкончания)); 	
	ВыборкаДат = Запрос.Выполнить().Выбрать(ОбходРезультатаЗапроса.ПоГруппировкам);
	Пока ВыборкаДат.Следующий() Цикл
		ВыборкаОрганизаций = ВыборкаДат.Выбрать(ОбходРезультатаЗапроса.ПоГруппировкам);
		Пока ВыборкаОрганизаций.Следующий() Цикл
			Если НЕ ВыборкаОрганизаций.Организация = парамОрганизация Тогда
				Продолжить;
			КонецЕсли;
			ВыборкаКатегорий = ВыборкаОрганизаций.Выбрать(ОбходРезультатаЗапроса.ПоГруппировкам);
			Пока ВыборкаКатегорий.Следующий() Цикл
				Категория   = ВыборкаКатегорий.Категория;
				Организация = ВыборкаОрганизаций.Организация;
				Дата        = ВыборкаДат.Дата;             
				// По Категории при загрузке проставляется Склад.
				ВходящиеДанные = Новый Структура;
				ВходящиеДанные.Вставить("Дата", Дата);
				ВходящиеДанные.Вставить("Организация", Организация);				
//				Сообщить("Контр: "+ Справочники.Контрагенты.НайтиПоКоду(Параметры.кодОООАльфаМобил));
				ВходящиеДанные.Вставить("Контрагент",Справочники.Контрагенты.НайтиПоКоду(Параметры.кодОООАльфаМобил));
				ТаблицаТоваров = Новый ТаблицаЗначений;
				ТаблицаТоваров.Колонки.Добавить("Количество");
				ТаблицаТоваров.Колонки.Добавить("Номенклатура");
				ТаблицаТоваров.Колонки.Добавить("СтавкаНДС");
				ТаблицаТоваров.Колонки.Добавить("СуммаНДС");
				ТаблицаТоваров.Колонки.Добавить("Сумма");				
				ТаблицаТоваров.Колонки.Добавить("Цена");				
				ТаблицаВозвратов = ТаблицаТоваров.СкопироватьКолонки();
				
				Выборка = ВыборкаКатегорий.Выбрать();
				Пока Выборка.Следующий() Цикл
					Количество = Выборка.Количество;
					Если Количество &lt;= 0 Тогда
						Продолжить;
					КонецЕсли;	
					Если Выборка.ХозОперация = Справочники.ХозОперации.ЧекНаОплату Тогда
						НоваяСтрока = ТаблицаТоваров.Добавить();
					Иначе
						НоваяСтрока = ТаблицаВозвратов.Добавить();
					КонецЕсли;	
					НоваяСтрока.Сумма        = Выборка.СуммаВсего;
					НоваяСтрока.Количество   = Количество;
					Если Выборка.СтавкаНДС = Справочники.СтавкиНДС.БезНДС Тогда
						НоваяСтрока.СтавкаНДС = Справочники.СтавкиНДС.БезНДС;
						НоваяСтрока.СуммаНДС   = 0;
					Иначе
						НоваяСтрока.СтавкаНДС = Справочники.СтавкиНДС.ОсновнаяСтавкаНДС;
						НоваяСтрока.СуммаНДС   = Выборка.СуммаВсего / 120 * 20;
//						Сообщить(""+НоваяСтрока.СуммаНДС);
					КонецЕсли;						
					НоваяСтрока.Цена         = Окр(Выборка.СуммаВсего / Количество, 2);
					Если ТипЗнч(Выборка.Номенклатура) = Тип("СправочникСсылка.Номенклатура") Тогда
						НоваяСтрока.Номенклатура = Выборка.Номенклатура;
					Иначе
						НоваяСтрока.Номенклатура = Справочники.Автоработы.НайтиПоНаименованию(Выборка.НоменклатураПредставление, Истина);
					КонецЕсли;
				КонецЦикла;	
				ВходящиеДанные.Вставить("СуммаДокумента", ТаблицаТоваров.Итог("Сумма") - ТаблицаВозвратов.Итог("Сумма"));
				ВходящиеДанные.Вставить("Товары", ТаблицаТоваров);
				ВходящиеДанные.Вставить("Возвраты", ТаблицаВозвратов);
				Если НЕ Выборка.СтавкаНДС = Справочники.СтавкиНДС.БезНДС Тогда
//					Сообщить("Товар ООО чек С НДС");
					ВходящиеДанные.Вставить("ЧекСНДС", Истина);
					Комментарий = "#" + Формат(ВыборкаДат.Дата, "ДФ=dd.MM.yyyy") + "; " + Организация + "; Товар ООО, Чек с НДС Товары НДС#";// sic дальше идет поиск по комментарию!!! в ПКО ОтчетОРозничныхПродажах
					ВходящиеДанные.Вставить("Комментарий", Комментарий);
					ВыгрузитьПоПравилу(,,ВходящиеДанные,,"ПоступлениеТоваровУслугТоварыООО");
				Иначе
//					Сообщить("Товар ООО СНО УСН");
					ВходящиеДанные.Вставить("ЧекСНДС", Ложь);
					Комментарий = "#" + Формат(ВыборкаДат.Дата, "ДФ=dd.MM.yyyy") + "; " + Организация + "; Товар ООО чек без НДС# продажа Юрлицу или ИП ";
					ВходящиеДанные.Вставить("Комментарий", Комментарий);
					ВыгрузитьПоПравилу(,,ВходящиеДанные,,"ПоступлениеТоваровУслугТоварыООО");
				КонецЕсли;
				
				ВыгрузитьПоПравилу(,,ВходящиеДанные,,"ОтчетОРозничныхПродажах");

			КонецЦикла;	
		КонецЦикла;	
	КонецЦикла;</ПередОбработкойПравила>
			</Правило>
			<Правило Отключить="false">
				<Код>ОООПродаетКлиентамТоварИП</Код>
				<Наименование>ОООПродаетТоварИП</Наименование>
				<Порядок>300</Порядок>
				<Описание>Сделать счет от ИП на ООО на проданный через ООО товар ИП.</Описание>
				<СпособОтбораДанных>ПроизвольныйАлгоритм</СпособОтбораДанных>
				<ПередОбработкойПравила>	Запрос = Новый Запрос;
	Запрос.Текст = 
	"ВЫБРАТЬ
	|НачалоПериода(СчетФактураВыданныйТовары.Ссылка.Дата, ДЕНЬ) Как Дата,
	| СчетФактураВыданныйТовары.Ссылка.Организация,
	| СчетФактураВыданныйТовары.Ссылка.ВалютаДокумента,
	| СчетФактураВыданныйТовары.ГТД,
	| СчетФактураВыданныйТовары.Партия,
	| СчетФактураВыданныйТовары.Номенклатура,
	| СчетФактураВыданныйТовары.Количество,
	| СчетФактураВыданныйТовары.ЕдиницаИзмерения,
	| СчетФактураВыданныйТовары.Цена,
	| СчетФактураВыданныйТовары.Сумма,
	| СчетФактураВыданныйТовары.СтавкаНДС,
	| СчетФактураВыданныйТовары.СуммаНДС,
	| ВЫБОР 
    |         КОГДА ТипЗначения(СчетФактураВыданныйТовары.Партия) = Тип(Документ.ПоступлениеТоваров)
    |             ТОГДА СчетФактураВыданныйТовары.Партия.амбООО
    |         ИНАЧЕ Ложь
    |     КОНЕЦ КАК ООО
	| ИЗ
	| 	Документ.СчетФактураВыданный.Товары КАК СчетФактураВыданныйТовары
	| ГДЕ
	| 	СчетФактураВыданныйТовары.Ссылка.Дата МЕЖДУ &amp;ДатаНачала И &amp;ДатаОкончания
	| 	И СчетФактураВыданныйТовары.Ссылка.Организация.СистемаНалогоОбложения = ЗНАЧЕНИЕ(Перечисление.СистемыНалогообложения.Общая)
	| 	И СчетФактураВыданныйТовары.Ссылка.Проведен = Истина
	| 	И ТипЗначения(СчетФактураВыданныйТовары.Номенклатура) = Тип(Справочник.Номенклатура)
	| 	
	| 	ИТОГИ ПО
	|        Дата";
	
	Запрос.УстановитьПараметр("ДатаНачала", НачалоДня(ДатаНачала));
	Запрос.УстановитьПараметр("ДатаОкончания", КонецДня(ДатаОкончания)); 	

    ВыборкаДат = Запрос.Выполнить().Выбрать(ОбходРезультатаЗапроса.ПоГруппировкам);
	Пока ВыборкаДат.Следующий() Цикл
		Дата        = ВыборкаДат.Дата;
		Комментарий = "# от " + Формат(ВыборкаДат.Дата, "ДФ=dd.MM.yyyy") + " #";
		ВходящиеДанные = Новый Структура;
		ВходящиеДанные.Вставить("Дата", Дата+8*3600);
		ВходящиеДанные.Вставить("Комментарий", Комментарий);
		ВходящиеДанные.Вставить("Контрагент",Справочники.Контрагенты.НайтиПоКоду(Параметры.кодОООАльфаМобил));
		ВходящиеДанные.Вставить("Номер", "Z"+Формат(Дата,"ДФ=ггггММдд"));
//		ВходящиеДанные.Вставить("СчетНаОплатуПоставщика", "Z"+Формат(Дата,"ДФ=ггггММдд"));
		ВходящиеДанные.Вставить("Организация", "");				
		ВходящиеДанные.Вставить("ОрганизацияПолучатель", "");				
		ВходящиеДанные.Вставить("ВалютаДокумента","");
		ТаблицаТоваров = Новый ТаблицаЗначений;
		ТаблицаТоваров.Колонки.Добавить("Количество");
		ТаблицаТоваров.Колонки.Добавить("Номенклатура");
		ТаблицаТоваров.Колонки.Добавить("СтавкаНДС");
		ТаблицаТоваров.Колонки.Добавить("СуммаНДС");
		ТаблицаТоваров.Колонки.Добавить("Сумма");				
		ТаблицаТоваров.Колонки.Добавить("Цена");				
		ТаблицаТоваров.Колонки.Добавить("НомерГТД");				
		ТаблицаТоваров.Колонки.Добавить("СтранаПроисхождения");				
		счТоваровИП = 0;
		Выборка = ВыборкаДат.Выбрать();
		Пока Выборка.Следующий() Цикл
			ВходящиеДанные.Организация = "00001";
			ВходящиеДанные.ОрганизацияПолучатель = "00001";
			ВходящиеДанные.ВалютаДокумента = Выборка.ВалютаДокумента;
			Если Выборка.ООО Тогда
				Продолжить;
			КонецЕсли;
			счТоваровИП = счТоваровИП + 1;
			НоваяСтрока = ТаблицаТоваров.Добавить();
			//НоваяСтрока.Сумма        = Выборка.Сумма;
			НоваяСтрока.Количество   = Выборка.Количество;
			НоваяСтрока.Цена         = Выборка.Цена - Окр(Выборка.Цена * 0.2,0);
			НоваяСтрока.Сумма        = Выборка.Количество * НоваяСтрока.Цена;
			НоваяСтрока.Номенклатура = Выборка.Номенклатура;
			НоваяСтрока.СуммаНДС   = 0;
			НоваяСтрока.СтавкаНДС = Справочники.СтавкиНДС.БезНДС;
			НоваяСтрока.НомерГТД = Выборка.ГТД;
			НоваяСтрока.СтранаПроисхождения = Выборка.ГТД.Страна;
		КонецЦикла;	
		ВходящиеДанные.Вставить("СуммаДокумента", ТаблицаТоваров.Итог("Сумма"));
		ВходящиеДанные.Вставить("Товары", ТаблицаТоваров);
		Если счТоваровИП &gt; 0 Тогда
			ВыгрузитьПоПравилу(,,ВходящиеДанные,,"ОООПродаетКлиентамТоварИПСчетПокупателю");
		КонецЕсли;
	КонецЦикла;</ПередОбработкойПравила>
			</Правило>
			<Правило Отключить="false">
				<Код>ИППродалоТоварОООЮрику_ИП_или_ИМ</Код>
				<Наименование>ИППродалоТоварОООЮрику_ИП_или_ИМ</Наименование>
				<Порядок>400</Порядок>
				<СпособОтбораДанных>ПроизвольныйАлгоритм</СпособОтбораДанных>
				<ПередОбработкойПравила>//ДатаНачала = '20220516';
//ДатаОкончания = '20220518';
//Параметры = Новый Структура("КодОсновногоСклада,кодОООАльфаМобил");
//Параметры.КодОсновногоСклада = "00-000001";
//Параметры.кодОООАльфаМобил  = "ЦБ002462";

	Запрос = Новый Запрос;
	Запрос.Текст = 
		"ВЫБРАТЬ
		|	НАЧАЛОПЕРИОДА(ЗНТовары.Ссылка.ДатаОкончания, ДЕНЬ) КАК Дата,
		|	ПартииТоваровКомпании.Номенклатура КАК Номенклатура,
		|	СУММА(ВЫБОР
		|			КОГДА ПартииТоваровКомпании.ВидДвижения = ЗНАЧЕНИЕ(ВидДвиженияНакопления.Приход)
		|				ТОГДА -ПартииТоваровКомпании.Количество
		|			ИНАЧЕ ПартииТоваровКомпании.Количество
		|		КОНЕЦ) КАК Количество,
		|	ЗНТовары.ЕдиницаИзмерения КАК ЕдиницаИзмерения,
		|	ЗНТовары.СуммаВсего / ЗНТовары.Количество КАК Цена,
		|	ПартииТоваровКомпании.ДокументПродажи КАК ДокументПродажи,
		|	""ЗН"" КАК ТипПартии
		|ПОМЕСТИТЬ ВТПартииЗН
		|ИЗ
		|	РегистрНакопления.ПартииТоваровКомпании КАК ПартииТоваровКомпании
		|		ВНУТРЕННЕЕ СОЕДИНЕНИЕ Документ.ЗаказНаряд.Товары КАК ЗНТовары
		|		ПО (ЗНТовары.Номенклатура = ПартииТоваровКомпании.Номенклатура)
		|			И ПартииТоваровКомпании.ДокументПродажи = ЗНТовары.Ссылка
		|			И (ЗНТовары.Ссылка.ДатаОкончания МЕЖДУ &amp;ДатаНачала И &amp;ДатаОкончания)
		|ГДЕ
		|	ПартииТоваровКомпании.амбООО = ИСТИНА
		|	И НЕ ПартииТоваровКомпании.ДокументПродажи.Организация.ФормаСобственности = ЗНАЧЕНИЕ(Перечисление.ФормыСобственности.ЮридическоеЛицо)
		|	И (ПартииТоваровКомпании.ДокументПродажи.Контрагент.ФормаСобственности = ЗНАЧЕНИЕ(Перечисление.ФормыСобственности.ЮридическоеЛицо)
		|			ИЛИ ПартииТоваровКомпании.ДокументПродажи.Контрагент.ФормаСобственности = ЗНАЧЕНИЕ(Перечисление.ФормыСобственности.ЧастныйПредприниматель))
		|	И ПартииТоваровКомпании.СкладКомпании = &amp;СкладКомпанииЦВ
		|
		|СГРУППИРОВАТЬ ПО
		|	ПартииТоваровКомпании.ДокументПродажи,
		|	ПартииТоваровКомпании.Номенклатура,
		|	ВЫБОР
		|		КОГДА ПартииТоваровКомпании.ВидДвижения = ЗНАЧЕНИЕ(ВидДвиженияНакопления.Приход)
		|			ТОГДА -ПартииТоваровКомпании.Сумма
		|		ИНАЧЕ ПартииТоваровКомпании.Сумма
		|	КОНЕЦ,
		|	ЗНТовары.ЕдиницаИзмерения,
		|	ЗНТовары.СуммаВсего / ЗНТовары.Количество,
		|	НАЧАЛОПЕРИОДА(ЗНТовары.Ссылка.ДатаОкончания, ДЕНЬ)
		|;
		|
		|////////////////////////////////////////////////////////////////////////////////
		|ВЫБРАТЬ
		|	НАЧАЛОПЕРИОДА(РТТовары.Ссылка.ДатаОперации, ДЕНЬ) КАК Дата,
		|	ПартииТоваровКомпании.Номенклатура КАК Номенклатура,
		|	СУММА(ВЫБОР
		|			КОГДА ПартииТоваровКомпании.ВидДвижения = ЗНАЧЕНИЕ(ВидДвиженияНакопления.Приход)
		|				ТОГДА -ПартииТоваровКомпании.Количество
		|			ИНАЧЕ ПартииТоваровКомпании.Количество
		|		КОНЕЦ) КАК Количество,
		|	РТТовары.ЕдиницаИзмерения КАК ЕдиницаИзмерения,
		|	РТТовары.СуммаВсего / РТТовары.Количество КАК Цена,
		|	ПартииТоваровКомпании.ДокументПродажи КАК ДокументПродажи,
		|	""РТ"" КАК ТипПартии
		|ПОМЕСТИТЬ ВТПартииРТ
		|ИЗ
		|	РегистрНакопления.ПартииТоваровКомпании КАК ПартииТоваровКомпании
		|		ВНУТРЕННЕЕ СОЕДИНЕНИЕ Документ.РеализацияТоваров.Товары КАК РТТовары
		|		ПО (РТТовары.Номенклатура = ПартииТоваровКомпании.Номенклатура)
		|			И ПартииТоваровКомпании.ДокументПродажи = РТТовары.Ссылка
		|			И (РТТовары.Ссылка.ДатаОперации МЕЖДУ &amp;ДатаНачала И &amp;ДатаОкончания)
		|ГДЕ
		|	ПартииТоваровКомпании.амбООО = ИСТИНА
		|	И (НЕ ПартииТоваровКомпании.ДокументПродажи.Организация.ФормаСобственности = ЗНАЧЕНИЕ(Перечисление.ФормыСобственности.ЮридическоеЛицо)
		|				И (ПартииТоваровКомпании.ДокументПродажи.Контрагент.ФормаСобственности = ЗНАЧЕНИЕ(Перечисление.ФормыСобственности.ЮридическоеЛицо)
		|					ИЛИ ПартииТоваровКомпании.ДокументПродажи.Контрагент.ФормаСобственности = ЗНАЧЕНИЕ(Перечисление.ФормыСобственности.ЧастныйПредприниматель))
		|			ИЛИ ТИПЗНАЧЕНИЯ(ПартииТоваровКомпании.ДокументПродажи.ДокументОснование.Ссылка) = ТИП(Документ.ЗаказПокупателя)
		|				И ПартииТоваровКомпании.ДокументПродажи.ДокументОснование.амбИнтМаг
		|				И ПартииТоваровКомпании.ДокументПродажи.ДокументОснование.амбСпособОплаты = ЗНАЧЕНИЕ(Перечисление.амбВидыСпособовОплаты.БанковскойКартой)
		|				И ПартииТоваровКомпании.ДокументПродажи.ДокументОснование.амбОплачено)
		|	И ПартииТоваровКомпании.СкладКомпании = &amp;СкладКомпанииЦВ
		|
		|СГРУППИРОВАТЬ ПО
		|	ПартииТоваровКомпании.ДокументПродажи,
		|	ПартииТоваровКомпании.Номенклатура,
		|	ВЫБОР
		|		КОГДА ПартииТоваровКомпании.ВидДвижения = ЗНАЧЕНИЕ(ВидДвиженияНакопления.Приход)
		|			ТОГДА -ПартииТоваровКомпании.Сумма
		|		ИНАЧЕ ПартииТоваровКомпании.Сумма
		|	КОНЕЦ,
		|	РТТовары.ЕдиницаИзмерения,
		|	РТТовары.СуммаВсего / РТТовары.Количество,
		|	НАЧАЛОПЕРИОДА(РТТовары.Ссылка.ДатаОперации, ДЕНЬ)
		|;
		|
		|////////////////////////////////////////////////////////////////////////////////
		|ВЫБРАТЬ
		|	НАЧАЛОПЕРИОДА(ПартииТоваровКомпании.Период, ДЕНЬ) КАК Дата,
		|	ПартииТоваровКомпании.Номенклатура КАК Номенклатура,
		|	ПартииТоваровКомпании.Количество КАК Количество,
		|	ПартииТоваровКомпании.Номенклатура.БазоваяЕдиницаИзмерения КАК НоменклатураБазоваяЕдиницаИзмерения,
		|	ПартииТоваровКомпании.Регистратор КАК ДокументПродажи,
		|	ПартииТоваровКомпании.Сумма КАК Цена,
		|	""Перем"" КАК ТипПартии
		|ПОМЕСТИТЬ ВТПеремещение
		|ИЗ
		|	РегистрНакопления.ПартииТоваровКомпании КАК ПартииТоваровКомпании
		|ГДЕ
		|	ПартииТоваровКомпании.ХозОперация = &amp;ХозОперация
		|	И ПартииТоваровКомпании.ВидДвижения = ЗНАЧЕНИЕ(ВидДвиженияНакопления.Приход)
		|	И ПартииТоваровКомпании.амбООО
		|	И ПартииТоваровКомпании.Период МЕЖДУ &amp;ДатаНачала И &amp;ДатаОкончания
		|	И (ПартииТоваровКомпании.СкладКомпании = &amp;СкладКомпании
		|			ИЛИ ПартииТоваровКомпании.СкладКомпании = &amp;СкладКомпании1)
		|;
		|
		|////////////////////////////////////////////////////////////////////////////////
		|ВЫБРАТЬ
		|	ВТПартии.Дата КАК Дата,
		|	ВТПартии.Номенклатура КАК Номенклатура,
		|	СУММА(ВТПартии.Количество) КАК Количество,
		|	ВТПартии.ДокументПродажи КАК ДокументПродажи,
		|	ВТПартии.ДокументПродажи.ДатаОкончания КАК ДокументПродажиДатаОкончания,
		|	ВТПартии.Цена КАК Цена,
		|	ВТПартии.ТипПартии КАК ТипПартии
		|ИЗ
		|	ВТПартииЗН КАК ВТПартии
		|
		|СГРУППИРОВАТЬ ПО
		|	ВТПартии.Дата,
		|	ВТПартии.Номенклатура,
		|	ВТПартии.ДокументПродажи,
		|	ВТПартии.Цена,
		|	ВТПартии.ДокументПродажи.ДатаОкончания,
		|	ВТПартии.ТипПартии
		|
		|ОБЪЕДИНИТЬ
		|
		|ВЫБРАТЬ
		|	ВТПартии.Дата,
		|	ВТПартии.Номенклатура,
		|	СУММА(ВТПартии.Количество),
		|	ВТПартии.ДокументПродажи,
		|	ВТПартии.ДокументПродажи.ДатаОкончания,
		|	ВТПартии.Цена,
		|	ВТПартии.ТипПартии
		|ИЗ
		|	ВТПартииРТ КАК ВТПартии
		|
		|СГРУППИРОВАТЬ ПО
		|	ВТПартии.Дата,
		|	ВТПартии.Номенклатура,
		|	ВТПартии.ДокументПродажи,
		|	ВТПартии.ДокументПродажи.ДатаОкончания,
		|	ВТПартии.Цена,
		|	ВТПартии.ТипПартии
		|
		|ОБЪЕДИНИТЬ
		|
		|ВЫБРАТЬ
		|	ВТПартии.Дата,
		|	ВТПартии.Номенклатура,
		|	СУММА(ВТПартии.Количество),
		|	ВТПартии.ДокументПродажи,
		|	NULL,
		|	ВТПартии.Цена,
		|	ВТПартии.ТипПартии
		|ИЗ
		|	ВТПеремещение КАК ВТПартии
		|
		|СГРУППИРОВАТЬ ПО
		|	ВТПартии.Дата,
		|	ВТПартии.Номенклатура,
		|	ВТПартии.ДокументПродажи,
		|	ВТПартии.Цена,
		|	ВТПартии.ТипПартии
		|
		|ИМЕЮЩИЕ
		|	НЕ СУММА(ВТПартии.Количество) = 0
		|ИТОГИ ПО
		|	Дата";
	
	Запрос.УстановитьПараметр("ДатаНачала", НачалоДня(ДатаНачала));
	Запрос.УстановитьПараметр("ДатаОкончания", КонецДня(ДатаОкончания)); 	
	Запрос.УстановитьПараметр("СкладКомпанииЦВ", Справочники.СкладыКомпании.НайтиПоКоду("10")); 
	//другие склады, с которых можно продавать ООО товары, кроме Цветочной
	Запрос.УстановитьПараметр("СкладКомпании", Справочники.СкладыКомпании.НайтиПоКоду("14")); 	
	Запрос.УстановитьПараметр("СкладКомпании1", Справочники.СкладыКомпании.НайтиПоКоду("115")); 	
	Запрос.УстановитьПараметр("ХозОперация", Справочники.ХозОперации.ПеремещениеТоваров); 	
	Результат = Запрос.Выполнить();

	ЗапросГТД = Новый Запрос;
	ЗапросГТД.Текст = 
	"ВЫБРАТЬ
	|	ГТДПартийТоваровКомпании.Номенклатура КАК Номенклатура,
	|	ГТДПартийТоваровКомпании.ГТД КАК ГТД,
	|	СУММА(ВЫБОР
	|			КОГДА ГТДПартийТоваровКомпании.ВидДвижения = ЗНАЧЕНИЕ(ВидДвиженияНакопления.Приход)
	|					И НЕ ТИПЗНАЧЕНИЯ(ГТДПартийТоваровКомпании.Регистратор) = ТИП(Документ.ПеремещениеТоваров)
	|				ТОГДА -ГТДПартийТоваровКомпании.Количество
	|			ИНАЧЕ ГТДПартийТоваровКомпании.Количество
	|		КОНЕЦ) КАК Количество
	|ИЗ
	|	РегистрНакопления.ГТДПартийТоваровКомпании КАК ГТДПартийТоваровКомпании
	|ГДЕ
	|	(ТИПЗНАЧЕНИЯ(ГТДПартийТоваровКомпании.Регистратор) = ТИП(Документ.РеализацияТоваров)
	|				И ГТДПартийТоваровКомпании.Регистратор = &amp;ДокументОснование
	|			ИЛИ ТИПЗНАЧЕНИЯ(ГТДПартийТоваровКомпании.Регистратор.ДокументОснование) = ТИП(Документ.ЗаказНаряд)
	|				И ГТДПартийТоваровКомпании.Регистратор.ДокументОснование = &amp;ДокументОснование
	|			ИЛИ ТИПЗНАЧЕНИЯ(ГТДПартийТоваровКомпании.Регистратор) = ТИП(Документ.ПеремещениеТоваров)
	|				И ГТДПартийТоваровКомпании.Регистратор = &amp;ДокументОснование
	|				И (ГТДПартийТоваровКомпании.СкладКомпании = &amp;СкладКомпании
	|					ИЛИ ГТДПартийТоваровКомпании.СкладКомпании = &amp;СкладКомпании1))
	|
	|СГРУППИРОВАТЬ ПО
	|	ГТДПартийТоваровКомпании.ГТД,
	|	ГТДПартийТоваровКомпании.Номенклатура";
	
	ЗапросГТД.УстановитьПараметр("СкладКомпании", Справочники.СкладыКомпании.НайтиПоКоду("14")); 	
	ЗапросГТД.УстановитьПараметр("СкладКомпании1", Справочники.СкладыКомпании.НайтиПоКоду("115")); 	
	
	Организация = Справочники.Организации.НайтиПоНаименованию("ИП Николаев Андрей Борисович",Истина);


	ВыборкаДат = Результат.Выбрать(ОбходРезультатаЗапроса.ПоГруппировкам);
	
	Пока ВыборкаДат.Следующий() Цикл
		Сообщить("Реализация через ИП юр лицу Дата "+ ВыборкаДат.Дата);
		Сообщить("Реализация через ИП юр лицу Y"+Формат(ВыборкаДат.Дата, "ДФ=ггггММдд"));
		ВходящиеДанные = Новый Структура;
		ВходящиеДанные.Вставить("Дата", ВыборкаДат.Дата);
		ВходящиеДанные.Вставить("Номер", "Y"+Формат(ВыборкаДат.Дата, "ДФ=ггггММдд"));
		ВходящиеДанные.Вставить("Организация", Организация);
		ВходящиеДанные.Вставить("Комментарий", "#" + Формат(ВыборкаДат.Дата, "ДФ=dd.MM.yyyy") + "Продажа товара ООО через ИП юридическому или ИП#");
		ВходящиеДанные.Вставить("ВалютаДокумента", "643");
		ВходящиеДанные.Вставить("ДокументБезНДС", Ложь);
		ВходящиеДанные.Вставить("СуммаВключаетНДС", Истина);
		ВходящиеДанные.Вставить("Контрагент", Справочники.Контрагенты.НайтиПоКоду(Параметры.кодОООАльфаМобил));
		ВходящиеДанные.Вставить("Склад", Параметры.КодОсновногоСклада);
		ВходящиеДанные.Вставить("ВидОперации", "Товары");
		ВходящиеДанные.Вставить("ЧекСНДС", Истина);
		//ВходящиеДанные.Вставить("Товары");
	
		Товары = Новый ТаблицаЗначений;
		Товары.Колонки.Добавить("ЕдиницаИзмерения");
		Товары.Колонки.Добавить("Количество");
		Товары.Колонки.Добавить("Коэффициент");
		Товары.Колонки.Добавить("Номенклатура");
		Товары.Колонки.Добавить("СтавкаНДС");
		Товары.Колонки.Добавить("Сумма");
		Товары.Колонки.Добавить("СуммаНДС");
		Товары.Колонки.Добавить("Цена");
		Товары.Колонки.Добавить("СтранаПроисхождения");
		Товары.Колонки.Добавить("НомерГТД");
		//Сообщить(ВыборкаДат.Дата);
		ВыборкаТоваров = ВыборкаДат.Выбрать(ОбходРезультатаЗапроса.ПоГруппировкам);
		//Сообщить("-&gt;"+ВыборкаТоваров.Номенклатура+" "+ВыборкаТоваров.ДокументПродажи+" "+Строка(ВыборкаТоваров.Количество)+" "+Строка(ВыборкаТоваров.Сумма));
		Пока ВыборкаТоваров.Следующий() Цикл
			ЗапросГТД.УстановитьПараметр("ДокументОснование", ВыборкаТоваров.ДокументПродажи);
			//ЗапросГТД.УстановитьПараметр("Номенклатура", ВыборкаТоваров.Номенклатура);
			РезультатГТД = ЗапросГТД.Выполнить();
			ВыборкаГТД = РезультатГТД.Выгрузить();
			СтрокаТЧ = Товары.Добавить();
			ЗаполнитьЗначенияСвойств(СтрокаТЧ,ВыборкаТоваров);
			Сообщить("Товар: "+ВыборкаТоваров.ДокументПродажи);
			Сообщить("Товар: "+СтрокаТЧ.Номенклатура);
			Сообщить("Цена: "+СтрокаТЧ.Цена);
			ммЦена = СтрокаТЧ.Цена;
			Если ВыборкаТоваров.ТипПартии = "Перем" Тогда
				СтрокаТЧ.Цена = Окр(ммЦена / СтрокаТЧ.Количество, 0) + Окр(ммЦена * 0.1,0);
			Иначе	
				СтрокаТЧ.Цена = ммЦена - Окр(ммЦена * 0.3,0);
			КонецЕсли; 
			СтрокаТЧ.Сумма = СтрокаТЧ.Цена * СтрокаТЧ.Количество;
			СтрокаТЧ.СтавкаНДС = Справочники.СтавкиНДС.ОсновнаяСтавкаНДС;
			врКоличество = СтрокаТЧ.Количество;
			врСумма = СтрокаТЧ.Сумма;
			Сообщить(СтрокаТЧ.Номенклатура);
			Пока врКоличество &gt; 0 Цикл
				СтрокаГТД = ВыборкаГТД.Найти(ВыборкаТоваров.Номенклатура,"Номенклатура");
				Если СтрокаГТД &lt;&gt; Неопределено Тогда
					МинКол = Мин(врКоличество, СтрокаГТД.Количество);
					
					СтрокаТЧ.Сумма = Окр(врСумма * МинКол / врКоличество,2); 
					СтрокаТЧ.СуммаНДС =  СтрокаТЧ.Сумма / 120 * 20;
					врСумма = врСумма - СтрокаТЧ.Сумма;
					
					СтрокаТЧ.НомерГТД = СтрокаГТД.ГТД;
					СтрокаТЧ.СтранаПроисхождения = СтрокаГТД.ГТД.Страна;
					
					врКоличество = врКоличество - МинКол;
					СтрокаТЧ.Количество = МинКол;
					СтрокаГТД.Количество = СтрокаГТД.Количество - МинКол;
					Если СтрокаГТД.Количество = 0 Тогда
						ВыборкаГТД.Удалить(СтрокаГТД);
					КонецЕсли;
					
				Иначе
					Сообщить("Ошибка. Не найдена ГТД под товар или не хватило количества!!! "+ВыборкаТоваров.Номенклатура+" "+ВыборкаТоваров.ДокументПродажи);
					Прервать;
				КонецЕсли;
				Если врКоличество &gt; 0 Тогда
					СтрокаТЧ = Товары.Добавить();
					ЗаполнитьЗначенияСвойств(СтрокаТЧ,ВыборкаТоваров);
					ммЦена = СтрокаТЧ.Цена;
					СтрокаТЧ.Цена = ммЦена - Окр(ммЦена * 0.3,0);
					СтрокаТЧ.Сумма = СтрокаТЧ.Цена * СтрокаТЧ.Количество;
					СтрокаТЧ.СтавкаНДС = Справочники.СтавкиНДС.ОсновнаяСтавкаНДС;
				КонецЕсли;
			КонецЦикла;

		КонецЦикла; 
		ВходящиеДанные.Вставить("СуммаДокумента", Товары.Итог("Сумма"));
		ВходящиеДанные.Вставить("Товары", Товары);
		ВыгрузитьПоПравилу(,,ВходящиеДанные,,"ПоступлениеТоваровУслугТоварыООО");

	КонецЦикла;
</ПередОбработкойПравила>
			</Правило>
			<Правило Отключить="true">
				<Код>РазоваяЗагрузкаНоменклатуры</Код>
				<Наименование>Разовая Загрузка Номенклатуры</Наименование>
				<Порядок>450</Порядок>
				<СпособОтбораДанных>ПроизвольныйАлгоритм</СпособОтбораДанных>
				<ПередОбработкойПравила>Номенклатура = Справочники.Номенклатура.НайтиПоКоду("ЦБ000068");
Сообщить("Ном: " + Номенклатура);
ВыгрузитьПоПравилу(Номенклатура,,,,"Номенклатура");</ПередОбработкойПравила>
			</Правило>
			<Правило Отключить="true">
				<Код>Инвентаризация</Код>
				<Наименование>Инвентаризация</Наименование>
				<Порядок>500</Порядок>
				<КодПравилаКонвертации>ИнвентаризацияТоваровНаСкладе                     </КодПравилаКонвертации>
				<СпособОтбораДанных>СтандартнаяВыборка</СпособОтбораДанных>
				<ОбъектВыборки>ДокументСсылка.Инвентаризация</ОбъектВыборки>
			</Правило>
		</Группа>
	</ПравилаВыгрузкиДанных>
	<ПравилаОчисткиДанных/>
	<Алгоритмы/>
	<Запросы/>
</ПравилаОбмена>